!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){var ComponentTiles,ViewController;ComponentTiles=require("./components/TilesComponent.coffee"),ViewController=React.createElement(ComponentTiles,null),React.render(ViewController,document.getElementById("game"))}).call(this)},{"./components/TilesComponent.coffee":7}],2:[function(require,module,exports){module.exports.Dispatcher=require("./lib/Dispatcher")},{"./lib/Dispatcher":13}],3:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("Flux").Dispatcher,module.exports=new Dispatcher}).call(this)},{Flux:10}],4:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("../Dispatcher.coffee"),module.exports={toggleFlag:function(uid){return Dispatcher.dispatch({type:"TILE_FLAG_TOGGLE",uid:uid})},clear:function(uid){return Dispatcher.dispatch({type:"TILE_CLEAR",uid:uid})}}}).call(this)},{"../Dispatcher.coffee":3}],5:[function(require,module,exports){(function(){var TileModel,TilesCollection,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;TileModel=require("../models/TileModel.coffee"),TilesCollection=function(){function TilesCollection(){var Model;this.all=[],this.model=Model=function(superClass){function Model(){return Model.__super__.constructor.apply(this,arguments)}return extend(Model,superClass),Model.prototype.clear=function(){return Model.__super__.clear.call(this),collection.clearNeighbors(this),collection.moveUpdate()},Model.prototype.toggleFlag=function(){return Model.__super__.toggleFlag.call(this),collection.moveUpdate()},Model.prototype.click=function($event){var tileRef;return collection.noMineFirstClick(this),Model.__super__.click.call(this,$event),tileRef=collection.refs[this.model.uid],tileRef?tileRef.forceUpdate():void 0},Model}(TileModel),this.newGame()}return TilesCollection.prototype.newGame=function(){var attrs,i,j,k,mineNum,ref,ref1,ref2,tile,x,y;for(this.reset(),this.sizeY=4,this.sizeX=7,this.numOfMines=5,y=i=0,ref=this.sizeY-1;ref>=0?ref>=i:i>=ref;y=ref>=0?++i:--i)for(x=j=0,ref1=this.sizeX-1;ref1>=0?ref1>=j:j>=ref1;x=ref1>=0?++j:--j)attrs={x:x,y:y},this.add(attrs);for(mineNum=k=1,ref2=this.numOfMines;ref2>=1?ref2>=k:k>=ref2;mineNum=ref2>=1?++k:--k)tile=this.randomSafeTile(),tile.model.isMine=!0;return this.tallyMines(),this.gameUpdate()},TilesCollection.prototype.noMineFirstClick=function(tile){return 0===this.numOfClears&&tile.model.isMine===!0&&(tile.model.isMine=!1,this.randomSafeTile().model.isMine=!0,this.tallyMines()),tile},TilesCollection.prototype.add=function(model){var tile;return tile=new this.model(model),this.all.push(tile),tile},TilesCollection.prototype.handleTileClick=function(event,index){},TilesCollection.prototype.reset=function(){return this.all=[],this},TilesCollection.prototype.get=function(attrs){return this.getAll(attrs)[0]},TilesCollection.prototype.getAll=function(attrs){var i,key,len,matches,numOfAttrs,numOfMatchedAttrs,ref,tile,val;if(matches=[],!attrs)return this.all;for(ref=this.all,i=0,len=ref.length;len>i;i++){tile=ref[i],numOfAttrs=0,numOfMatchedAttrs=0;for(key in attrs)val=attrs[key],numOfAttrs++,tile.model[key]===val&&numOfMatchedAttrs++;numOfMatchedAttrs===numOfAttrs&&matches.push(tile)}return matches},TilesCollection.prototype.randomSafeTile=function(){var findAttrs,randomIndex,safeTiles;return findAttrs={isClear:!1,isMine:!1},safeTiles=this.getAll(findAttrs),randomIndex=Math.floor(Math.random()*safeTiles.length),safeTiles[randomIndex]},TilesCollection.prototype.tallyMines=function(){var adjacentTile,i,j,len,len1,neighborAttrs,neighborMine,neighborMines,neighborX,neighborY,ref,ref1,results,tile;for(ref=this.all,results=[],i=0,len=ref.length;len>i;i++){for(tile=ref[i],neighborMines=0,ref1=tile.adjacentTiles,j=0,len1=ref1.length;len1>j;j++)adjacentTile=ref1[j],neighborX=tile.model.x+adjacentTile[0],neighborY=tile.model.y+adjacentTile[1],neighborAttrs={isMine:!0,x:neighborX,y:neighborY},neighborMine=this.get(neighborAttrs),void 0!==neighborMine&&neighborMines++;results.push(tile.model.adjacentMines=neighborMines)}return results},TilesCollection.prototype.gameUpdate=function(){var i,len,ref,tile;for(this.x=Math.max.apply(this,this.all.map(function(tile){return tile.model.x})),this.y=Math.max.apply(this,this.all.map(function(tile){return tile.model.y})),this.x=this.x--,this.y=this.y--,this.numOfMines=0,ref=this.all,i=0,len=ref.length;len>i;i++)tile=ref[i],tile.model.isMine===!0&&this.numOfMines++;return this.moveUpdate()},TilesCollection.prototype.moveUpdate=function(){var i,len,ref,tile;for(this.loss=!1,this.win=!1,this.numOfClears=0,this.numOfFlags=0,ref=this.all,i=0,len=ref.length;len>i;i++)tile=ref[i],tile.model.isClear===!0&&this.numOfClears++,tile.model.isFlagged===!0&&this.numOfFlags++,tile.model.isMine===!0&&tile.model.isClear===!0&&(this.loss=!0);return this.loss===!1&&this.all.length-this.numOfMines-this.numOfClears===0?this.win=!0:void 0},TilesCollection.prototype.clearNeighbors=function(tile){var adjacentTile,i,len,neighbor,ref,results,shouldClearNeighbor,shouldClearNeighbors;if(shouldClearNeighbors=0===tile.model.adjacentMines&&tile.model.isMine===!1){for(ref=tile.adjacentTiles,results=[],i=0,len=ref.length;len>i;i++)adjacentTile=ref[i],neighbor=this.get({x:tile.model.x+adjacentTile[0],y:tile.model.y+adjacentTile[1]}),shouldClearNeighbor=neighbor&&neighbor.model.isClear===!1&&neighbor.model.isMine===!1,results.push(shouldClearNeighbor?neighbor.click():void 0);return results}},TilesCollection}(),module.exports=TilesCollection}).call(this)},{"../models/TileModel.coffee":8}],6:[function(require,module,exports){(function(){var R,Tile,TileActions;TileActions=require("../actions/TileActions.coffee"),R=React.DOM,Tile=React.createClass({displayName:"Tile",componentDidMount:function(){return this.props.tile.model.index=this.props.index},render:function(){return R.li({className:this.getClass(),onClick:this.clickHandler},R.span(null,this.getText()))},clickHandler:function($event){var flagKeyWasPressed;return $event?(flagKeyWasPressed=$event.shiftKey===!0||$event.altKey===!0,flagKeyWasPressed?TileActions.toggleFlag(this.props.tile.model.uid):TileActions.clear(this.props.tile.model.uid)):TileActions.clear(this.props.tile.model.uid)},isFirstColumn:function(){return 0===this.props.tile.model.x},hasBeenFlagged:function(){return this.props.tile.model.isClear!==!0&&this.props.tile.model.isFlagged===!0},hasBeenCleared:function(){return this.props.tile.model.isClear===!0},hasMine:function(){return this.props.tile.model.isMine===!0},shouldDisplayMine:function(){return this.hasMine()&&this.hasBeenCleared()},hasZeroAdjacentMines:function(){return 0===this.props.tile.model.adjacentMines&&!this.hasMine()},getText:function(){var text;return text=this.props.tile.model.adjacentMines,this.hasBeenFlagged()?text="?":this.shouldDisplayMine()&&(text="X"),text},getClass:function(){return["tile",this.isFirstColumn()?"nth":void 0,this.hasBeenCleared()?"clear":void 0,this.hasBeenFlagged()?"flagged":void 0,this.shouldDisplayMine()?"mine":void 0,this.hasZeroAdjacentMines()?"clear zero":void 0].join(" ")}}),module.exports=Tile}).call(this)},{"../actions/TileActions.coffee":4}],7:[function(require,module,exports){(function(){var Dispatcher,R,TileComponent,TileStore,Tiles;TileComponent=require("./TileComponent.coffee"),Dispatcher=require("../Dispatcher.coffee"),TileStore=require("../stores/TileStore.coffee"),R=React.DOM,Tiles=React.createClass({displayName:"Tiles",getInitialState:function(){return{all:TileStore.getAll()}},render:function(){var tiles;return tiles=this.state.all.map(function(_this){return function(item,index){return React.createElement(TileComponent,{key:index,ref:item.model.uid,tile:item})}}(this)),R.ul({id:"board"},tiles)},componentDidMount:function(){var collection;return collection=this}}),Dispatcher.register(function(event){switch(event.type){case"TILE_FLAG_TOGGLE":return console.log("tile flag");case"TILE_CLEAR":return console.log("tile clear")}}),module.exports=Tiles}).call(this)},{"../Dispatcher.coffee":3,"../stores/TileStore.coffee":9,"./TileComponent.coffee":6}],8:[function(require,module,exports){(function(){var TileModel;Number.isInteger=Number.isInteger||function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value},module.exports=TileModel=function(){function TileModel(attrs){if(!Number.isInteger(attrs.x)||!Number.isInteger(attrs.y))throw"`x` and `y` are required Integer attributes to instantiate Tile";this.model={x:void 0,y:void 0,uid:void 0,isMine:!1,isClear:!1,isFlagged:!1,adjacentMines:0},this.adjacentTiles=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],this.set(attrs)}return TileModel.prototype.set=function(attrs){var attr,key;for(key in attrs)attr=attrs[key],this.model[key]=attr,this.model.uid=String(attrs.x)+"-"+String(attrs.y);return this},TileModel.prototype.toggleFlag=function(){return this.model.isFlagged=!this.model.isFlagged,this},TileModel.prototype.clear=function(){return this.model.isClear=!0,this.model.isFlagged=!1,this},TileModel.prototype.click=function($event){var flagKeyWasPressed;return $event?(flagKeyWasPressed=$event.shiftKey===!0||$event.altKey===!0,flagKeyWasPressed?this.toggleFlag():this.clear()):this.clear()},TileModel}()}).call(this)},{}],9:[function(require,module,exports){(function(){var Dispatcher,Tiles,TilesCollection,TodoStore;TilesCollection=require("../collections/TilesCollection.coffee"),Dispatcher=require("../Dispatcher.coffee"),Tiles=new TilesCollection,TodoStore={getAll:function(){return console.log(Tiles.getAll()),Tiles.getAll()}},module.exports=TodoStore}).call(this)},{"../Dispatcher.coffee":3,"../collections/TilesCollection.coffee":5}],10:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"./lib/Dispatcher":11,dup:2}],11:[function(require,module,exports){"use strict";function Dispatcher(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var invariant=require("./invariant"),_lastID=1,_prefix="ID_";Dispatcher.prototype.register=function(callback){var id=_prefix+_lastID++;return this.$Dispatcher_callbacks[id]=callback,id},Dispatcher.prototype.unregister=function(id){invariant(this.$Dispatcher_callbacks[id],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",id),delete this.$Dispatcher_callbacks[id]},Dispatcher.prototype.waitFor=function(ids){invariant(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var ii=0;ii<ids.length;ii++){var id=ids[ii];this.$Dispatcher_isPending[id]?invariant(this.$Dispatcher_isHandled[id],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",id):(invariant(this.$Dispatcher_callbacks[id],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",id),this.$Dispatcher_invokeCallback(id))}},Dispatcher.prototype.dispatch=function(payload){invariant(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(payload);try{for(var id in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[id]||this.$Dispatcher_invokeCallback(id)}finally{this.$Dispatcher_stopDispatching()}},Dispatcher.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},Dispatcher.prototype.$Dispatcher_invokeCallback=function(id){this.$Dispatcher_isPending[id]=!0,this.$Dispatcher_callbacks[id](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[id]=!0},Dispatcher.prototype.$Dispatcher_startDispatching=function(payload){for(var id in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[id]=!1,this.$Dispatcher_isHandled[id]=!1;this.$Dispatcher_pendingPayload=payload,this.$Dispatcher_isDispatching=!0},Dispatcher.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},module.exports=Dispatcher},{"./invariant":12}],12:[function(require,module,exports){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}throw error.framesToPop=1,error}};module.exports=invariant},{}],13:[function(require,module,exports){arguments[4][11][0].apply(exports,arguments)},{"./invariant":14,dup:11}],14:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{dup:12}]},{},[1,2]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJSZXNvdXJjZXMvY29mZmVlL0FwcC5jb2ZmZWUiLCJidWlsZC5qcyIsIm5vZGVfbW9kdWxlcy9mbHV4L2luZGV4LmpzIiwiUmVzb3VyY2VzL2NvZmZlZS9EaXNwYXRjaGVyLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvYWN0aW9ucy9UaWxlQWN0aW9ucy5jb2ZmZWUiLCJSZXNvdXJjZXMvY29mZmVlL2NvbGxlY3Rpb25zL1RpbGVzQ29sbGVjdGlvbi5jb2ZmZWUiLCJSZXNvdXJjZXMvY29mZmVlL2NvbXBvbmVudHMvVGlsZUNvbXBvbmVudC5jb2ZmZWUiLCJSZXNvdXJjZXMvY29mZmVlL2NvbXBvbmVudHMvVGlsZXNDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9tb2RlbHMvVGlsZU1vZGVsLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvc3RvcmVzL1RpbGVTdG9yZS5jb2ZmZWUiLCJub2RlX21vZHVsZXMvRmx1eC9saWIvRGlzcGF0Y2hlci5qcyIsIm5vZGVfbW9kdWxlcy9GbHV4L2xpYi9pbnZhcmlhbnQuanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLDEsIm1vZHVsZSIsIkNvbXBvbmVudFRpbGVzIiwiVmlld0NvbnRyb2xsZXIiLCJSZWFjdCIsImNyZWF0ZUVsZW1lbnQiLCJyZW5kZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidGhpcyIsIi4vY29tcG9uZW50cy9UaWxlc0NvbXBvbmVudC5jb2ZmZWUiLDIsIkRpc3BhdGNoZXIiLCIuL2xpYi9EaXNwYXRjaGVyIiwzLCJGbHV4Iiw0LCJ0b2dnbGVGbGFnIiwidWlkIiwiZGlzcGF0Y2giLCJ0eXBlIiwiY2xlYXIiLCIuLi9EaXNwYXRjaGVyLmNvZmZlZSIsNSwiVGlsZU1vZGVsIiwiVGlsZXNDb2xsZWN0aW9uIiwiZXh0ZW5kIiwiY2hpbGQiLCJwYXJlbnQiLCJjdG9yIiwiY29uc3RydWN0b3IiLCJrZXkiLCJoYXNQcm9wIiwicHJvdG90eXBlIiwiX19zdXBlcl9fIiwiaGFzT3duUHJvcGVydHkiLCJNb2RlbCIsImFsbCIsIm1vZGVsIiwic3VwZXJDbGFzcyIsImFwcGx5IiwiYXJndW1lbnRzIiwiY29sbGVjdGlvbiIsImNsZWFyTmVpZ2hib3JzIiwibW92ZVVwZGF0ZSIsImNsaWNrIiwiJGV2ZW50IiwidGlsZVJlZiIsIm5vTWluZUZpcnN0Q2xpY2siLCJyZWZzIiwiZm9yY2VVcGRhdGUiLCJuZXdHYW1lIiwiYXR0cnMiLCJqIiwiayIsIm1pbmVOdW0iLCJyZWYiLCJyZWYxIiwicmVmMiIsInRpbGUiLCJ4IiwieSIsInJlc2V0Iiwic2l6ZVkiLCJzaXplWCIsIm51bU9mTWluZXMiLCJhZGQiLCJyYW5kb21TYWZlVGlsZSIsImlzTWluZSIsInRhbGx5TWluZXMiLCJnYW1lVXBkYXRlIiwibnVtT2ZDbGVhcnMiLCJwdXNoIiwiaGFuZGxlVGlsZUNsaWNrIiwiZXZlbnQiLCJpbmRleCIsImdldCIsImdldEFsbCIsImxlbiIsIm1hdGNoZXMiLCJudW1PZkF0dHJzIiwibnVtT2ZNYXRjaGVkQXR0cnMiLCJ2YWwiLCJmaW5kQXR0cnMiLCJyYW5kb21JbmRleCIsInNhZmVUaWxlcyIsImlzQ2xlYXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhZGphY2VudFRpbGUiLCJsZW4xIiwibmVpZ2hib3JBdHRycyIsIm5laWdoYm9yTWluZSIsIm5laWdoYm9yTWluZXMiLCJuZWlnaGJvclgiLCJuZWlnaGJvclkiLCJyZXN1bHRzIiwiYWRqYWNlbnRUaWxlcyIsImFkamFjZW50TWluZXMiLCJtYXgiLCJtYXAiLCJsb3NzIiwid2luIiwibnVtT2ZGbGFncyIsImlzRmxhZ2dlZCIsIm5laWdoYm9yIiwic2hvdWxkQ2xlYXJOZWlnaGJvciIsInNob3VsZENsZWFyTmVpZ2hib3JzIiwiLi4vbW9kZWxzL1RpbGVNb2RlbC5jb2ZmZWUiLDYsIlIiLCJUaWxlIiwiVGlsZUFjdGlvbnMiLCJET00iLCJjcmVhdGVDbGFzcyIsImRpc3BsYXlOYW1lIiwiY29tcG9uZW50RGlkTW91bnQiLCJwcm9wcyIsImxpIiwiY2xhc3NOYW1lIiwiZ2V0Q2xhc3MiLCJvbkNsaWNrIiwiY2xpY2tIYW5kbGVyIiwic3BhbiIsImdldFRleHQiLCJmbGFnS2V5V2FzUHJlc3NlZCIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiaXNGaXJzdENvbHVtbiIsImhhc0JlZW5GbGFnZ2VkIiwiaGFzQmVlbkNsZWFyZWQiLCJoYXNNaW5lIiwic2hvdWxkRGlzcGxheU1pbmUiLCJoYXNaZXJvQWRqYWNlbnRNaW5lcyIsInRleHQiLCJqb2luIiwiLi4vYWN0aW9ucy9UaWxlQWN0aW9ucy5jb2ZmZWUiLDcsIlRpbGVDb21wb25lbnQiLCJUaWxlU3RvcmUiLCJUaWxlcyIsImdldEluaXRpYWxTdGF0ZSIsInRpbGVzIiwic3RhdGUiLCJfdGhpcyIsIml0ZW0iLCJ1bCIsImlkIiwicmVnaXN0ZXIiLCJjb25zb2xlIiwibG9nIiwiLi4vc3RvcmVzL1RpbGVTdG9yZS5jb2ZmZWUiLCIuL1RpbGVDb21wb25lbnQuY29mZmVlIiw4LCJOdW1iZXIiLCJpc0ludGVnZXIiLCJ2YWx1ZSIsImlzRmluaXRlIiwic2V0IiwiYXR0ciIsIlN0cmluZyIsOSwiVG9kb1N0b3JlIiwiLi4vY29sbGVjdGlvbnMvVGlsZXNDb2xsZWN0aW9uLmNvZmZlZSIsMTAsImR1cCIsMTEsIiREaXNwYXRjaGVyX2NhbGxiYWNrcyIsIiREaXNwYXRjaGVyX2lzUGVuZGluZyIsIiREaXNwYXRjaGVyX2lzSGFuZGxlZCIsIiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmciLCIkRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCIsImludmFyaWFudCIsIl9sYXN0SUQiLCJfcHJlZml4IiwiY2FsbGJhY2siLCJ1bnJlZ2lzdGVyIiwid2FpdEZvciIsImlkcyIsImlpIiwiJERpc3BhdGNoZXJfaW52b2tlQ2FsbGJhY2siLCJwYXlsb2FkIiwiJERpc3BhdGNoZXJfc3RhcnREaXNwYXRjaGluZyIsIiREaXNwYXRjaGVyX3N0b3BEaXNwYXRjaGluZyIsImlzRGlzcGF0Y2hpbmciLCIuL2ludmFyaWFudCIsMTIsImNvbmRpdGlvbiIsImZvcm1hdCIsImIiLCJjIiwiZCIsImVycm9yIiwidW5kZWZpbmVkIiwiYXJncyIsImFyZ0luZGV4IiwicmVwbGFjZSIsImZyYW1lc1RvUG9wIiwxMywxNF0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFBQUEsR0FBQUosR0FBQSxFQUFBLElBQUFLLEdBQUEsR0FBQUMsT0FBQSx1QkFBQU4sRUFBQSxJQUFBLE1BQUFLLEdBQUFFLEtBQUEsbUJBQUFGLEVBQUEsR0FBQUcsR0FBQVgsRUFBQUcsSUFBQVMsV0FBQWIsR0FBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsR0FBQUUsR0FBQUQsRUFBQUksR0FBQSxHQUFBTCxFQUFBLE9BQUFJLEdBQUFGLEVBQUFBLEVBQUFGLElBQUFhLEVBQUFBLEVBQUFDLFFBQUFkLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsTUFBQUQsR0FBQUcsR0FBQVMsUUFBQSxJQUFBLEdBQUFMLEdBQUEsa0JBQUFELFVBQUFBLFFBQUFILEVBQUEsRUFBQUEsRUFBQUYsRUFBQWEsT0FBQVgsSUFBQUQsRUFBQUQsRUFBQUUsR0FBQSxPQUFBRCxLQUFBYSxHQUFBLFNBQUFULFFBQUFVLE9BQUFKLFVDQUEsV0FDQSxHQUFBSyxnQkFBQUMsY0FFQUQsZ0JBQUFY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Z0wsZVZxdkJNMEIsSUFBSSxTQUFTaE4sUUFBUVUsT0FBT0osU0FDbEM0QyxVQUFVLEdBQUcsSUFBSSxHQUFHRCxNQUFNM0MsUUFBUTRDLGFBQy9CaUosY0FBYyxHQUFHcEIsSUFBTSxLQUFLa0MsSUFBSSxTQUFTak4sUUFBUVUsT0FBT0osU0FDM0Q0QyxVQUFVLEdBQUcsSUFBSSxHQUFHRCxNQUFNM0MsUUFBUTRDLGFBQy9CNkgsSUFBTSxVQUFVLEVBQUUiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbigpIHtcbiAgdmFyIENvbXBvbmVudFRpbGVzLCBWaWV3Q29udHJvbGxlcjtcblxuICBDb21wb25lbnRUaWxlcyA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9UaWxlc0NvbXBvbmVudC5jb2ZmZWUnKTtcblxuICBWaWV3Q29udHJvbGxlciA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50VGlsZXMsIG51bGwpO1xuXG4gIFJlYWN0LnJlbmRlcihWaWV3Q29udHJvbGxlciwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLG51bGwsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cy5EaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9saWIvRGlzcGF0Y2hlcicpXG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBEaXNwYXRjaGVyO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCdGbHV4JykuRGlzcGF0Y2hlcjtcblxuICBtb2R1bGUuZXhwb3J0cyA9IG5ldyBEaXNwYXRjaGVyKCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBEaXNwYXRjaGVyO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9EaXNwYXRjaGVyLmNvZmZlZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIHRvZ2dsZUZsYWc6IGZ1bmN0aW9uKHVpZCkge1xuICAgICAgcmV0dXJuIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnVElMRV9GTEFHX1RPR0dMRScsXG4gICAgICAgIHVpZDogdWlkXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNsZWFyOiBmdW5jdGlvbih1aWQpIHtcbiAgICAgIHJldHVybiBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ1RJTEVfQ0xFQVInLFxuICAgICAgICB1aWQ6IHVpZFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgVGlsZU1vZGVsLCBUaWxlc0NvbGxlY3Rpb24sXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBUaWxlTW9kZWwgPSByZXF1aXJlKCcuLi9tb2RlbHMvVGlsZU1vZGVsLmNvZmZlZScpO1xuXG4gIFRpbGVzQ29sbGVjdGlvbiA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBUaWxlc0NvbGxlY3Rpb24oKSB7XG4gICAgICB2YXIgTW9kZWw7XG4gICAgICB0aGlzLmFsbCA9IFtdO1xuICAgICAgdGhpcy5tb2RlbCA9IE1vZGVsID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICAgICAgZXh0ZW5kKE1vZGVsLCBzdXBlckNsYXNzKTtcblxuICAgICAgICBmdW5jdGlvbiBNb2RlbCgpIHtcbiAgICAgICAgICByZXR1cm4gTW9kZWwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICBNb2RlbC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBNb2RlbC5fX3N1cGVyX18uY2xlYXIuY2FsbCh0aGlzKTtcbiAgICAgICAgICBjb2xsZWN0aW9uLmNsZWFyTmVpZ2hib3JzKHRoaXMpO1xuICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uLm1vdmVVcGRhdGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBNb2RlbC5wcm90b3R5cGUudG9nZ2xlRmxhZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIE1vZGVsLl9fc3VwZXJfXy50b2dnbGVGbGFnLmNhbGwodGhpcyk7XG4gICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb24ubW92ZVVwZGF0ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIE1vZGVsLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgIHZhciB0aWxlUmVmO1xuICAgICAgICAgIGNvbGxlY3Rpb24ubm9NaW5lRmlyc3RDbGljayh0aGlzKTtcbiAgICAgICAgICBNb2RlbC5fX3N1cGVyX18uY2xpY2suY2FsbCh0aGlzLCAkZXZlbnQpO1xuICAgICAgICAgIHRpbGVSZWYgPSBjb2xsZWN0aW9uLnJlZnNbdGhpcy5tb2RlbC51aWRdO1xuICAgICAgICAgIGlmICh0aWxlUmVmKSB7XG4gICAgICAgICAgICByZXR1cm4gdGlsZVJlZi5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gTW9kZWw7XG5cbiAgICAgIH0pKFRpbGVNb2RlbCk7XG4gICAgICB0aGlzLm5ld0dhbWUoKTtcbiAgICB9XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLm5ld0dhbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhdHRycywgaSwgaiwgaywgbWluZU51bSwgcmVmLCByZWYxLCByZWYyLCB0aWxlLCB4LCB5O1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgdGhpcy5zaXplWSA9IDQ7XG4gICAgICB0aGlzLnNpemVYID0gNztcbiAgICAgIHRoaXMubnVtT2ZNaW5lcyA9IDU7XG4gICAgICBmb3IgKHkgPSBpID0gMCwgcmVmID0gdGhpcy5zaXplWSAtIDE7IDAgPD0gcmVmID8gaSA8PSByZWYgOiBpID49IHJlZjsgeSA9IDAgPD0gcmVmID8gKytpIDogLS1pKSB7XG4gICAgICAgIGZvciAoeCA9IGogPSAwLCByZWYxID0gdGhpcy5zaXplWCAtIDE7IDAgPD0gcmVmMSA/IGogPD0gcmVmMSA6IGogPj0gcmVmMTsgeCA9IDAgPD0gcmVmMSA/ICsraiA6IC0taikge1xuICAgICAgICAgIGF0dHJzID0ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHlcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMuYWRkKGF0dHJzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChtaW5lTnVtID0gayA9IDEsIHJlZjIgPSB0aGlzLm51bU9mTWluZXM7IDEgPD0gcmVmMiA/IGsgPD0gcmVmMiA6IGsgPj0gcmVmMjsgbWluZU51bSA9IDEgPD0gcmVmMiA/ICsrayA6IC0taykge1xuICAgICAgICB0aWxlID0gdGhpcy5yYW5kb21TYWZlVGlsZSgpO1xuICAgICAgICB0aWxlLm1vZGVsLmlzTWluZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnRhbGx5TWluZXMoKTtcbiAgICAgIHJldHVybiB0aGlzLmdhbWVVcGRhdGUoKTtcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5ub01pbmVGaXJzdENsaWNrID0gZnVuY3Rpb24odGlsZSkge1xuICAgICAgaWYgKHRoaXMubnVtT2ZDbGVhcnMgPT09IDAgJiYgdGlsZS5tb2RlbC5pc01pbmUgPT09IHRydWUpIHtcbiAgICAgICAgdGlsZS5tb2RlbC5pc01pbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yYW5kb21TYWZlVGlsZSgpLm1vZGVsLmlzTWluZSA9IHRydWU7XG4gICAgICAgIHRoaXMudGFsbHlNaW5lcygpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgIHZhciB0aWxlO1xuICAgICAgdGlsZSA9IG5ldyB0aGlzLm1vZGVsKG1vZGVsKTtcbiAgICAgIHRoaXMuYWxsLnB1c2godGlsZSk7XG4gICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2xpY2sgPSBmdW5jdGlvbihldmVudCwgaW5kZXgpIHt9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5hbGwgPSBbXTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRBbGwoYXR0cnMpWzBdO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICB2YXIgaSwga2V5LCBsZW4sIG1hdGNoZXMsIG51bU9mQXR0cnMsIG51bU9mTWF0Y2hlZEF0dHJzLCByZWYsIHRpbGUsIHZhbDtcbiAgICAgIG1hdGNoZXMgPSBbXTtcbiAgICAgIGlmICghYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsO1xuICAgICAgfVxuICAgICAgcmVmID0gdGhpcy5hbGw7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGlsZSA9IHJlZltpXTtcbiAgICAgICAgbnVtT2ZBdHRycyA9IDA7XG4gICAgICAgIG51bU9mTWF0Y2hlZEF0dHJzID0gMDtcbiAgICAgICAgZm9yIChrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICB2YWwgPSBhdHRyc1trZXldO1xuICAgICAgICAgIG51bU9mQXR0cnMrKztcbiAgICAgICAgICBpZiAodGlsZS5tb2RlbFtrZXldID09PSB2YWwpIHtcbiAgICAgICAgICAgIG51bU9mTWF0Y2hlZEF0dHJzKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChudW1PZk1hdGNoZWRBdHRycyA9PT0gbnVtT2ZBdHRycykge1xuICAgICAgICAgIG1hdGNoZXMucHVzaCh0aWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUucmFuZG9tU2FmZVRpbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBmaW5kQXR0cnMsIHJhbmRvbUluZGV4LCBzYWZlVGlsZXM7XG4gICAgICBmaW5kQXR0cnMgPSB7XG4gICAgICAgIGlzQ2xlYXI6IGZhbHNlLFxuICAgICAgICBpc01pbmU6IGZhbHNlXG4gICAgICB9O1xuICAgICAgc2FmZVRpbGVzID0gdGhpcy5nZXRBbGwoZmluZEF0dHJzKTtcbiAgICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2FmZVRpbGVzLmxlbmd0aCk7XG4gICAgICByZXR1cm4gc2FmZVRpbGVzW3JhbmRvbUluZGV4XTtcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS50YWxseU1pbmVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYWRqYWNlbnRUaWxlLCBpLCBqLCBsZW4sIGxlbjEsIG5laWdoYm9yQXR0cnMsIG5laWdoYm9yTWluZSwgbmVpZ2hib3JNaW5lcywgbmVpZ2hib3JYLCBuZWlnaGJvclksIHJlZiwgcmVmMSwgcmVzdWx0cywgdGlsZTtcbiAgICAgIHJlZiA9IHRoaXMuYWxsO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRpbGUgPSByZWZbaV07XG4gICAgICAgIG5laWdoYm9yTWluZXMgPSAwO1xuICAgICAgICByZWYxID0gdGlsZS5hZGphY2VudFRpbGVzO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICBhZGphY2VudFRpbGUgPSByZWYxW2pdO1xuICAgICAgICAgIG5laWdoYm9yWCA9IHRpbGUubW9kZWwueCArIGFkamFjZW50VGlsZVswXTtcbiAgICAgICAgICBuZWlnaGJvclkgPSB0aWxlLm1vZGVsLnkgKyBhZGphY2VudFRpbGVbMV07XG4gICAgICAgICAgbmVpZ2hib3JBdHRycyA9IHtcbiAgICAgICAgICAgIGlzTWluZTogdHJ1ZSxcbiAgICAgICAgICAgIHg6IG5laWdoYm9yWCxcbiAgICAgICAgICAgIHk6IG5laWdoYm9yWVxuICAgICAgICAgIH07XG4gICAgICAgICAgbmVpZ2hib3JNaW5lID0gdGhpcy5nZXQobmVpZ2hib3JBdHRycyk7XG4gICAgICAgICAgaWYgKG5laWdoYm9yTWluZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBuZWlnaGJvck1pbmVzKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aWxlLm1vZGVsLmFkamFjZW50TWluZXMgPSBuZWlnaGJvck1pbmVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdhbWVVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBsZW4sIHJlZiwgdGlsZTtcbiAgICAgIHRoaXMueCA9IE1hdGgubWF4LmFwcGx5KHRoaXMsIHRoaXMuYWxsLm1hcChmdW5jdGlvbih0aWxlKSB7XG4gICAgICAgIHJldHVybiB0aWxlLm1vZGVsLng7XG4gICAgICB9KSk7XG4gICAgICB0aGlzLnkgPSBNYXRoLm1heC5hcHBseSh0aGlzLCB0aGlzLmFsbC5tYXAoZnVuY3Rpb24odGlsZSkge1xuICAgICAgICByZXR1cm4gdGlsZS5tb2RlbC55O1xuICAgICAgfSkpO1xuICAgICAgdGhpcy54ID0gdGhpcy54LS07XG4gICAgICB0aGlzLnkgPSB0aGlzLnktLTtcbiAgICAgIHRoaXMubnVtT2ZNaW5lcyA9IDA7XG4gICAgICByZWYgPSB0aGlzLmFsbDtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aWxlID0gcmVmW2ldO1xuICAgICAgICBpZiAodGlsZS5tb2RlbC5pc01pbmUgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLm51bU9mTWluZXMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMubW92ZVVwZGF0ZSgpO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLm1vdmVVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBsZW4sIHJlZiwgdGlsZTtcbiAgICAgIHRoaXMubG9zcyA9IGZhbHNlO1xuICAgICAgdGhpcy53aW4gPSBmYWxzZTtcbiAgICAgIHRoaXMubnVtT2ZDbGVhcnMgPSAwO1xuICAgICAgdGhpcy5udW1PZkZsYWdzID0gMDtcbiAgICAgIHJlZiA9IHRoaXMuYWxsO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRpbGUgPSByZWZbaV07XG4gICAgICAgIGlmICh0aWxlLm1vZGVsLmlzQ2xlYXIgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLm51bU9mQ2xlYXJzKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGUubW9kZWwuaXNGbGFnZ2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5udW1PZkZsYWdzKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGUubW9kZWwuaXNNaW5lID09PSB0cnVlICYmIHRpbGUubW9kZWwuaXNDbGVhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMubG9zcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxvc3MgPT09IGZhbHNlICYmIHRoaXMuYWxsLmxlbmd0aCAtIHRoaXMubnVtT2ZNaW5lcyAtIHRoaXMubnVtT2ZDbGVhcnMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2luID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5jbGVhck5laWdoYm9ycyA9IGZ1bmN0aW9uKHRpbGUpIHtcbiAgICAgIHZhciBhZGphY2VudFRpbGUsIGksIGxlbiwgbmVpZ2hib3IsIHJlZiwgcmVzdWx0cywgc2hvdWxkQ2xlYXJOZWlnaGJvciwgc2hvdWxkQ2xlYXJOZWlnaGJvcnM7XG4gICAgICBzaG91bGRDbGVhck5laWdoYm9ycyA9IHRpbGUubW9kZWwuYWRqYWNlbnRNaW5lcyA9PT0gMCAmJiB0aWxlLm1vZGVsLmlzTWluZSA9PT0gZmFsc2U7XG4gICAgICBpZiAoc2hvdWxkQ2xlYXJOZWlnaGJvcnMpIHtcbiAgICAgICAgcmVmID0gdGlsZS5hZGphY2VudFRpbGVzO1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGFkamFjZW50VGlsZSA9IHJlZltpXTtcbiAgICAgICAgICBuZWlnaGJvciA9IHRoaXMuZ2V0KHtcbiAgICAgICAgICAgIHg6IHRpbGUubW9kZWwueCArIGFkamFjZW50VGlsZVswXSxcbiAgICAgICAgICAgIHk6IHRpbGUubW9kZWwueSArIGFkamFjZW50VGlsZVsxXVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNob3VsZENsZWFyTmVpZ2hib3IgPSBuZWlnaGJvciAmJiBuZWlnaGJvci5tb2RlbC5pc0NsZWFyID09PSBmYWxzZSAmJiBuZWlnaGJvci5tb2RlbC5pc01pbmUgPT09IGZhbHNlO1xuICAgICAgICAgIGlmIChzaG91bGRDbGVhck5laWdoYm9yKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gobmVpZ2hib3IuY2xpY2soKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh2b2lkIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFRpbGVzQ29sbGVjdGlvbjtcblxuICB9KSgpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gVGlsZXNDb2xsZWN0aW9uO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgUiwgVGlsZSwgVGlsZUFjdGlvbnM7XG5cbiAgVGlsZUFjdGlvbnMgPSByZXF1aXJlKCcuLi9hY3Rpb25zL1RpbGVBY3Rpb25zLmNvZmZlZScpO1xuXG4gIFIgPSBSZWFjdC5ET007XG5cbiAgVGlsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1RpbGUnLFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnRpbGUubW9kZWwuaW5kZXggPSB0aGlzLnByb3BzLmluZGV4O1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBSLmxpKHtcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmdldENsYXNzKCksXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMuY2xpY2tIYW5kbGVyXG4gICAgICB9LCBSLnNwYW4obnVsbCwgdGhpcy5nZXRUZXh0KCkpKTtcbiAgICB9LFxuICAgIGNsaWNrSGFuZGxlcjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICB2YXIgZmxhZ0tleVdhc1ByZXNzZWQ7XG4gICAgICBpZiAoISRldmVudCkge1xuICAgICAgICByZXR1cm4gVGlsZUFjdGlvbnMuY2xlYXIodGhpcy5wcm9wcy50aWxlLm1vZGVsLnVpZCk7XG4gICAgICB9XG4gICAgICBmbGFnS2V5V2FzUHJlc3NlZCA9ICRldmVudC5zaGlmdEtleSA9PT0gdHJ1ZSB8fCAkZXZlbnQuYWx0S2V5ID09PSB0cnVlO1xuICAgICAgaWYgKGZsYWdLZXlXYXNQcmVzc2VkKSB7XG4gICAgICAgIHJldHVybiBUaWxlQWN0aW9ucy50b2dnbGVGbGFnKHRoaXMucHJvcHMudGlsZS5tb2RlbC51aWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFRpbGVBY3Rpb25zLmNsZWFyKHRoaXMucHJvcHMudGlsZS5tb2RlbC51aWQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaXNGaXJzdENvbHVtbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy50aWxlLm1vZGVsLnggPT09IDA7XG4gICAgfSxcbiAgICBoYXNCZWVuRmxhZ2dlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy50aWxlLm1vZGVsLmlzQ2xlYXIgIT09IHRydWUgJiYgdGhpcy5wcm9wcy50aWxlLm1vZGVsLmlzRmxhZ2dlZCA9PT0gdHJ1ZTtcbiAgICB9LFxuICAgIGhhc0JlZW5DbGVhcmVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnRpbGUubW9kZWwuaXNDbGVhciA9PT0gdHJ1ZTtcbiAgICB9LFxuICAgIGhhc01pbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGlsZS5tb2RlbC5pc01pbmUgPT09IHRydWU7XG4gICAgfSxcbiAgICBzaG91bGREaXNwbGF5TWluZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXNNaW5lKCkgJiYgdGhpcy5oYXNCZWVuQ2xlYXJlZCgpO1xuICAgIH0sXG4gICAgaGFzWmVyb0FkamFjZW50TWluZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGlsZS5tb2RlbC5hZGphY2VudE1pbmVzID09PSAwICYmICF0aGlzLmhhc01pbmUoKTtcbiAgICB9LFxuICAgIGdldFRleHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRleHQ7XG4gICAgICB0ZXh0ID0gdGhpcy5wcm9wcy50aWxlLm1vZGVsLmFkamFjZW50TWluZXM7XG4gICAgICBpZiAodGhpcy5oYXNCZWVuRmxhZ2dlZCgpKSB7XG4gICAgICAgIHRleHQgPSAnPyc7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc2hvdWxkRGlzcGxheU1pbmUoKSkge1xuICAgICAgICB0ZXh0ID0gJ1gnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfSxcbiAgICBnZXRDbGFzczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gWyd0aWxlJywgdGhpcy5pc0ZpcnN0Q29sdW1uKCkgPyAnbnRoJyA6IHZvaWQgMCwgdGhpcy5oYXNCZWVuQ2xlYXJlZCgpID8gJ2NsZWFyJyA6IHZvaWQgMCwgdGhpcy5oYXNCZWVuRmxhZ2dlZCgpID8gJ2ZsYWdnZWQnIDogdm9pZCAwLCB0aGlzLnNob3VsZERpc3BsYXlNaW5lKCkgPyAnbWluZScgOiB2b2lkIDAsIHRoaXMuaGFzWmVyb0FkamFjZW50TWluZXMoKSA/ICdjbGVhciB6ZXJvJyA6IHZvaWQgMF0uam9pbignICcpO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBUaWxlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgRGlzcGF0Y2hlciwgUiwgVGlsZUNvbXBvbmVudCwgVGlsZVN0b3JlLCBUaWxlcztcblxuICBUaWxlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9UaWxlQ29tcG9uZW50LmNvZmZlZScpO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9EaXNwYXRjaGVyLmNvZmZlZScpO1xuXG4gIFRpbGVTdG9yZSA9IHJlcXVpcmUoJy4uL3N0b3Jlcy9UaWxlU3RvcmUuY29mZmVlJyk7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBUaWxlcyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1RpbGVzJyxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWxsOiBUaWxlU3RvcmUuZ2V0QWxsKClcbiAgICAgIH07XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRpbGVzO1xuICAgICAgdGlsZXMgPSB0aGlzLnN0YXRlLmFsbC5tYXAoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFRpbGVDb21wb25lbnQsIHtcbiAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICByZWY6IGl0ZW0ubW9kZWwudWlkLFxuICAgICAgICAgICAgdGlsZTogaXRlbVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgcmV0dXJuIFIudWwoe1xuICAgICAgICBpZDogJ2JvYXJkJ1xuICAgICAgfSwgdGlsZXMpO1xuICAgIH0sXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbGxlY3Rpb247XG4gICAgICByZXR1cm4gY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgfVxuICB9KTtcblxuICBEaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdUSUxFX0ZMQUdfVE9HR0xFJzpcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCd0aWxlIGZsYWcnKTtcbiAgICAgIGNhc2UgJ1RJTEVfQ0xFQVInOlxuICAgICAgICByZXR1cm4gY29uc29sZS5sb2coJ3RpbGUgY2xlYXInKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gVGlsZXM7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBUaWxlTW9kZWw7XG5cbiAgTnVtYmVyLmlzSW50ZWdlciA9IE51bWJlci5pc0ludGVnZXIgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmIGlzRmluaXRlKHZhbHVlKSAmJiBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWU7XG4gIH07XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBUaWxlTW9kZWwgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gVGlsZU1vZGVsKGF0dHJzKSB7XG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoYXR0cnMueCkgfHwgIU51bWJlci5pc0ludGVnZXIoYXR0cnMueSkpIHtcbiAgICAgICAgdGhyb3cgXCJgeGAgYW5kIGB5YCBhcmUgcmVxdWlyZWQgSW50ZWdlciBhdHRyaWJ1dGVzIHRvIGluc3RhbnRpYXRlIFRpbGVcIjtcbiAgICAgIH1cbiAgICAgIHRoaXMubW9kZWwgPSB7XG4gICAgICAgIHg6IHZvaWQgMCxcbiAgICAgICAgeTogdm9pZCAwLFxuICAgICAgICB1aWQ6IHZvaWQgMCxcbiAgICAgICAgaXNNaW5lOiBmYWxzZSxcbiAgICAgICAgaXNDbGVhcjogZmFsc2UsXG4gICAgICAgIGlzRmxhZ2dlZDogZmFsc2UsXG4gICAgICAgIGFkamFjZW50TWluZXM6IDBcbiAgICAgIH07XG4gICAgICB0aGlzLmFkamFjZW50VGlsZXMgPSBbWy0xLCAtMV0sIFswLCAtMV0sIFsxLCAtMV0sIFstMSwgMF0sIFsxLCAwXSwgWy0xLCAxXSwgWzAsIDFdLCBbMSwgMV1dO1xuICAgICAgdGhpcy5zZXQoYXR0cnMpO1xuICAgIH1cblxuICAgIFRpbGVNb2RlbC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHZhciBhdHRyLCBrZXk7XG4gICAgICBmb3IgKGtleSBpbiBhdHRycykge1xuICAgICAgICBhdHRyID0gYXR0cnNba2V5XTtcbiAgICAgICAgdGhpcy5tb2RlbFtrZXldID0gYXR0cjtcbiAgICAgICAgdGhpcy5tb2RlbC51aWQgPSBTdHJpbmcoYXR0cnMueCkgKyAnLScgKyBTdHJpbmcoYXR0cnMueSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgVGlsZU1vZGVsLnByb3RvdHlwZS50b2dnbGVGbGFnID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLm1vZGVsLmlzRmxhZ2dlZCA9ICF0aGlzLm1vZGVsLmlzRmxhZ2dlZDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBUaWxlTW9kZWwucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLm1vZGVsLmlzQ2xlYXIgPSB0cnVlO1xuICAgICAgdGhpcy5tb2RlbC5pc0ZsYWdnZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBUaWxlTW9kZWwucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICB2YXIgZmxhZ0tleVdhc1ByZXNzZWQ7XG4gICAgICBpZiAoISRldmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGVhcigpO1xuICAgICAgfVxuICAgICAgZmxhZ0tleVdhc1ByZXNzZWQgPSAkZXZlbnQuc2hpZnRLZXkgPT09IHRydWUgfHwgJGV2ZW50LmFsdEtleSA9PT0gdHJ1ZTtcbiAgICAgIGlmIChmbGFnS2V5V2FzUHJlc3NlZCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVGbGFnKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGVhcigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gVGlsZU1vZGVsO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBEaXNwYXRjaGVyLCBUaWxlcywgVGlsZXNDb2xsZWN0aW9uLCBUb2RvU3RvcmU7XG5cbiAgVGlsZXNDb2xsZWN0aW9uID0gcmVxdWlyZSgnLi4vY29sbGVjdGlvbnMvVGlsZXNDb2xsZWN0aW9uLmNvZmZlZScpO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9EaXNwYXRjaGVyLmNvZmZlZScpO1xuXG4gIFRpbGVzID0gbmV3IFRpbGVzQ29sbGVjdGlvbigpO1xuXG4gIFRvZG9TdG9yZSA9IHtcbiAgICBnZXRBbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coVGlsZXMuZ2V0QWxsKCkpO1xuICAgICAgcmV0dXJuIFRpbGVzLmdldEFsbCgpO1xuICAgIH1cbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFRvZG9TdG9yZTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRGlzcGF0Y2hlclxuICogQHR5cGVjaGVja3NcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbnZhciBfbGFzdElEID0gMTtcbnZhciBfcHJlZml4ID0gJ0lEXyc7XG5cbi8qKlxuICogRGlzcGF0Y2hlciBpcyB1c2VkIHRvIGJyb2FkY2FzdCBwYXlsb2FkcyB0byByZWdpc3RlcmVkIGNhbGxiYWNrcy4gVGhpcyBpc1xuICogZGlmZmVyZW50IGZyb20gZ2VuZXJpYyBwdWItc3ViIHN5c3RlbXMgaW4gdHdvIHdheXM6XG4gKlxuICogICAxKSBDYWxsYmFja3MgYXJlIG5vdCBzdWJzY3JpYmVkIHRvIHBhcnRpY3VsYXIgZXZlbnRzLiBFdmVyeSBwYXlsb2FkIGlzXG4gKiAgICAgIGRpc3BhdGNoZWQgdG8gZXZlcnkgcmVnaXN0ZXJlZCBjYWxsYmFjay5cbiAqICAgMikgQ2FsbGJhY2tzIGNhbiBiZSBkZWZlcnJlZCBpbiB3aG9sZSBvciBwYXJ0IHVudGlsIG90aGVyIGNhbGxiYWNrcyBoYXZlXG4gKiAgICAgIGJlZW4gZXhlY3V0ZWQuXG4gKlxuICogRm9yIGV4YW1wbGUsIGNvbnNpZGVyIHRoaXMgaHlwb3RoZXRpY2FsIGZsaWdodCBkZXN0aW5hdGlvbiBmb3JtLCB3aGljaFxuICogc2VsZWN0cyBhIGRlZmF1bHQgY2l0eSB3aGVuIGEgY291bnRyeSBpcyBzZWxlY3RlZDpcbiAqXG4gKiAgIHZhciBmbGlnaHREaXNwYXRjaGVyID0gbmV3IERpc3BhdGNoZXIoKTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNvdW50cnkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENvdW50cnlTdG9yZSA9IHtjb3VudHJ5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNpdHkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENpdHlTdG9yZSA9IHtjaXR5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBiYXNlIGZsaWdodCBwcmljZSBvZiB0aGUgc2VsZWN0ZWQgY2l0eVxuICogICB2YXIgRmxpZ2h0UHJpY2VTdG9yZSA9IHtwcmljZTogbnVsbH1cbiAqXG4gKiBXaGVuIGEgdXNlciBjaGFuZ2VzIHRoZSBzZWxlY3RlZCBjaXR5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjaXR5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDaXR5OiAncGFyaXMnXG4gKiAgIH0pO1xuICpcbiAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBgQ2l0eVN0b3JlYDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjaXR5LXVwZGF0ZScpIHtcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gcGF5bG9hZC5zZWxlY3RlZENpdHk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBjb3VudHJ5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjb3VudHJ5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDb3VudHJ5OiAnYXVzdHJhbGlhJ1xuICogICB9KTtcbiAqXG4gKiBUaGlzIHBheWxvYWQgaXMgZGlnZXN0ZWQgYnkgYm90aCBzdG9yZXM6XG4gKlxuICogICAgQ291bnRyeVN0b3JlLmRpc3BhdGNoVG9rZW4gPSBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAqICAgICBpZiAocGF5bG9hZC5hY3Rpb25UeXBlID09PSAnY291bnRyeS11cGRhdGUnKSB7XG4gKiAgICAgICBDb3VudHJ5U3RvcmUuY291bnRyeSA9IHBheWxvYWQuc2VsZWN0ZWRDb3VudHJ5O1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogV2hlbiB0aGUgY2FsbGJhY2sgdG8gdXBkYXRlIGBDb3VudHJ5U3RvcmVgIGlzIHJlZ2lzdGVyZWQsIHdlIHNhdmUgYSByZWZlcmVuY2VcbiAqIHRvIHRoZSByZXR1cm5lZCB0b2tlbi4gVXNpbmcgdGhpcyB0b2tlbiB3aXRoIGB3YWl0Rm9yKClgLCB3ZSBjYW4gZ3VhcmFudGVlXG4gKiB0aGF0IGBDb3VudHJ5U3RvcmVgIGlzIHVwZGF0ZWQgYmVmb3JlIHRoZSBjYWxsYmFjayB0aGF0IHVwZGF0ZXMgYENpdHlTdG9yZWBcbiAqIG5lZWRzIHRvIHF1ZXJ5IGl0cyBkYXRhLlxuICpcbiAqICAgQ2l0eVN0b3JlLmRpc3BhdGNoVG9rZW4gPSBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAqICAgICBpZiAocGF5bG9hZC5hY3Rpb25UeXBlID09PSAnY291bnRyeS11cGRhdGUnKSB7XG4gKiAgICAgICAvLyBgQ291bnRyeVN0b3JlLmNvdW50cnlgIG1heSBub3QgYmUgdXBkYXRlZC5cbiAqICAgICAgIGZsaWdodERpc3BhdGNoZXIud2FpdEZvcihbQ291bnRyeVN0b3JlLmRpc3BhdGNoVG9rZW5dKTtcbiAqICAgICAgIC8vIGBDb3VudHJ5U3RvcmUuY291bnRyeWAgaXMgbm93IGd1YXJhbnRlZWQgdG8gYmUgdXBkYXRlZC5cbiAqXG4gKiAgICAgICAvLyBTZWxlY3QgdGhlIGRlZmF1bHQgY2l0eSBmb3IgdGhlIG5ldyBjb3VudHJ5XG4gKiAgICAgICBDaXR5U3RvcmUuY2l0eSA9IGdldERlZmF1bHRDaXR5Rm9yQ291bnRyeShDb3VudHJ5U3RvcmUuY291bnRyeSk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBUaGUgdXNhZ2Ugb2YgYHdhaXRGb3IoKWAgY2FuIGJlIGNoYWluZWQsIGZvciBleGFtcGxlOlxuICpcbiAqICAgRmxpZ2h0UHJpY2VTdG9yZS5kaXNwYXRjaFRva2VuID1cbiAqICAgICBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAqICAgICAgIHN3aXRjaCAocGF5bG9hZC5hY3Rpb25UeXBlKSB7XG4gKiAgICAgICAgIGNhc2UgJ2NvdW50cnktdXBkYXRlJzpcbiAqICAgICAgICAgICBmbGlnaHREaXNwYXRjaGVyLndhaXRGb3IoW0NpdHlTdG9yZS5kaXNwYXRjaFRva2VuXSk7XG4gKiAgICAgICAgICAgRmxpZ2h0UHJpY2VTdG9yZS5wcmljZSA9XG4gKiAgICAgICAgICAgICBnZXRGbGlnaHRQcmljZVN0b3JlKENvdW50cnlTdG9yZS5jb3VudHJ5LCBDaXR5U3RvcmUuY2l0eSk7XG4gKiAgICAgICAgICAgYnJlYWs7XG4gKlxuICogICAgICAgICBjYXNlICdjaXR5LXVwZGF0ZSc6XG4gKiAgICAgICAgICAgRmxpZ2h0UHJpY2VTdG9yZS5wcmljZSA9XG4gKiAgICAgICAgICAgICBGbGlnaHRQcmljZVN0b3JlKENvdW50cnlTdG9yZS5jb3VudHJ5LCBDaXR5U3RvcmUuY2l0eSk7XG4gKiAgICAgICAgICAgYnJlYWs7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBUaGUgYGNvdW50cnktdXBkYXRlYCBwYXlsb2FkIHdpbGwgYmUgZ3VhcmFudGVlZCB0byBpbnZva2UgdGhlIHN0b3JlcydcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIGluIG9yZGVyOiBgQ291bnRyeVN0b3JlYCwgYENpdHlTdG9yZWAsIHRoZW5cbiAqIGBGbGlnaHRQcmljZVN0b3JlYC5cbiAqL1xuXG4gIGZ1bmN0aW9uIERpc3BhdGNoZXIoKSB7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3MgPSB7fTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZyA9IHt9O1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkID0ge307XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aXRoIGV2ZXJ5IGRpc3BhdGNoZWQgcGF5bG9hZC4gUmV0dXJuc1xuICAgKiBhIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBgd2FpdEZvcigpYC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgaWQgPSBfcHJlZml4ICsgX2xhc3RJRCsrO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSA9IGNhbGxiYWNrO1xuICAgIHJldHVybiBpZDtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNhbGxiYWNrIGJhc2VkIG9uIGl0cyB0b2tlbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGlkKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdLFxuICAgICAgJ0Rpc3BhdGNoZXIudW5yZWdpc3RlciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJyxcbiAgICAgIGlkXG4gICAgKTtcbiAgICBkZWxldGUgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXYWl0cyBmb3IgdGhlIGNhbGxiYWNrcyBzcGVjaWZpZWQgdG8gYmUgaW52b2tlZCBiZWZvcmUgY29udGludWluZyBleGVjdXRpb25cbiAgICogb2YgdGhlIGN1cnJlbnQgY2FsbGJhY2suIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgYSBjYWxsYmFjayBpblxuICAgKiByZXNwb25zZSB0byBhIGRpc3BhdGNoZWQgcGF5bG9hZC5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxzdHJpbmc+fSBpZHNcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLndhaXRGb3I9ZnVuY3Rpb24oaWRzKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nLFxuICAgICAgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBNdXN0IGJlIGludm9rZWQgd2hpbGUgZGlzcGF0Y2hpbmcuJ1xuICAgICk7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGlkcy5sZW5ndGg7IGlpKyspIHtcbiAgICAgIHZhciBpZCA9IGlkc1tpaV07XG4gICAgICBpZiAodGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmdbaWRdKSB7XG4gICAgICAgIGludmFyaWFudChcbiAgICAgICAgICB0aGlzLiREaXNwYXRjaGVyX2lzSGFuZGxlZFtpZF0sXG4gICAgICAgICAgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBDaXJjdWxhciBkZXBlbmRlbmN5IGRldGVjdGVkIHdoaWxlICcgK1xuICAgICAgICAgICd3YWl0aW5nIGZvciBgJXNgLicsXG4gICAgICAgICAgaWRcbiAgICAgICAgKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSxcbiAgICAgICAgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJyxcbiAgICAgICAgaWRcbiAgICAgICk7XG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBwYXlsb2FkIHRvIGFsbCByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWRcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLmRpc3BhdGNoPWZ1bmN0aW9uKHBheWxvYWQpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICAhdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nLFxuICAgICAgJ0Rpc3BhdGNoLmRpc3BhdGNoKC4uLik6IENhbm5vdCBkaXNwYXRjaCBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guJ1xuICAgICk7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9zdGFydERpc3BhdGNoaW5nKHBheWxvYWQpO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcykge1xuICAgICAgICBpZiAodGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmdbaWRdKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pbnZva2VDYWxsYmFjayhpZCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfc3RvcERpc3BhdGNoaW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJcyB0aGlzIERpc3BhdGNoZXIgY3VycmVudGx5IGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuaXNEaXNwYXRjaGluZz1mdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsIHRoZSBjYWxsYmFjayBzdG9yZWQgd2l0aCB0aGUgZ2l2ZW4gaWQuIEFsc28gZG8gc29tZSBpbnRlcm5hbFxuICAgKiBib29ra2VlcGluZy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuJERpc3BhdGNoZXJfaW52b2tlQ2FsbGJhY2s9ZnVuY3Rpb24oaWQpIHtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0gPSB0cnVlO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSh0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkKTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzSGFuZGxlZFtpZF0gPSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdXAgYm9va2tlZXBpbmcgbmVlZGVkIHdoZW4gZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXlsb2FkXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuJERpc3BhdGNoZXJfc3RhcnREaXNwYXRjaGluZz1mdW5jdGlvbihwYXlsb2FkKSB7XG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3MpIHtcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfaXNQZW5kaW5nW2lkXSA9IGZhbHNlO1xuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0hhbmRsZWRbaWRdID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQgPSBwYXlsb2FkO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyA9IHRydWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsZWFyIGJvb2trZWVwaW5nIHVzZWQgZm9yIGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLiREaXNwYXRjaGVyX3N0b3BEaXNwYXRjaGluZz1mdW5jdGlvbigpIHtcbiAgICB0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkID0gbnVsbDtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgfTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IERpc3BhdGNoZXI7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnZhcmlhbnRcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxudmFyIGludmFyaWFudCA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIGlmIChmYWxzZSkge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICtcbiAgICAgICAgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdJbnZhcmlhbnQgVmlvbGF0aW9uOiAnICtcbiAgICAgICAgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJnc1thcmdJbmRleCsrXTsgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==