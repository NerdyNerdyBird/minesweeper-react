!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){var GameComponent,ViewController;GameComponent=require("./components/GameComponent.coffee"),ViewController=React.createElement(GameComponent,null),React.render(ViewController,document.getElementById("minesweeper"))}).call(this)},{"./components/GameComponent.coffee":10}],2:[function(require,module,exports){module.exports.Dispatcher=require("./lib/Dispatcher")},{"./lib/Dispatcher":24}],3:[function(require,module,exports){(function(){var AppDispatcher,Dispatcher,ModalActions,ModalStore,TileStore,changeModal,onTilesChange;Dispatcher=require("Flux").Dispatcher,AppDispatcher=new Dispatcher,TileStore=require("./stores/TileStore.coffee"),ModalStore=require("./stores/ModalStore.coffee"),ModalActions=require("./actions/ModalActions.coffee"),changeModal=function(name){return name?ModalStore.toggle(name):ModalStore.reset(),ModalStore.emitChange()},onTilesChange=function(){var info;return info=TileStore.getInfo(),TileStore.emitChange()},AppDispatcher.register(function(event){var tile;switch(event.type){case"TILE_FLAG_TOGGLE":return tile=TileStore.get({uid:event.uid}),tile.toggleFlag(),onTilesChange();case"TILE_CLEAR":return tile=TileStore.get({uid:event.uid}),tile.clear(),onTilesChange();case"TILES_CLEAR_SAFE_RANDOM":if(tile=TileStore.randomSafeTile())return tile.clear(),onTilesChange();break;case"TILES_NEW_GAME":return TileStore.newGame(10,10,25),onTilesChange(),changeModal("newGame");case"MODAL_TOGGLE":return ModalStore.toggle(event.name),ModalStore.emitChange();case"MODAL_RESET":return changeModal()}}),module.exports=AppDispatcher}).call(this)},{"./actions/ModalActions.coffee":4,"./stores/ModalStore.coffee":18,"./stores/TileStore.coffee":19,Flux:20}],4:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("../Dispatcher.coffee"),module.exports={toggle:function(name){return Dispatcher.dispatch({type:"MODAL_TOGGLE",name:name})},reset:function(){return Dispatcher.dispatch({type:"MODAL_RESET"})}}}).call(this)},{"../Dispatcher.coffee":3}],5:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("../Dispatcher.coffee"),module.exports={toggleFlag:function(uid){return Dispatcher.dispatch({type:"TILE_FLAG_TOGGLE",uid:uid})},clear:function(uid){return Dispatcher.dispatch({type:"TILE_CLEAR",uid:uid})}}}).call(this)},{"../Dispatcher.coffee":3}],6:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("../Dispatcher.coffee"),module.exports={clearSafeRandomTile:function(){return Dispatcher.dispatch({type:"TILES_CLEAR_SAFE_RANDOM"})},newGame:function(){return Dispatcher.dispatch({type:"TILES_NEW_GAME"})}}}).call(this)},{"../Dispatcher.coffee":3}],7:[function(require,module,exports){(function(){var ModalsCollection;ModalsCollection=function(){function ModalsCollection(){this.show={}}return ModalsCollection.prototype.set=function(fileName){return this.show[fileName]=!1,this},ModalsCollection.prototype.toggle=function(name){var isBeingShown,modalName,ref,results;ref=this.show,results=[];for(modalName in ref)isBeingShown=ref[modalName],results.push(modalName===name?this.show[modalName]=!isBeingShown:isBeingShown=!1);return results},ModalsCollection.prototype.reset=function(){var key,ref,showModal;ref=this.show;for(key in ref)showModal=ref[key],this.show[key]=!1;return this},ModalsCollection}(),module.exports=ModalsCollection}).call(this)},{}],8:[function(require,module,exports){(function(){var TileModel,TilesCollection,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;TileModel=require("../models/TileModel.coffee"),TilesCollection=function(){function TilesCollection(){var Model,collection;this.all=[],collection=this,this.model=Model=function(superClass){function Model(){return Model.__super__.constructor.apply(this,arguments)}return extend(Model,superClass),Model.prototype.clear=function(){return Model.__super__.clear.call(this),collection.clearNeighbors(this),collection.moveUpdate()},Model.prototype.toggleFlag=function(){return Model.__super__.toggleFlag.call(this),collection.moveUpdate()},Model}(TileModel)}return TilesCollection.prototype.newGame=function(x,y,mines){var attrs,i,j,k,mineNum,ref,ref1,ref2,tile;for(this.reset(),this.sizeX=x,this.sizeY=y,this.numOfMines=mines,y=i=0,ref=this.sizeY-1;ref>=0?ref>=i:i>=ref;y=ref>=0?++i:--i)for(x=j=0,ref1=this.sizeX-1;ref1>=0?ref1>=j:j>=ref1;x=ref1>=0?++j:--j)attrs={x:x,y:y},this.add(attrs);for(mineNum=k=1,ref2=this.numOfMines;ref2>=1?ref2>=k:k>=ref2;mineNum=ref2>=1?++k:--k)tile=this.randomSafeTile(),tile.model.isMine=!0;return this.tallyMines(),this.gameUpdate()},TilesCollection.prototype.noMineFirstClick=function(tile){return 0===this.numOfClears&&tile.model.isMine===!0&&(tile.model.isMine=!1,this.randomSafeTile().model.isMine=!0,this.tallyMines()),tile},TilesCollection.prototype.add=function(model){var tile;return tile=new this.model(model),this.all.push(tile),tile},TilesCollection.prototype.reset=function(){return this.all=[],this},TilesCollection.prototype.randomSafeTile=function(){var findAttrs,randomIndex,safeTiles;return findAttrs={isClear:!1,isMine:!1},safeTiles=this.getAll(findAttrs),randomIndex=Math.floor(Math.random()*safeTiles.length),safeTiles[randomIndex]},TilesCollection.prototype.tallyMines=function(){var adjacentTile,i,j,len,len1,neighborAttrs,neighborMine,neighborMines,neighborX,neighborY,ref,ref1,results,tile;for(ref=this.all,results=[],i=0,len=ref.length;len>i;i++){for(tile=ref[i],neighborMines=0,ref1=tile.getAdjacentTiles(),j=0,len1=ref1.length;len1>j;j++)adjacentTile=ref1[j],neighborX=tile.model.x+adjacentTile[0],neighborY=tile.model.y+adjacentTile[1],neighborAttrs={isMine:!0,x:neighborX,y:neighborY},neighborMine=this.get(neighborAttrs),void 0!==neighborMine&&neighborMines++;results.push(tile.model.adjacentMines=neighborMines)}return results},TilesCollection.prototype.gameUpdate=function(){var i,len,ref,tile;for(this.x=Math.max.apply(this,this.all.map(function(tile){return tile.model.x})),this.y=Math.max.apply(this,this.all.map(function(tile){return tile.model.y})),this.x=this.x--,this.y=this.y--,this.numOfMines=0,ref=this.all,i=0,len=ref.length;len>i;i++)tile=ref[i],tile.model.isMine===!0&&this.numOfMines++;return this.moveUpdate()},TilesCollection.prototype.moveUpdate=function(){var i,len,ref,tile;for(this.loss=!1,this.win=!1,this.numOfClears=0,this.numOfFlags=0,ref=this.all,i=0,len=ref.length;len>i;i++)tile=ref[i],tile.model.isClear===!0&&this.numOfClears++,tile.model.isFlagged===!0&&this.numOfFlags++,tile.model.isMine===!0&&tile.model.isClear===!0&&(this.loss=!0);return this.loss===!1&&this.all.length-this.numOfMines-this.numOfClears===0?this.win=!0:void 0},TilesCollection.prototype.clearNeighbors=function(tile){var adjacentTile,i,len,neighbor,ref,results,shouldClearNeighbor,shouldClearNeighbors;if(shouldClearNeighbors=0===tile.model.adjacentMines&&tile.model.isMine===!1){for(ref=tile.getAdjacentTiles(),results=[],i=0,len=ref.length;len>i;i++)adjacentTile=ref[i],neighbor=this.get({x:tile.model.x+adjacentTile[0],y:tile.model.y+adjacentTile[1]}),shouldClearNeighbor=neighbor&&neighbor.model.isClear===!1&&neighbor.model.isMine===!1,results.push(shouldClearNeighbor?neighbor.clear():void 0);return results}},TilesCollection.prototype.get=function(attrs){return this.getAll(attrs)[0]},TilesCollection.prototype.getAll=function(attrs){var i,key,len,matches,numOfAttrs,numOfMatchedAttrs,ref,tile,val;if(matches=[],!attrs)return this.all;for(ref=this.all,i=0,len=ref.length;len>i;i++){tile=ref[i],numOfAttrs=0,numOfMatchedAttrs=0;for(key in attrs)val=attrs[key],numOfAttrs++,tile.model[key]===val&&numOfMatchedAttrs++;numOfMatchedAttrs===numOfAttrs&&matches.push(tile)}return matches},TilesCollection}(),module.exports=TilesCollection}).call(this)},{"../models/TileModel.coffee":17}],9:[function(require,module,exports){(function(){var Dashboard,ModalActions,R,TilesActions;ModalActions=require("../actions/ModalActions.coffee"),TilesActions=require("../actions/TilesActions.coffee"),R=React.DOM,Dashboard=React.createClass({displayName:"Dashboard",render:function(){return R.div({id:"dashboard"},[R.div({key:"new-game",className:"new-game button",onClick:function(){return ModalActions.toggle("newGame")}},"new game"),R.div({key:"select-tile",className:"select-tile button",onClick:TilesActions.clearSafeRandomTile},"clear a safe tile"),R.div({key:"instructions",className:"instructions button",onClick:function(){return ModalActions.toggle("instructions")}},"instructions")])}}),module.exports=Dashboard}).call(this)},{"../actions/ModalActions.coffee":4,"../actions/TilesActions.coffee":6}],10:[function(require,module,exports){(function(){var DashboardComponent,Game,InfoComponent,ModalActions,ModalOverlayComponent,ModalStore,R,TileStore,TilesComponent,assign,getModalStoreState,getState,getTileStoreState,queue;TileStore=require("../stores/TileStore.coffee"),ModalStore=require("../stores/ModalStore.coffee"),ModalActions=require("../actions/ModalActions.coffee"),TilesComponent=require("./TilesComponent.coffee"),InfoComponent=require("./InfoComponent.coffee"),DashboardComponent=require("./DashboardComponent.coffee"),ModalOverlayComponent=require("./modals/ModalOverlayComponent.coffee"),assign=require("object-assign"),R=React.DOM,queue=function(fn){return setTimeout(fn,0)},getState=function(){return assign({},getTileStoreState(),getModalStoreState())},getTileStoreState=function(){return{all:TileStore.getAll(),info:TileStore.getInfo()}},getModalStoreState=function(){return{modals:ModalStore.getAll()}},Game=React.createClass({displayName:"Game",getInitialState:function(){return getState()},componentDidMount:function(){return TileStore.addChangeListener(this._onTileStoreChange),ModalStore.addChangeListener(this._onModalStoreChange)},componentWillUnmount:function(){return TileStore.removeChangeListener(this._onTileStoreChange),ModalStore.removeChangeListener(this._onModalStoreChange)},_onTileStoreChange:function(){var tilesState;return tilesState=getTileStoreState(),(tilesState.info.win||tilesState.info.loss)&&queue(function(){return ModalActions.toggle("newGame")}),this.setState(tilesState)},_onModalStoreChange:function(){return this.setState(getModalStoreState())},render:function(){var boardWrappper,dashboard,info,overlays,tiles;return info=React.createElement(InfoComponent,{key:"info",info:this.state.info}),tiles=React.createElement(TilesComponent,{key:"tiles",tiles:this.state.all}),boardWrappper=R.div({id:"board-wrappper",key:"board-wrappper"},[info,tiles]),dashboard=React.createElement(DashboardComponent,{key:"dashboard"}),overlays=React.createElement(ModalOverlayComponent,{key:"modal-overlay",info:this.state.info,modals:this.state.modals}),R.div(null,[overlays,boardWrappper,dashboard])}}),module.exports=Game}).call(this)},{"../actions/ModalActions.coffee":4,"../stores/ModalStore.coffee":18,"../stores/TileStore.coffee":19,"./DashboardComponent.coffee":9,"./InfoComponent.coffee":11,"./TilesComponent.coffee":13,"./modals/ModalOverlayComponent.coffee":16,"object-assign":26}],11:[function(require,module,exports){(function(){var Info,R;R=React.DOM,Info=React.createClass({displayName:"Info",render:function(){return R.ul({id:"stats"},[R.li({key:"tiles"},this.props.info.numOfTiles+" tiles"),R.li({key:"mines"},this.props.info.numOfMines+" mines"),R.li({key:"flagged"},this.props.info.numOfFlags+" flagged tiles"),R.li({key:"cleared"},this.props.info.numOfUncleared+" left to clear")])}}),module.exports=Info}).call(this)},{}],12:[function(require,module,exports){(function(){var R,Tile,TileActions;TileActions=require("../actions/TileActions.coffee"),R=React.DOM,Tile=React.createClass({displayName:"Tile",render:function(){return R.li({className:this.getClass(),onClick:this.clickHandler},R.span(null,this.getText()))},clickHandler:function($event){var flagKeyWasPressed;return $event?(flagKeyWasPressed=$event.shiftKey===!0||$event.altKey===!0,flagKeyWasPressed?TileActions.toggleFlag(this.props.tile.model.uid):TileActions.clear(this.props.tile.model.uid)):TileActions.clear(this.props.tile.model.uid)},isFirstColumn:function(){return 0===this.props.tile.model.x},hasBeenFlagged:function(){return this.props.tile.model.isClear!==!0&&this.props.tile.model.isFlagged===!0},hasBeenCleared:function(){return this.props.tile.model.isClear===!0},hasMine:function(){return this.props.tile.model.isMine===!0},shouldDisplayMine:function(){return this.hasBeenCleared()&&this.hasMine()},hasZeroAdjacentMines:function(){return 0===this.props.tile.model.adjacentMines&&this.hasBeenCleared()},getText:function(){var text;return text="",this.hasBeenCleared()?text=this.props.tile.model.adjacentMines:this.hasBeenFlagged()?text="?":this.shouldDisplayMine()&&(text="X"),text},getClass:function(){return["tile",this.isFirstColumn()?"nth":void 0,this.hasBeenCleared()?"clear":void 0,this.hasBeenFlagged()?"flagged":void 0,this.shouldDisplayMine()?"mine":void 0,this.hasZeroAdjacentMines()?"zero":void 0].join(" ")}}),module.exports=Tile}).call(this)},{"../actions/TileActions.coffee":5}],13:[function(require,module,exports){(function(){var R,TileComponent,Tiles;TileComponent=require("./TileComponent.coffee"),R=React.DOM,Tiles=React.createClass({displayName:"Tiles",render:function(){var tiles;return tiles=this.props.tiles.map(function(_this){return function(item,index){return React.createElement(TileComponent,{key:index,ref:item.model.uid,tile:item})}}(this)),R.ul({id:"board"},tiles)}}),module.exports=Tiles}).call(this)},{"./TileComponent.coffee":12}],14:[function(require,module,exports){(function(){var ModalActions,ModalOverlay,R;ModalActions=require("../../actions/ModalActions.coffee"),R=React.DOM,ModalOverlay=React.createClass({displayName:"ModalInstructions",getClass:function(){var classes;return classes=["message"],this.props.show||classes.push("hide"),classes.join(" ")},clickHandler:function(){return ModalActions.toggle("instructions")},render:function(){var button,controls,description;return description=R.div({key:"instructions-description"},[R.div({key:"instructions-header",className:"border-bottom"},"how to play"),R.div({key:"instructions-details",className:"border-bottom"},["the game is played by revealing tiles of the grid.","if a selected tile contains a mine, the player loses the game.","otherwise, a digit is revealed in the tile, indicating the number","of mines located in the eight adjacent tiles."].join(" ")),R.div({key:"instructions-click"},R.span({key:"instructions-click-code",className:"code"},"click"),R.span({key:"instructions-click-text"}," to reveal the squares of the grid.")),R.div({key:"instructions-click-hint",className:"border-bottom"},"(your first click will never land on a mine)")]),controls=R.div({key:"instructions-controls"},[R.span({key:"instructions-controls-code1",className:"code"},"shift + click"),R.span({key:"instructions-controls-text1"}," or "),R.span({key:"instructions-controls-code2",className:"code"},"alt + click"),R.span({key:"instructions-controls-text2"},' will "flag" a tile, helping you to remember where you think a mine is hidden')]),button=R.div({key:"instructions-button"},R.div({className:"button",onClick:this.clickHandler},"got it!")),R.div({key:"instructions-modal",className:this.getClass()},[description,controls,button])}}),module.exports=ModalOverlay}).call(this)},{"../../actions/ModalActions.coffee":4}],15:[function(require,module,exports){(function(){var ModalActions,ModalOverlay,R,TilesActions;ModalActions=require("../../actions/ModalActions.coffee"),TilesActions=require("../../actions/TilesActions.coffee"),R=React.DOM,ModalOverlay=React.createClass({displayName:"ModalNewGame",getClass:function(){var classes;return classes=["message"],this.props.show||classes.push("hide"),classes.join(" ")},getTitleText:function(){return!this.props.show||this.props.win||this.props.loss?this.props.win&&!this.props.loss?"you won!":this.props.win||this.props.win?void 0:"you lost...":"new game?"},clickHandlerNewGame:function(){return TilesActions.newGame()},clickHandlerExitModal:function(){return ModalActions.reset()},renderButtons:function(){var buttons;return buttons=[R.div({key:"new-game-start",className:"button",onClick:this.clickHandlerNewGame},"start!")],this.props.loss||buttons.push(R.div({key:"new-game-resume",className:"button",onClick:this.clickHandlerExitModal},"resume...")),R.div({key:"new-game-buttons"},buttons)},render:function(){var title;return title=R.div({key:"new-game-title-wrapper",className:"border-bottom"},R.div({key:"new-game-title",className:"title"},this.getTitleText())),R.div({key:"new-game-modal",className:this.getClass()},[title,this.renderButtons()])}}),module.exports=ModalOverlay}).call(this)},{"../../actions/ModalActions.coffee":4,"../../actions/TilesActions.coffee":6}],16:[function(require,module,exports){(function(){var InstructionsComponent,ModalActions,ModalOverlay,NewGameComponent,R;ModalActions=require("../../actions/ModalActions.coffee"),InstructionsComponent=require("./ModalInstructionsComponent.coffee"),NewGameComponent=require("./ModalNewGameComponent.coffee"),R=React.DOM,ModalOverlay=React.createClass({displayName:"ModalOverlay",getClass:function(){return this.props.modals.newGame?"":this.props.modals.instructions?"":"hide"},resetHandler:function(){return this.props.info.loss||this.props.info.win?void 0:ModalActions.reset()},instructionsHandler:function(){return ModalActions.toggle("instructions")},render:function(){var overlay;return overlay=R.div({id:"overlay",key:"overlay",className:this.getClass(),onClick:this.resetHandler},null),R.div(null,[overlay,React.createElement(InstructionsComponent,{key:"modal-instructions",show:this.props.modals.instructions}),React.createElement(NewGameComponent,{key:"modal-new-game",show:this.props.modals.newGame,win:this.props.info.win,loss:this.props.info.loss})])}}),module.exports=ModalOverlay}).call(this)},{"../../actions/ModalActions.coffee":4,"./ModalInstructionsComponent.coffee":14,"./ModalNewGameComponent.coffee":15}],17:[function(require,module,exports){(function(){var TileModel;Number.isInteger=Number.isInteger||function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value},module.exports=TileModel=function(){function TileModel(attrs){if(!Number.isInteger(attrs.x)||!Number.isInteger(attrs.y))throw"`x` and `y` are required Integer attributes to instantiate Tile";this.model={x:void 0,y:void 0,uid:void 0,isMine:!1,isClear:!1,isFlagged:!1,adjacentMines:0},this.set(attrs)}var adjacentTiles;return adjacentTiles=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],TileModel.prototype.set=function(attrs){var attr,key;for(key in attrs)attr=attrs[key],this.model[key]=attr,this.model.uid=String(attrs.x)+"-"+String(attrs.y);return this},TileModel.prototype.getAdjacentTiles=function(){return adjacentTiles},TileModel.prototype.toggleFlag=function(){return this.model.isFlagged=!this.model.isFlagged,this},TileModel.prototype.clear=function(){return this.model.isClear=!0,this.model.isFlagged=!1,this},TileModel}()}).call(this)},{}],18:[function(require,module,exports){(function(){var EventEmitter,ModalStore,Modals,ModalsCollection,assign;ModalsCollection=require("../collections/ModalsCollection.coffee"),EventEmitter=require("events").EventEmitter,assign=require("object-assign"),Modals=new ModalsCollection,Modals.set("newGame"),Modals.set("instructions"),ModalStore=assign({},EventEmitter.prototype,{event:"event",getAll:function(){return Modals.show},reset:function(){return Modals.reset()},toggle:function(modalName){return Modals.toggle(modalName)},emitChange:function(){return this.emit(this.event)},addChangeListener:function(callback){return this.on(this.event,callback)},removeChangeListener:function(callback){return this.removeListener(this.event,callback)}}),module.exports=ModalStore}).call(this)},{"../collections/ModalsCollection.coffee":7,events:23,"object-assign":26}],19:[function(require,module,exports){(function(){var EventEmitter,TileStore,Tiles,TilesCollection,assign;TilesCollection=require("../collections/TilesCollection.coffee"),EventEmitter=require("events").EventEmitter,assign=require("object-assign"),Tiles=new TilesCollection,Tiles.newGame(10,10,25),window.foo=Tiles,TileStore=assign({},EventEmitter.prototype,{event:"change",get:function(attrs){return Tiles.get(attrs)},getAll:function(){return Tiles.getAll()},getInfo:function(){return{win:Tiles.win,loss:Tiles.loss,numOfTiles:Tiles.all.length,numOfMines:Tiles.numOfMines,numOfFlags:Tiles.numOfFlags,numOfUncleared:Tiles.all.length-Tiles.numOfMines-Tiles.numOfClears}},randomSafeTile:function(){return Tiles.randomSafeTile()},newGame:function(x,y,mines){return Tiles.newGame(x,y,mines)},emitChange:function(){return this.emit(this.event)},addChangeListener:function(callback){return this.on(this.event,callback)},removeChangeListener:function(callback){return this.removeListener(this.event,callback)}}),module.exports=TileStore}).call(this)},{"../collections/TilesCollection.coffee":8,events:23,"object-assign":26}],20:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"./lib/Dispatcher":21,dup:2}],21:[function(require,module,exports){"use strict";function Dispatcher(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var invariant=require("./invariant"),_lastID=1,_prefix="ID_";Dispatcher.prototype.register=function(callback){var id=_prefix+_lastID++;return this.$Dispatcher_callbacks[id]=callback,id},Dispatcher.prototype.unregister=function(id){invariant(this.$Dispatcher_callbacks[id],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",id),delete this.$Dispatcher_callbacks[id]},Dispatcher.prototype.waitFor=function(ids){invariant(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var ii=0;ii<ids.length;ii++){var id=ids[ii];this.$Dispatcher_isPending[id]?invariant(this.$Dispatcher_isHandled[id],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",id):(invariant(this.$Dispatcher_callbacks[id],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",id),this.$Dispatcher_invokeCallback(id))}},Dispatcher.prototype.dispatch=function(payload){invariant(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(payload);try{for(var id in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[id]||this.$Dispatcher_invokeCallback(id)}finally{this.$Dispatcher_stopDispatching()}},Dispatcher.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},Dispatcher.prototype.$Dispatcher_invokeCallback=function(id){this.$Dispatcher_isPending[id]=!0,this.$Dispatcher_callbacks[id](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[id]=!0},Dispatcher.prototype.$Dispatcher_startDispatching=function(payload){for(var id in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[id]=!1,this.$Dispatcher_isHandled[id]=!1;this.$Dispatcher_pendingPayload=payload,this.$Dispatcher_isDispatching=!0},Dispatcher.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},module.exports=Dispatcher},{"./invariant":22}],22:[function(require,module,exports){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}throw error.framesToPop=1,error}};module.exports=invariant},{}],23:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}],24:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{"./invariant":25,dup:21}],25:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{dup:22}],26:[function(require,module,exports){"use strict";function ToObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=Object.assign||function(target,source){for(var from,keys,to=ToObject(target),s=1;s<arguments.length;s++){from=arguments[s],keys=Object.keys(Object(from));for(var i=0;i<keys.length;i++)to[keys[i]]=from[keys[i]]}return to}},{}]},{},[1,2]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJSZXNvdXJjZXMvY29mZmVlL0FwcC5jb2ZmZWUiLCJidWlsZC5qcyIsIm5vZGVfbW9kdWxlcy9mbHV4L2luZGV4LmpzIiwiUmVzb3VyY2VzL2NvZmZlZS9EaXNwYXRjaGVyLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvYWN0aW9ucy9Nb2RhbEFjdGlvbnMuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9hY3Rpb25zL1RpbGVBY3Rpb25zLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvYWN0aW9ucy9UaWxlc0FjdGlvbnMuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb2xsZWN0aW9ucy9Nb2RhbHNDb2xsZWN0aW9uLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvY29sbGVjdGlvbnMvVGlsZXNDb2xsZWN0aW9uLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvY29tcG9uZW50cy9EYXNoYm9hcmRDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL0dhbWVDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL0luZm9Db21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL1RpbGVDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL1RpbGVzQ29tcG9uZW50LmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvY29tcG9uZW50cy9tb2RhbHMvTW9kYWxJbnN0cnVjdGlvbnNDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL21vZGFscy9Nb2RhbE5ld0dhbWVDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL21vZGFscy9Nb2RhbE92ZXJsYXlDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9tb2RlbHMvVGlsZU1vZGVsLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvc3RvcmVzL01vZGFsU3RvcmUuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9zdG9yZXMvVGlsZVN0b3JlLmNvZmZlZSIsIm5vZGVfbW9kdWxlcy9GbHV4L2xpYi9EaXNwYXRjaGVyLmpzIiwibm9kZV9tb2R1bGVzL0ZsdXgvbGliL2ludmFyaWFudC5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIiwibm9kZV9tb2R1bGVzL29iamVjdC1hc3NpZ24vaW5kZXguanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLDEsIm1vZHVsZSIsIkdhbWVDb21wb25lbnQiLCJWaWV3Q29udHJvbGxlciIsIlJlYWN0IiwiY3JlYXRlRWxlbWVudCIsInJlbmRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aGlzIiwiLi9jb21wb25lbnRzL0dhbWVDb21wb25lbnQuY29mZmVlIiwyLCJEaXNwYXRjaGVyIiwiLi9saWIvRGlzcGF0Y2hlciIsMywiQXBwRGlzcGF0Y2hlciIsIk1vZGFsQWN0aW9ucyIsIk1vZGFsU3RvcmUiLCJUaWxlU3RvcmUiLCJjaGFuZ2VNb2RhbCIsIm9uVGlsZXNDaGFuZ2UiLCJuYW1lIiwidG9nZ2xlIiwicmVzZXQiLCJlbWl0Q2hhbmdlIiwiaW5mbyIsImdldEluZm8iLCJyZWdpc3RlciIsImV2ZW50IiwidGlsZSIsInR5cGUiLCJnZXQiLCJ1aWQiLCJ0b2dnbGVGbGFnIiwiY2xlYXIiLCJyYW5kb21TYWZlVGlsZSIsIm5ld0dhbWUiLCIuL2FjdGlvbnMvTW9kYWxBY3Rpb25zLmNvZmZlZSIsIi4vc3RvcmVzL01vZGFsU3RvcmUuY29mZmVlIiwiLi9zdG9yZXMvVGlsZVN0b3JlLmNvZmZlZSIsIkZsdXgiLDQsImRpc3BhdGNoIiwiLi4vRGlzcGF0Y2hlci5jb2ZmZWUiLDUsNiwiY2xlYXJTYWZlUmFuZG9tVGlsZSIsNywiTW9kYWxzQ29sbGVjdGlvbiIsInNob3ciLCJwcm90b3R5cGUiLCJzZXQiLCJmaWxlTmFtZSIsImlzQmVpbmdTaG93biIsIm1vZGFsTmFtZSIsInJlZiIsInJlc3VsdHMiLCJwdXNoIiwia2V5Iiwic2hvd01vZGFsIiw4LCJUaWxlTW9kZWwiLCJUaWxlc0NvbGxlY3Rpb24iLCJleHRlbmQiLCJjaGlsZCIsInBhcmVudCIsImN0b3IiLCJjb25zdHJ1Y3RvciIsImhhc1Byb3AiLCJfX3N1cGVyX18iLCJoYXNPd25Qcm9wZXJ0eSIsIk1vZGVsIiwiY29sbGVjdGlvbiIsImFsbCIsIm1vZGVsIiwic3VwZXJDbGFzcyIsImFwcGx5IiwiYXJndW1lbnRzIiwiY2xlYXJOZWlnaGJvcnMiLCJtb3ZlVXBkYXRlIiwieCIsInkiLCJtaW5lcyIsImF0dHJzIiwiaiIsImsiLCJtaW5lTnVtIiwicmVmMSIsInJlZjIiLCJzaXplWCIsInNpemVZIiwibnVtT2ZNaW5lcyIsImFkZCIsImlzTWluZSIsInRhbGx5TWluZXMiLCJnYW1lVXBkYXRlIiwibm9NaW5lRmlyc3RDbGljayIsIm51bU9mQ2xlYXJzIiwiZmluZEF0dHJzIiwicmFuZG9tSW5kZXgiLCJzYWZlVGlsZXMiLCJpc0NsZWFyIiwiZ2V0QWxsIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWRqYWNlbnRUaWxlIiwibGVuIiwibGVuMSIsIm5laWdoYm9yQXR0cnMiLCJuZWlnaGJvck1pbmUiLCJuZWlnaGJvck1pbmVzIiwibmVpZ2hib3JYIiwibmVpZ2hib3JZIiwiZ2V0QWRqYWNlbnRUaWxlcyIsImFkamFjZW50TWluZXMiLCJtYXgiLCJtYXAiLCJsb3NzIiwid2luIiwibnVtT2ZGbGFncyIsImlzRmxhZ2dlZCIsIm5laWdoYm9yIiwic2hvdWxkQ2xlYXJOZWlnaGJvciIsInNob3VsZENsZWFyTmVpZ2hib3JzIiwibWF0Y2hlcyIsIm51bU9mQXR0cnMiLCJudW1PZk1hdGNoZWRBdHRycyIsInZhbCIsIi4uL21vZGVscy9UaWxlTW9kZWwuY29mZmVlIiw5LCJEYXNoYm9hcmQiLCJSIiwiVGlsZXNBY3Rpb25zIiwiRE9NIiwiY3JlYXRlQ2xhc3MiLCJkaXNwbGF5TmFtZSIsImRpdiIsImlkIiwiY2xhc3NOYW1lIiwib25DbGljayIsIi4uL2FjdGlvbnMvTW9kYWxBY3Rpb25zLmNvZmZlZSIsIi4uL2FjdGlvbnMvVGlsZXNBY3Rpb25zLmNvZmZlZSIsMTAsIkRhc2hib2FyZENvbXBvbmVudCIsIkdhbWUiLCJJbmZvQ29tcG9uZW50IiwiTW9kYWxPdmVybGF5Q29tcG9uZW50IiwiVGlsZXNDb21wb25lbnQiLCJhc3NpZ24iLCJnZXRNb2RhbFN0b3JlU3RhdGUiLCJnZXRTdGF0ZSIsImdldFRpbGVTdG9yZVN0YXRlIiwicXVldWUiLCJmbiIsInNldFRpbWVvdXQiLCJtb2RhbHMiLCJnZXRJbml0aWFsU3RhdGUiLCJjb21wb25lbnREaWRNb3VudCIsImFkZENoYW5nZUxpc3RlbmVyIiwiX29uVGlsZVN0b3JlQ2hhbmdlIiwiX29uTW9kYWxTdG9yZUNoYW5nZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwicmVtb3ZlQ2hhbmdlTGlzdGVuZXIiLCJ0aWxlc1N0YXRlIiwic2V0U3RhdGUiLCJib2FyZFdyYXBwcGVyIiwiZGFzaGJvYXJkIiwib3ZlcmxheXMiLCJ0aWxlcyIsInN0YXRlIiwiLi4vc3RvcmVzL01vZGFsU3RvcmUuY29mZmVlIiwiLi4vc3RvcmVzL1RpbGVTdG9yZS5jb2ZmZWUiLCIuL0Rhc2hib2FyZENvbXBvbmVudC5jb2ZmZWUiLCIuL0luZm9Db21wb25lbnQuY29mZmVlIiwiLi9UaWxlc0NvbXBvbmVudC5jb2ZmZWUiLCIuL21vZGFscy9Nb2RhbE92ZXJsYXlDb21wb25lbnQuY29mZmVlIiwib2JqZWN0LWFzc2lnbiIsMTEsIkluZm8iLCJ1bCIsImxpIiwicHJvcHMiLCJudW1PZlRpbGVzIiwibnVtT2ZVbmNsZWFyZWQiLDEyLCJUaWxlIiwiVGlsZUFjdGlvbnMiLCJnZXRDbGFzcyIsImNsaWNrSGFuZGxlciIsInNwYW4iLCJnZXRUZXh0IiwiJGV2ZW50IiwiZmxhZ0tleVdhc1ByZXNzZWQiLCJzaGlmdEtleSIsImFsdEtleSIsImlzRmlyc3RDb2x1bW4iLCJoYXNCZWVuRmxhZ2dlZCIsImhhc0JlZW5DbGVhcmVkIiwiaGFzTWluZSIsInNob3VsZERpc3BsYXlNaW5lIiwiaGFzWmVyb0FkamFjZW50TWluZXMiLCJ0ZXh0Iiwiam9pbiIsIi4uL2FjdGlvbnMvVGlsZUFjdGlvbnMuY29mZmVlIiwxMywiVGlsZUNvbXBvbmVudCIsIlRpbGVzIiwiX3RoaXMiLCJpdGVtIiwiaW5kZXgiLCIuL1RpbGVDb21wb25lbnQuY29mZmVlIiwxNCwiTW9kYWxPdmVybGF5IiwiY2xhc3NlcyIsImJ1dHRvbiIsImNvbnRyb2xzIiwiZGVzY3JpcHRpb24iLCIuLi8uLi9hY3Rpb25zL01vZGFsQWN0aW9ucy5jb2ZmZWUiLDE1LCJnZXRUaXRsZVRleHQiLCJjbGlja0hhbmRsZXJOZXdHYW1lIiwiY2xpY2tIYW5kbGVyRXhpdE1vZGFsIiwicmVuZGVyQnV0dG9ucyIsImJ1dHRvbnMiLCJ0aXRsZSIsIi4uLy4uL2FjdGlvbnMvVGlsZXNBY3Rpb25zLmNvZmZlZSIsMTYsIkluc3RydWN0aW9uc0NvbXBvbmVudCIsIk5ld0dhbWVDb21wb25lbnQiLCJpbnN0cnVjdGlvbnMiLCJyZXNldEhhbmRsZXIiLCJpbnN0cnVjdGlvbnNIYW5kbGVyIiwib3ZlcmxheSIsIi4vTW9kYWxJbnN0cnVjdGlvbnNDb21wb25lbnQuY29mZmVlIiwiLi9Nb2RhbE5ld0dhbWVDb21wb25lbnQuY29mZmVlIiwxNywiTnVtYmVyIiwiaXNJbnRlZ2VyIiwidmFsdWUiLCJpc0Zpbml0ZSIsImFkamFjZW50VGlsZXMiLCJhdHRyIiwiU3RyaW5nIiwxOCwiRXZlbnRFbWl0dGVyIiwiTW9kYWxzIiwiZW1pdCIsImNhbGxiYWNrIiwib24iLCJyZW1vdmVMaXN0ZW5lciIsIi4uL2NvbGxlY3Rpb25zL01vZGFsc0NvbGxlY3Rpb24uY29mZmVlIiwiZXZlbnRzIiwxOSwid2luZG93IiwiZm9vIiwiLi4vY29sbGVjdGlvbnMvVGlsZXNDb2xsZWN0aW9uLmNvZmZlZSIsMjAsImR1cCIsMjEsIiREaXNwYXRjaGVyX2NhbGxiYWNrcyIsIiREaXNwYXRjaGVyX2lzUGVuZGluZyIsIiREaXNwYXRjaGVyX2lzSGFuZGxlZCIsIiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmciLCIkRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCIsImludmFyaWFudCIsIl9sYXN0SUQiLCJfcHJlZml4IiwidW5yZWdpc3RlciIsIndhaXRGb3IiLCJpZHMiLCJpaSIsIiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrIiwicGF5bG9hZCIsIiREaXNwYXRjaGVyX3N0YXJ0RGlzcGF0Y2hpbmciLCIkRGlzcGF0Y2hlcl9zdG9wRGlzcGF0Y2hpbmciLCJpc0Rpc3BhdGNoaW5nIiwiLi9pbnZhcmlhbnQiLDIyLCJjb25kaXRpb24iLCJmb3JtYXQiLCJiIiwiYyIsImQiLCJlcnJvciIsInVuZGVmaW5lZCIsImFyZ3MiLCJhcmdJbmRleCIsInJlcGxhY2UiLCJmcmFtZXNUb1BvcCIsMjMsIl9ldmVudHMiLCJfbWF4TGlzdGVuZXJzIiwiaXNGdW5jdGlvbiIsImFyZyIsImlzTnVtYmVyIiwiaXNPYmplY3QiLCJpc1VuZGVmaW5lZCIsImRlZmF1bHRNYXhMaXN0ZW5lcnMiLCJzZXRNYXhMaXN0ZW5lcnMiLCJpc05hTiIsIlR5cGVFcnJvciIsImVyIiwiaGFuZGxlciIsImxpc3RlbmVycyIsIkFycmF5Iiwic2xpY2UiLCJhZGRMaXN0ZW5lciIsImxpc3RlbmVyIiwibSIsIm5ld0xpc3RlbmVyIiwid2FybmVkIiwiY29uc29sZSIsInRyYWNlIiwib25jZSIsImciLCJmaXJlZCIsImxpc3QiLCJwb3NpdGlvbiIsInNwbGljZSIsInJlbW92ZUFsbExpc3RlbmVycyIsInJldCIsImxpc3RlbmVyQ291bnQiLCJlbWl0dGVyIiwyNCwyNSwyNiwiVG9PYmplY3QiLCJPYmplY3QiLCJ0YXJnZXQiLCJzb3VyY2UiLCJmcm9tIiwia2V5cyIsInRvIl0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFBQUEsR0FBQUosR0FBQSxFQUFBLElBQUFLLEdBQUEsR0FBQUMsT0FBQSx1QkFBQU4sRUFBQSxJQUFBLE1BQUFLLEdBQUFFLEtBQUEsbUJBQUFGLEVBQUEsR0FBQUcsR0FBQVgsRUFBQUcsSUFBQVMsV0FBQWIsR0FBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsR0FBQUUsR0FBQUQsRUFBQUksR0FBQSxHQUFBTCxFQUFBLE9BQUFJLEdBQUFGLEVBQUFBLEVBQUFGLElBQUFhLEVBQUFBLEVBQUFDLFFBQUFkLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsTUFBQUQsR0FBQUcsR0FBQVMsUUFBQSxJQUFBLEdBQUFMLEdBQUEsa0JBQUFELFVBQUFBLFFBQUFILEVBQUEsRUFBQUEsRUFBQUYsRUFBQWEsT0FBQVgsSUFBQUQsRUFBQUQsRUFBQUUsR0FBQSxPQUFBRCxLQUFBYSxHQUFBLFNBQUFULFFBQUFVLE9BQUFKLFVDQUEsV0FDQSxHQUFBSyxlQUFBQyxjQUVBRCxlQUFBWCxRQUFBLHFDQUVBWSxlQUFBQyxNQUFBQyxjQUFBSCxjQUFBLE1BRUFFLE1BQUFFLE9BQUFILGVBQUFJLFNBQUFDLGVBQUEsa0JBRUFWLEtBQUFXLFFDR0dDLG9DQUFvQyxLQUFLQyxHQUFHLFNBQVNwQixRQUFRVSxPQUFPSixTQ0h2RUksT0FBQUosUUFBQWUsV0FBQXJCLFFBQUEsc0JEZUdzQixtQkFBbUIsS0FBS0MsR0FBRyxTQUFTdkIsUUFBUVUsT0FBT0osVUV4QnRELFdBQ0EsR0FBQWtCLGVBQUFILFdBQUFJLGFBQUFDLFdBQUFDLFVBQUFDLFlBQUFDLGFBRUFSLFlBQUFyQixRQUFBLFFBQUFxQixXQUVBRyxjQUFBLEdBQUFILFlBRUFNLFVBQUEzQixRQUFBLDZCQUVBMEIsV0FBQTFCLFFBQUEsOEJBRUF5QixhQUFBekIsUUFBQSxpQ0FFQTRCLFlBQUEsU0FBQUUsTUFNQSxNQUxBQSxNQUdBSixXQUFBSyxPQUFBRCxNQUZBSixXQUFBTSxRQUlBTixXQUFBTyxjQUdBSixjQUFBLFdBQ0EsR0FBQUssS0FFQSxPQURBQSxNQUFBUCxVQUFBUSxVQUNBUixVQUFBTSxjQUdBVCxjQUFBWSxTQUFBLFNBQUFDLE9BQ0EsR0FBQUMsS0FDQSxRQUFBRCxNQUFBRSxNQUNBLElBQUEsbUJBS0EsTUFKQUQsTUFBQVgsVUFBQWEsS0FDQUMsSUFBQUosTUFBQUksTUFFQUgsS0FBQUksYUFDQWIsZUFDQSxLQUFBLGFBS0EsTUFKQVMsTUFBQVgsVUFBQWEsS0FDQUMsSUFBQUosTUFBQUksTUFFQUgsS0FBQUssUUFDQWQsZUFDQSxLQUFBLDBCQUVBLEdBREFTLEtBQUFYLFVBQUFpQixpQkFHQSxNQURBTixNQUFBSyxRQUNBZCxlQUVBLE1BQ0EsS0FBQSxpQkFHQSxNQUZBRixXQUFBa0IsUUFBQSxHQUFBLEdBQUEsSUFDQWhCLGdCQUNBRCxZQUFBLFVBQ0EsS0FBQSxlQUVBLE1BREFGLFlBQUFLLE9BQUFNLE1BQUFQLE1BQ0FKLFdBQUFPLFlBQ0EsS0FBQSxjQUNBLE1BQUFMLGtCQUlBbEIsT0FBQUosUUFBQWtCLGdCQUVBakIsS0FBQVcsUUYyQkc0QixnQ0FBZ0MsRUFBRUMsNkJBQTZCLEdBQUdDLDRCQUE0QixHQUFHQyxLQUFPLEtBQUtDLEdBQUcsU0FBU2xELFFBQVFVLE9BQU9KLFVHM0YzSSxXQUNBLEdBQUFlLFdBRUFBLFlBQUFyQixRQUFBLHdCQUVBVSxPQUFBSixTQUNBeUIsT0FBQSxTQUFBRCxNQUNBLE1BQUFULFlBQUE4QixVQUNBWixLQUFBLGVBQ0FULEtBQUFBLFFBR0FFLE1BQUEsV0FDQSxNQUFBWCxZQUFBOEIsVUFDQVosS0FBQSxvQkFLQWhDLEtBQUFXLFFIOEZHa0MsdUJBQXVCLElBQUlDLEdBQUcsU0FBU3JELFFBQVFVLE9BQU9KLFVJakh6RCxXQUNBLEdBQUFlLFdBRUFBLFlBQUFyQixRQUFBLHdCQUVBVSxPQUFBSixTQUNBb0MsV0FBQSxTQUFBRCxLQUNBLE1BQUFwQixZQUFBOEIsVUFDQVosS0FBQSxtQkFDQUUsSUFBQUEsT0FHQUUsTUFBQSxTQUFBRixLQUNBLE1BQUFwQixZQUFBOEIsVUFDQVosS0FBQSxhQUNBRSxJQUFBQSxVQUtBbEMsS0FBQVcsUUpvSEdrQyx1QkFBdUIsSUFBSUUsR0FBRyxTQUFTdEQsUUFBUVUsT0FBT0osVUt4SXpELFdBQ0EsR0FBQWUsV0FFQUEsWUFBQXJCLFFBQUEsd0JBRUFVLE9BQUFKLFNBQ0FpRCxvQkFBQSxXQUNBLE1BQUFsQyxZQUFBOEIsVUFDQVosS0FBQSw2QkFHQU0sUUFBQSxXQUNBLE1BQUF4QixZQUFBOEIsVUFDQVosS0FBQSx1QkFLQWhDLEtBQUFXLFFMMklHa0MsdUJBQXVCLElBQUlJLEdBQUcsU0FBU3hELFFBQVFVLE9BQU9KLFVNN0p6RCxXQUNBLEdBQUFtRCxpQkFFQUEsa0JBQUEsV0FDQSxRQUFBQSxvQkFDQXZDLEtBQUF3QyxRQWlDQSxNQTlCQUQsa0JBQUFFLFVBQUFDLElBQUEsU0FBQUMsVUFFQSxNQURBM0MsTUFBQXdDLEtBQUFHLFdBQUEsRUFDQTNDLE1BR0F1QyxpQkFBQUUsVUFBQTVCLE9BQUEsU0FBQUQsTUFDQSxHQUFBZ0MsY0FBQUMsVUFBQUMsSUFBQUMsT0FDQUQsS0FBQTlDLEtBQUF3QyxLQUNBTyxVQUNBLEtBQUFGLFlBQUFDLEtBQ0FGLGFBQUFFLElBQUFELFdBRUFFLFFBQUFDLEtBREFILFlBQUFqQyxLQUNBWixLQUFBd0MsS0FBQUssWUFBQUQsYUFFQUEsY0FBQSxFQUdBLE9BQUFHLFVBR0FSLGlCQUFBRSxVQUFBM0IsTUFBQSxXQUNBLEdBQUFtQyxLQUFBSCxJQUFBSSxTQUNBSixLQUFBOUMsS0FBQXdDLElBQ0EsS0FBQVMsTUFBQUgsS0FDQUksVUFBQUosSUFBQUcsS0FDQWpELEtBQUF3QyxLQUFBUyxNQUFBLENBRUEsT0FBQWpELE9BR0F1QyxvQkFJQS9DLE9BQUFKLFFBQUFtRCxtQkFFQWxELEtBQUFXLFdOZ0tNbUQsR0FBRyxTQUFTckUsUUFBUVUsT0FBT0osVU81TWpDLFdBQ0EsR0FBQWdFLFdBQUFDLGdCQUNBQyxPQUFBLFNBQUFDLE1BQUFDLFFBQUEsUUFBQUMsUUFBQXpELEtBQUEwRCxZQUFBSCxNQUFBLElBQUEsR0FBQU4sT0FBQU8sUUFBQUcsUUFBQXRFLEtBQUFtRSxPQUFBUCxPQUFBTSxNQUFBTixLQUFBTyxPQUFBUCxLQUFBLE9BQUFRLE1BQUFoQixVQUFBZSxPQUFBZixVQUFBYyxNQUFBZCxVQUFBLEdBQUFnQixNQUFBRixNQUFBSyxVQUFBSixPQUFBZixVQUFBYyxPQUNBSSxXQUFBRSxjQUVBVCxXQUFBdEUsUUFBQSw4QkFFQXVFLGdCQUFBLFdBQ0EsUUFBQUEsbUJBQ0EsR0FBQVMsT0FBQUMsVUFDQS9ELE1BQUFnRSxPQUNBRCxXQUFBL0QsS0FDQUEsS0FBQWlFLE1BQUFILE1BQUEsU0FBQUksWUFHQSxRQUFBSixTQUNBLE1BQUFBLE9BQUFGLFVBQUFGLFlBQUFTLE1BQUFuRSxLQUFBb0UsV0FjQSxNQWpCQWQsUUFBQVEsTUFBQUksWUFNQUosTUFBQXJCLFVBQUFoQixNQUFBLFdBR0EsTUFGQXFDLE9BQUFGLFVBQUFuQyxNQUFBcEMsS0FBQVcsTUFDQStELFdBQUFNLGVBQUFyRSxNQUNBK0QsV0FBQU8sY0FHQVIsTUFBQXJCLFVBQUFqQixXQUFBLFdBRUEsTUFEQXNDLE9BQUFGLFVBQUFwQyxXQUFBbkMsS0FBQVcsTUFDQStELFdBQUFPLGNBR0FSLE9BRUFWLFdBc0xBLE1BbkxBQyxpQkFBQVosVUFBQWQsUUFBQSxTQUFBNEMsRUFBQUMsRUFBQUMsT0FDQSxHQUFBQyxPQUFBM0YsRUFBQTRGLEVBQUFDLEVBQUFDLFFBQUEvQixJQUFBZ0MsS0FBQUMsS0FBQTNELElBS0EsS0FKQXBCLEtBQUFjLFFBQ0FkLEtBQUFnRixNQUFBVCxFQUNBdkUsS0FBQWlGLE1BQUFULEVBQ0F4RSxLQUFBa0YsV0FBQVQsTUFDQUQsRUFBQXpGLEVBQUEsRUFBQStELElBQUE5QyxLQUFBaUYsTUFBQSxFQUFBbkMsS0FBQSxFQUFBQSxLQUFBL0QsRUFBQUEsR0FBQStELElBQUEwQixFQUFBMUIsS0FBQSxJQUFBL0QsSUFBQUEsRUFDQSxJQUFBd0YsRUFBQUksRUFBQSxFQUFBRyxLQUFBOUUsS0FBQWdGLE1BQUEsRUFBQUYsTUFBQSxFQUFBQSxNQUFBSCxFQUFBQSxHQUFBRyxLQUFBUCxFQUFBTyxNQUFBLElBQUFILElBQUFBLEVBQ0FELE9BQ0FILEVBQUFBLEVBQ0FDLEVBQUFBLEdBRUF4RSxLQUFBbUYsSUFBQVQsTUFHQSxLQUFBRyxRQUFBRCxFQUFBLEVBQUFHLEtBQUEvRSxLQUFBa0YsV0FBQUgsTUFBQSxFQUFBQSxNQUFBSCxFQUFBQSxHQUFBRyxLQUFBRixRQUFBRSxNQUFBLElBQUFILElBQUFBLEVBQ0F4RCxLQUFBcEIsS0FBQTBCLGlCQUNBTixLQUFBNkMsTUFBQW1CLFFBQUEsQ0FHQSxPQURBcEYsTUFBQXFGLGFBQ0FyRixLQUFBc0YsY0FHQWpDLGdCQUFBWixVQUFBOEMsaUJBQUEsU0FBQW5FLE1BTUEsTUFMQSxLQUFBcEIsS0FBQXdGLGFBQUFwRSxLQUFBNkMsTUFBQW1CLFVBQUEsSUFDQWhFLEtBQUE2QyxNQUFBbUIsUUFBQSxFQUNBcEYsS0FBQTBCLGlCQUFBdUMsTUFBQW1CLFFBQUEsRUFDQXBGLEtBQUFxRixjQUVBakUsTUFHQWlDLGdCQUFBWixVQUFBMEMsSUFBQSxTQUFBbEIsT0FDQSxHQUFBN0MsS0FHQSxPQUZBQSxNQUFBLEdBQUFwQixNQUFBaUUsTUFBQUEsT0FDQWpFLEtBQUFnRSxJQUFBaEIsS0FBQTVCLE1BQ0FBLE1BR0FpQyxnQkFBQVosVUFBQTNCLE1BQUEsV0FFQSxNQURBZCxNQUFBZ0UsT0FDQWhFLE1BR0FxRCxnQkFBQVosVUFBQWYsZUFBQSxXQUNBLEdBQUErRCxXQUFBQyxZQUFBQyxTQU9BLE9BTkFGLFlBQ0FHLFNBQUEsRUFDQVIsUUFBQSxHQUVBTyxVQUFBM0YsS0FBQTZGLE9BQUFKLFdBQ0FDLFlBQUFJLEtBQUFDLE1BQUFELEtBQUFFLFNBQUFMLFVBQUFyRyxRQUNBcUcsVUFBQUQsY0FHQXJDLGdCQUFBWixVQUFBNEMsV0FBQSxXQUNBLEdBQUFZLGNBQUFsSCxFQUFBNEYsRUFBQXVCLElBQUFDLEtBQUFDLGNBQUFDLGFBQUFDLGNBQUFDLFVBQUFDLFVBQUExRCxJQUFBZ0MsS0FBQS9CLFFBQUEzQixJQUdBLEtBRkEwQixJQUFBOUMsS0FBQWdFLElBQ0FqQixXQUNBaEUsRUFBQSxFQUFBbUgsSUFBQXBELElBQUF4RCxPQUFBNEcsSUFBQW5ILEVBQUFBLElBQUEsQ0FJQSxJQUhBcUMsS0FBQTBCLElBQUEvRCxHQUNBdUgsY0FBQSxFQUNBeEIsS0FBQTFELEtBQUFxRixtQkFDQTlCLEVBQUEsRUFBQXdCLEtBQUFyQixLQUFBeEYsT0FBQTZHLEtBQUF4QixFQUFBQSxJQUNBc0IsYUFBQW5CLEtBQUFILEdBQ0E0QixVQUFBbkYsS0FBQTZDLE1BQUFNLEVBQUEwQixhQUFBLEdBQ0FPLFVBQUFwRixLQUFBNkMsTUFBQU8sRUFBQXlCLGFBQUEsR0FDQUcsZUFDQWhCLFFBQUEsRUFDQWIsRUFBQWdDLFVBQ0EvQixFQUFBZ0MsV0FFQUgsYUFBQXJHLEtBQUFzQixJQUFBOEUsZUFDQSxTQUFBQyxjQUNBQyxlQUdBdkQsU0FBQUMsS0FBQTVCLEtBQUE2QyxNQUFBeUMsY0FBQUosZUFFQSxNQUFBdkQsVUFHQU0sZ0JBQUFaLFVBQUE2QyxXQUFBLFdBQ0EsR0FBQXZHLEdBQUFtSCxJQUFBcEQsSUFBQTFCLElBV0EsS0FWQXBCLEtBQUF1RSxFQUFBdUIsS0FBQWEsSUFBQXhDLE1BQUFuRSxLQUFBQSxLQUFBZ0UsSUFBQTRDLElBQUEsU0FBQXhGLE1BQ0EsTUFBQUEsTUFBQTZDLE1BQUFNLEtBRUF2RSxLQUFBd0UsRUFBQXNCLEtBQUFhLElBQUF4QyxNQUFBbkUsS0FBQUEsS0FBQWdFLElBQUE0QyxJQUFBLFNBQUF4RixNQUNBLE1BQUFBLE1BQUE2QyxNQUFBTyxLQUVBeEUsS0FBQXVFLEVBQUF2RSxLQUFBdUUsSUFDQXZFLEtBQUF3RSxFQUFBeEUsS0FBQXdFLElBQ0F4RSxLQUFBa0YsV0FBQSxFQUNBcEMsSUFBQTlDLEtBQUFnRSxJQUNBakYsRUFBQSxFQUFBbUgsSUFBQXBELElBQUF4RCxPQUFBNEcsSUFBQW5ILEVBQUFBLElBQ0FxQyxLQUFBMEIsSUFBQS9ELEdBQ0FxQyxLQUFBNkMsTUFBQW1CLFVBQUEsR0FDQXBGLEtBQUFrRixZQUdBLE9BQUFsRixNQUFBc0UsY0FHQWpCLGdCQUFBWixVQUFBNkIsV0FBQSxXQUNBLEdBQUF2RixHQUFBbUgsSUFBQXBELElBQUExQixJQU1BLEtBTEFwQixLQUFBNkcsTUFBQSxFQUNBN0csS0FBQThHLEtBQUEsRUFDQTlHLEtBQUF3RixZQUFBLEVBQ0F4RixLQUFBK0csV0FBQSxFQUNBakUsSUFBQTlDLEtBQUFnRSxJQUNBakYsRUFBQSxFQUFBbUgsSUFBQXBELElBQUF4RCxPQUFBNEcsSUFBQW5ILEVBQUFBLElBQ0FxQyxLQUFBMEIsSUFBQS9ELEdBQ0FxQyxLQUFBNkMsTUFBQTJCLFdBQUEsR0FDQTVGLEtBQUF3RixjQUVBcEUsS0FBQTZDLE1BQUErQyxhQUFBLEdBQ0FoSCxLQUFBK0csYUFFQTNGLEtBQUE2QyxNQUFBbUIsVUFBQSxHQUFBaEUsS0FBQTZDLE1BQUEyQixXQUFBLElBQ0E1RixLQUFBNkcsTUFBQSxFQUdBLE9BQUE3RyxNQUFBNkcsUUFBQSxHQUFBN0csS0FBQWdFLElBQUExRSxPQUFBVSxLQUFBa0YsV0FBQWxGLEtBQUF3RixjQUFBLEVBQ0F4RixLQUFBOEcsS0FBQSxFQURBLFFBS0F6RCxnQkFBQVosVUFBQTRCLGVBQUEsU0FBQWpELE1BQ0EsR0FBQTZFLGNBQUFsSCxFQUFBbUgsSUFBQWUsU0FBQW5FLElBQUFDLFFBQUFtRSxvQkFBQUMsb0JBRUEsSUFEQUEscUJBQUEsSUFBQS9GLEtBQUE2QyxNQUFBeUMsZUFBQXRGLEtBQUE2QyxNQUFBbUIsVUFBQSxFQUNBLENBR0EsSUFGQXRDLElBQUExQixLQUFBcUYsbUJBQ0ExRCxXQUNBaEUsRUFBQSxFQUFBbUgsSUFBQXBELElBQUF4RCxPQUFBNEcsSUFBQW5ILEVBQUFBLElBQ0FrSCxhQUFBbkQsSUFBQS9ELEdBQ0FrSSxTQUFBakgsS0FBQXNCLEtBQ0FpRCxFQUFBbkQsS0FBQTZDLE1BQUFNLEVBQUEwQixhQUFBLEdBQ0F6QixFQUFBcEQsS0FBQTZDLE1BQUFPLEVBQUF5QixhQUFBLEtBRUFpQixvQkFBQUQsVUFBQUEsU0FBQWhELE1BQUEyQixXQUFBLEdBQUFxQixTQUFBaEQsTUFBQW1CLFVBQUEsRUFFQXJDLFFBQUFDLEtBREFrRSxvQkFDQUQsU0FBQXhGLFFBRUEsT0FHQSxPQUFBc0IsV0FJQU0sZ0JBQUFaLFVBQUFuQixJQUFBLFNBQUFvRCxPQUNBLE1BQUExRSxNQUFBNkYsT0FBQW5CLE9BQUEsSUFHQXJCLGdCQUFBWixVQUFBb0QsT0FBQSxTQUFBbkIsT0FDQSxHQUFBM0YsR0FBQWtFLElBQUFpRCxJQUFBa0IsUUFBQUMsV0FBQUMsa0JBQUF4RSxJQUFBMUIsS0FBQW1HLEdBRUEsSUFEQUgsWUFDQTFDLE1BQ0EsTUFBQTFFLE1BQUFnRSxHQUdBLEtBREFsQixJQUFBOUMsS0FBQWdFLElBQ0FqRixFQUFBLEVBQUFtSCxJQUFBcEQsSUFBQXhELE9BQUE0RyxJQUFBbkgsRUFBQUEsSUFBQSxDQUNBcUMsS0FBQTBCLElBQUEvRCxHQUNBc0ksV0FBQSxFQUNBQyxrQkFBQSxDQUNBLEtBQUFyRSxNQUFBeUIsT0FDQTZDLElBQUE3QyxNQUFBekIsS0FDQW9FLGFBQ0FqRyxLQUFBNkMsTUFBQWhCLE9BQUFzRSxLQUNBRCxtQkFHQUEscUJBQUFELFlBQ0FELFFBQUFwRSxLQUFBNUIsTUFHQSxNQUFBZ0csVUFHQS9ELG1CQUlBN0QsT0FBQUosUUFBQWlFLGtCQUVBaEUsS0FBQVcsUVArTUd3SCw2QkFBNkIsS0FBS0MsR0FBRyxTQUFTM0ksUUFBUVUsT0FBT0osVVEzYWhFLFdBQ0EsR0FBQXNJLFdBQUFuSCxhQUFBb0gsRUFBQUMsWUFFQXJILGNBQUF6QixRQUFBLGtDQUVBOEksYUFBQTlJLFFBQUEsa0NBRUE2SSxFQUFBaEksTUFBQWtJLElBRUFILFVBQUEvSCxNQUFBbUksYUFDQUMsWUFBQSxZQUNBbEksT0FBQSxXQUNBLE1BQUE4SCxHQUFBSyxLQUNBQyxHQUFBLGNBRUFOLEVBQUFLLEtBQ0EvRSxJQUFBLFdBQ0FpRixVQUFBLGtCQUNBQyxRQUFBLFdBQ0EsTUFBQTVILGNBQUFNLE9BQUEsYUFFQSxZQUFBOEcsRUFBQUssS0FDQS9FLElBQUEsY0FDQWlGLFVBQUEscUJBQ0FDLFFBQUFQLGFBQUF2RixxQkFDQSxxQkFBQXNGLEVBQUFLLEtBQ0EvRSxJQUFBLGVBQ0FpRixVQUFBLHNCQUNBQyxRQUFBLFdBQ0EsTUFBQTVILGNBQUFNLE9BQUEsa0JBRUEscUJBS0FyQixPQUFBSixRQUFBc0ksWUFFQXJJLEtBQUFXLFFSOGFHb0ksaUNBQWlDLEVBQUVDLGlDQUFpQyxJQUFJQyxJQUFJLFNBQVN4SixRQUFRVSxPQUFPSixVU3BkdkcsV0FDQSxHQUFBbUosb0JBQUFDLEtBQUFDLGNBQUFsSSxhQUFBbUksc0JBQUFsSSxXQUFBbUgsRUFBQWxILFVBQUFrSSxlQUFBQyxPQUFBQyxtQkFBQUMsU0FBQUMsa0JBQUFDLEtBRUF2SSxXQUFBM0IsUUFBQSw4QkFFQTBCLFdBQUExQixRQUFBLCtCQUVBeUIsYUFBQXpCLFFBQUEsa0NBRUE2SixlQUFBN0osUUFBQSwyQkFFQTJKLGNBQUEzSixRQUFBLDBCQUVBeUosbUJBQUF6SixRQUFBLCtCQUVBNEosc0JBQUE1SixRQUFBLHlDQUVBOEosT0FBQTlKLFFBQUEsaUJBRUE2SSxFQUFBaEksTUFBQWtJLElBRUFtQixNQUFBLFNBQUFDLElBQ0EsTUFBQUMsWUFBQUQsR0FBQSxJQUdBSCxTQUFBLFdBQ0EsTUFBQUYsV0FBQUcsb0JBQUFGLHVCQUdBRSxrQkFBQSxXQUNBLE9BQ0EvRSxJQUFBdkQsVUFBQW9GLFNBQ0E3RSxLQUFBUCxVQUFBUSxZQUlBNEgsbUJBQUEsV0FDQSxPQUNBTSxPQUFBM0ksV0FBQXFGLFdBSUEyQyxLQUFBN0ksTUFBQW1JLGFBQ0FDLFlBQUEsT0FDQXFCLGdCQUFBLFdBQ0EsTUFBQU4sYUFFQU8sa0JBQUEsV0FFQSxNQURBNUksV0FBQTZJLGtCQUFBdEosS0FBQXVKLG9CQUNBL0ksV0FBQThJLGtCQUFBdEosS0FBQXdKLHNCQUVBQyxxQkFBQSxXQUVBLE1BREFoSixXQUFBaUoscUJBQUExSixLQUFBdUosb0JBQ0EvSSxXQUFBa0oscUJBQUExSixLQUFBd0osc0JBRUFELG1CQUFBLFdBQ0EsR0FBQUksV0FPQSxPQU5BQSxZQUFBWixxQkFDQVksV0FBQTNJLEtBQUE4RixLQUFBNkMsV0FBQTNJLEtBQUE2RixPQUNBbUMsTUFBQSxXQUNBLE1BQUF6SSxjQUFBTSxPQUFBLGFBR0FiLEtBQUE0SixTQUFBRCxhQUVBSCxvQkFBQSxXQUNBLE1BQUF4SixNQUFBNEosU0FBQWYsdUJBRUFoSixPQUFBLFdBQ0EsR0FBQWdLLGVBQUFDLFVBQUE5SSxLQUFBK0ksU0FBQUMsS0FxQkEsT0FwQkFoSixNQUFBckIsTUFBQUMsY0FBQTZJLGVBQ0F4RixJQUFBLE9BQ0FqQyxLQUFBaEIsS0FBQWlLLE1BQUFqSixPQUVBZ0osTUFBQXJLLE1BQUFDLGNBQUErSSxnQkFDQTFGLElBQUEsUUFDQStHLE1BQUFoSyxLQUFBaUssTUFBQWpHLE1BRUE2RixjQUFBbEMsRUFBQUssS0FDQUMsR0FBQSxpQkFDQWhGLElBQUEsbUJBQ0FqQyxLQUFBZ0osUUFDQUYsVUFBQW5LLE1BQUFDLGNBQUEySSxvQkFDQXRGLElBQUEsY0FFQThHLFNBQUFwSyxNQUFBQyxjQUFBOEksdUJBQ0F6RixJQUFBLGdCQUNBakMsS0FBQWhCLEtBQUFpSyxNQUFBakosS0FDQW1JLE9BQUFuSixLQUFBaUssTUFBQWQsU0FFQXhCLEVBQUFLLElBQUEsTUFBQStCLFNBQUFGLGNBQUFDLGVBSUF0SyxPQUFBSixRQUFBb0osT0FFQW5KLEtBQUFXLFFUdWRHb0ksaUNBQWlDLEVBQUU4Qiw4QkFBOEIsR0FBR0MsNkJBQTZCLEdBQUdDLDhCQUE4QixFQUFFQyx5QkFBeUIsR0FBR0MsMEJBQTBCLEdBQUdDLHdDQUF3QyxHQUFHQyxnQkFBZ0IsS0FBS0MsSUFBSSxTQUFTM0wsUUFBUVUsT0FBT0osVVV2akI1UixXQUNBLEdBQUFzTCxNQUFBL0MsQ0FFQUEsR0FBQWhJLE1BQUFrSSxJQUVBNkMsS0FBQS9LLE1BQUFtSSxhQUNBQyxZQUFBLE9BQ0FsSSxPQUFBLFdBQ0EsTUFBQThILEdBQUFnRCxJQUNBMUMsR0FBQSxVQUVBTixFQUFBaUQsSUFDQTNILElBQUEsU0FDQWpELEtBQUE2SyxNQUFBN0osS0FBQThKLFdBQUEsVUFBQW5ELEVBQUFpRCxJQUNBM0gsSUFBQSxTQUNBakQsS0FBQTZLLE1BQUE3SixLQUFBa0UsV0FBQSxVQUFBeUMsRUFBQWlELElBQ0EzSCxJQUFBLFdBQ0FqRCxLQUFBNkssTUFBQTdKLEtBQUErRixXQUFBLGtCQUFBWSxFQUFBaUQsSUFDQTNILElBQUEsV0FDQWpELEtBQUE2SyxNQUFBN0osS0FBQStKLGVBQUEsdUJBS0F2TCxPQUFBSixRQUFBc0wsT0FFQXJMLEtBQUFXLFdWMGpCTWdMLElBQUksU0FBU2xNLFFBQVFVLE9BQU9KLFVXcGxCbEMsV0FDQSxHQUFBdUksR0FBQXNELEtBQUFDLFdBRUFBLGFBQUFwTSxRQUFBLGlDQUVBNkksRUFBQWhJLE1BQUFrSSxJQUVBb0QsS0FBQXRMLE1BQUFtSSxhQUNBQyxZQUFBLE9BQ0FsSSxPQUFBLFdBQ0EsTUFBQThILEdBQUFpRCxJQUNBMUMsVUFBQWxJLEtBQUFtTCxXQUNBaEQsUUFBQW5JLEtBQUFvTCxjQUNBekQsRUFBQTBELEtBQUEsS0FBQXJMLEtBQUFzTCxhQUVBRixhQUFBLFNBQUFHLFFBQ0EsR0FBQUMsa0JBQ0EsT0FBQUQsU0FHQUMsa0JBQUFELE9BQUFFLFlBQUEsR0FBQUYsT0FBQUcsVUFBQSxFQUNBRixrQkFDQU4sWUFBQTFKLFdBQUF4QixLQUFBNkssTUFBQXpKLEtBQUE2QyxNQUFBMUMsS0FFQTJKLFlBQUF6SixNQUFBekIsS0FBQTZLLE1BQUF6SixLQUFBNkMsTUFBQTFDLE1BTkEySixZQUFBekosTUFBQXpCLEtBQUE2SyxNQUFBekosS0FBQTZDLE1BQUExQyxNQVNBb0ssY0FBQSxXQUNBLE1BQUEsS0FBQTNMLEtBQUE2SyxNQUFBekosS0FBQTZDLE1BQUFNLEdBRUFxSCxlQUFBLFdBQ0EsTUFBQTVMLE1BQUE2SyxNQUFBekosS0FBQTZDLE1BQUEyQixXQUFBLEdBQUE1RixLQUFBNkssTUFBQXpKLEtBQUE2QyxNQUFBK0MsYUFBQSxHQUVBNkUsZUFBQSxXQUNBLE1BQUE3TCxNQUFBNkssTUFBQXpKLEtBQUE2QyxNQUFBMkIsV0FBQSxHQUVBa0csUUFBQSxXQUNBLE1BQUE5TCxNQUFBNkssTUFBQXpKLEtBQUE2QyxNQUFBbUIsVUFBQSxHQUVBMkcsa0JBQUEsV0FDQSxNQUFBL0wsTUFBQTZMLGtCQUFBN0wsS0FBQThMLFdBRUFFLHFCQUFBLFdBQ0EsTUFBQSxLQUFBaE0sS0FBQTZLLE1BQUF6SixLQUFBNkMsTUFBQXlDLGVBQUExRyxLQUFBNkwsa0JBRUFQLFFBQUEsV0FDQSxHQUFBVyxLQVNBLE9BUkFBLE1BQUEsR0FDQWpNLEtBQUE2TCxpQkFDQUksS0FBQWpNLEtBQUE2SyxNQUFBekosS0FBQTZDLE1BQUF5QyxjQUNBMUcsS0FBQTRMLGlCQUNBSyxLQUFBLElBQ0FqTSxLQUFBK0wsc0JBQ0FFLEtBQUEsS0FFQUEsTUFFQWQsU0FBQSxXQUNBLE9BQUEsT0FBQW5MLEtBQUEyTCxnQkFBQSxNQUFBLE9BQUEzTCxLQUFBNkwsaUJBQUEsUUFBQSxPQUFBN0wsS0FBQTRMLGlCQUFBLFVBQUEsT0FBQTVMLEtBQUErTCxvQkFBQSxPQUFBLE9BQUEvTCxLQUFBZ00sdUJBQUEsT0FBQSxRQUFBRSxLQUFBLFFBSUExTSxPQUFBSixRQUFBNkwsT0FFQTVMLEtBQUFXLFFYdWxCR21NLGdDQUFnQyxJQUFJQyxJQUFJLFNBQVN0TixRQUFRVSxPQUFPSixVWXZwQm5FLFdBQ0EsR0FBQXVJLEdBQUEwRSxjQUFBQyxLQUVBRCxlQUFBdk4sUUFBQSwwQkFFQTZJLEVBQUFoSSxNQUFBa0ksSUFFQXlFLE1BQUEzTSxNQUFBbUksYUFDQUMsWUFBQSxRQUNBbEksT0FBQSxXQUNBLEdBQUFtSyxNQVVBLE9BVEFBLE9BQUFoSyxLQUFBNkssTUFBQWIsTUFBQXBELElBQUEsU0FBQTJGLE9BQ0EsTUFBQSxVQUFBQyxLQUFBQyxPQUNBLE1BQUE5TSxPQUFBQyxjQUFBeU0sZUFDQXBKLElBQUF3SixNQUNBM0osSUFBQTBKLEtBQUF2SSxNQUFBMUMsSUFDQUgsS0FBQW9MLFNBR0F4TSxPQUNBMkgsRUFBQWdELElBQ0ExQyxHQUFBLFNBQ0ErQixVQUlBeEssT0FBQUosUUFBQWtOLFFBRUFqTixLQUFBVyxRWjBwQkcwTSx5QkFBeUIsS0FBS0MsSUFBSSxTQUFTN04sUUFBUVUsT0FBT0osVWF0ckI3RCxXQUNBLEdBQUFtQixjQUFBcU0sYUFBQWpGLENBRUFwSCxjQUFBekIsUUFBQSxxQ0FFQTZJLEVBQUFoSSxNQUFBa0ksSUFFQStFLGFBQUFqTixNQUFBbUksYUFDQUMsWUFBQSxvQkFDQW9ELFNBQUEsV0FDQSxHQUFBMEIsUUFLQSxPQUpBQSxVQUFBLFdBQ0E3TSxLQUFBNkssTUFBQXJJLE1BQ0FxSyxRQUFBN0osS0FBQSxRQUVBNkosUUFBQVgsS0FBQSxNQUVBZCxhQUFBLFdBQ0EsTUFBQTdLLGNBQUFNLE9BQUEsaUJBRUFoQixPQUFBLFdBQ0EsR0FBQWlOLFFBQUFDLFNBQUFDLFdBMkNBLE9BMUNBQSxhQUFBckYsRUFBQUssS0FDQS9FLElBQUEsNkJBRUEwRSxFQUFBSyxLQUNBL0UsSUFBQSxzQkFDQWlGLFVBQUEsaUJBQ0EsZUFBQVAsRUFBQUssS0FDQS9FLElBQUEsdUJBQ0FpRixVQUFBLGtCQUNBLHFEQUFBLGlFQUFBLG9FQUFBLGlEQUFBZ0UsS0FBQSxNQUFBdkUsRUFBQUssS0FDQS9FLElBQUEsc0JBQ0EwRSxFQUFBMEQsTUFDQXBJLElBQUEsMEJBQ0FpRixVQUFBLFFBQ0EsU0FBQVAsRUFBQTBELE1BQ0FwSSxJQUFBLDJCQUNBLHdDQUFBMEUsRUFBQUssS0FDQS9FLElBQUEsMEJBQ0FpRixVQUFBLGlCQUNBLGtEQUVBNkUsU0FBQXBGLEVBQUFLLEtBQ0EvRSxJQUFBLDBCQUVBMEUsRUFBQTBELE1BQ0FwSSxJQUFBLDhCQUNBaUYsVUFBQSxRQUNBLGlCQUFBUCxFQUFBMEQsTUFDQXBJLElBQUEsK0JBQ0EsUUFBQTBFLEVBQUEwRCxNQUNBcEksSUFBQSw4QkFDQWlGLFVBQUEsUUFDQSxlQUFBUCxFQUFBMEQsTUFDQXBJLElBQUEsK0JBQ0EsbUZBRUE2SixPQUFBbkYsRUFBQUssS0FDQS9FLElBQUEsdUJBQ0EwRSxFQUFBSyxLQUNBRSxVQUFBLFNBQ0FDLFFBQUFuSSxLQUFBb0wsY0FDQSxZQUNBekQsRUFBQUssS0FDQS9FLElBQUEscUJBQ0FpRixVQUFBbEksS0FBQW1MLGFBQ0E2QixZQUFBRCxTQUFBRCxZQUlBdE4sT0FBQUosUUFBQXdOLGVBRUF2TixLQUFBVyxRYnlyQkdpTixvQ0FBb0MsSUFBSUMsSUFBSSxTQUFTcE8sUUFBUVUsT0FBT0osVWNsd0J2RSxXQUNBLEdBQUFtQixjQUFBcU0sYUFBQWpGLEVBQUFDLFlBRUFySCxjQUFBekIsUUFBQSxxQ0FFQThJLGFBQUE5SSxRQUFBLHFDQUVBNkksRUFBQWhJLE1BQUFrSSxJQUVBK0UsYUFBQWpOLE1BQUFtSSxhQUNBQyxZQUFBLGVBQ0FvRCxTQUFBLFdBQ0EsR0FBQTBCLFFBS0EsT0FKQUEsVUFBQSxXQUNBN00sS0FBQTZLLE1BQUFySSxNQUNBcUssUUFBQTdKLEtBQUEsUUFFQTZKLFFBQUFYLEtBQUEsTUFFQWlCLGFBQUEsV0FDQSxPQUFBbk4sS0FBQTZLLE1BQUFySSxNQUFBeEMsS0FBQTZLLE1BQUEvRCxLQUFBOUcsS0FBQTZLLE1BQUFoRSxLQUVBN0csS0FBQTZLLE1BQUEvRCxNQUFBOUcsS0FBQTZLLE1BQUFoRSxLQUNBLFdBQ0E3RyxLQUFBNkssTUFBQS9ELEtBQUE5RyxLQUFBNkssTUFBQS9ELElBQUEsT0FDQSxjQUpBLGFBT0FzRyxvQkFBQSxXQUNBLE1BQUF4RixjQUFBakcsV0FFQTBMLHNCQUFBLFdBQ0EsTUFBQTlNLGNBQUFPLFNBRUF3TSxjQUFBLFdBQ0EsR0FBQUMsUUFlQSxPQWRBQSxVQUNBNUYsRUFBQUssS0FDQS9FLElBQUEsaUJBQ0FpRixVQUFBLFNBQ0FDLFFBQUFuSSxLQUFBb04scUJBQ0EsV0FFQXBOLEtBQUE2SyxNQUFBaEUsTUFDQTBHLFFBQUF2SyxLQUFBMkUsRUFBQUssS0FDQS9FLElBQUEsa0JBQ0FpRixVQUFBLFNBQ0FDLFFBQUFuSSxLQUFBcU4sdUJBQ0EsY0FFQTFGLEVBQUFLLEtBQ0EvRSxJQUFBLG9CQUNBc0ssVUFFQTFOLE9BQUEsV0FDQSxHQUFBMk4sTUFRQSxPQVBBQSxPQUFBN0YsRUFBQUssS0FDQS9FLElBQUEseUJBQ0FpRixVQUFBLGlCQUNBUCxFQUFBSyxLQUNBL0UsSUFBQSxpQkFDQWlGLFVBQUEsU0FDQWxJLEtBQUFtTixpQkFDQXhGLEVBQUFLLEtBQ0EvRSxJQUFBLGlCQUNBaUYsVUFBQWxJLEtBQUFtTCxhQUNBcUMsTUFBQXhOLEtBQUFzTixxQkFJQTlOLE9BQUFKLFFBQUF3TixlQUVBdk4sS0FBQVcsUWRxd0JHaU4sb0NBQW9DLEVBQUVRLG9DQUFvQyxJQUFJQyxJQUFJLFNBQVM1TyxRQUFRVSxPQUFPSixVZTcwQjdHLFdBQ0EsR0FBQXVPLHVCQUFBcE4sYUFBQXFNLGFBQUFnQixpQkFBQWpHLENBRUFwSCxjQUFBekIsUUFBQSxxQ0FFQTZPLHNCQUFBN08sUUFBQSx1Q0FFQThPLGlCQUFBOU8sUUFBQSxrQ0FFQTZJLEVBQUFoSSxNQUFBa0ksSUFFQStFLGFBQUFqTixNQUFBbUksYUFDQUMsWUFBQSxlQUNBb0QsU0FBQSxXQUNBLE1BQUFuTCxNQUFBNkssTUFBQTFCLE9BQUF4SCxRQUNBLEdBQ0EzQixLQUFBNkssTUFBQTFCLE9BQUEwRSxhQUNBLEdBRUEsUUFFQUMsYUFBQSxXQUNBLE1BQUE5TixNQUFBNkssTUFBQTdKLEtBQUE2RixNQUFBN0csS0FBQTZLLE1BQUE3SixLQUFBOEYsSUFBQSxPQUNBdkcsYUFBQU8sU0FHQWlOLG9CQUFBLFdBQ0EsTUFBQXhOLGNBQUFNLE9BQUEsaUJBRUFoQixPQUFBLFdBQ0EsR0FBQW1PLFFBT0EsT0FOQUEsU0FBQXJHLEVBQUFLLEtBQ0FDLEdBQUEsVUFDQWhGLElBQUEsVUFDQWlGLFVBQUFsSSxLQUFBbUwsV0FDQWhELFFBQUFuSSxLQUFBOE4sY0FDQSxNQUNBbkcsRUFBQUssSUFBQSxNQUNBZ0csUUFBQXJPLE1BQUFDLGNBQUErTix1QkFDQTFLLElBQUEscUJBQ0FULEtBQUF4QyxLQUFBNkssTUFBQTFCLE9BQUEwRSxlQUNBbE8sTUFBQUMsY0FBQWdPLGtCQUNBM0ssSUFBQSxpQkFDQVQsS0FBQXhDLEtBQUE2SyxNQUFBMUIsT0FBQXhILFFBQ0FtRixJQUFBOUcsS0FBQTZLLE1BQUE3SixLQUFBOEYsSUFDQUQsS0FBQTdHLEtBQUE2SyxNQUFBN0osS0FBQTZGLFlBTUFySCxPQUFBSixRQUFBd04sZUFFQXZOLEtBQUFXLFFmZzFCR2lOLG9DQUFvQyxFQUFFZ0Isc0NBQXNDLEdBQUdDLGlDQUFpQyxLQUFLQyxJQUFJLFNBQVNyUCxRQUFRVSxPQUFPSixVZ0JyNEJwSixXQUNBLEdBQUFnRSxVQUVBZ0wsUUFBQUMsVUFBQUQsT0FBQUMsV0FBQSxTQUFBQyxPQUNBLE1BQUEsZ0JBQUFBLFFBQUFDLFNBQUFELFFBQUF4SSxLQUFBQyxNQUFBdUksU0FBQUEsT0FHQTlPLE9BQUFKLFFBQUFnRSxVQUFBLFdBS0EsUUFBQUEsV0FBQXNCLE9BQ0EsSUFBQTBKLE9BQUFDLFVBQUEzSixNQUFBSCxLQUFBNkosT0FBQUMsVUFBQTNKLE1BQUFGLEdBQ0EsS0FBQSxpRUFFQXhFLE1BQUFpRSxPQUNBTSxFQUFBLE9BQ0FDLEVBQUEsT0FDQWpELElBQUEsT0FDQTZELFFBQUEsRUFDQVEsU0FBQSxFQUNBb0IsV0FBQSxFQUNBTixjQUFBLEdBRUExRyxLQUFBMEMsSUFBQWdDLE9BakJBLEdBQUE4SixjQTZDQSxPQTNDQUEsaUJBQUEsR0FBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsR0FBQSxJQUFBLEVBQUEsSUFBQSxHQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFrQkFwTCxVQUFBWCxVQUFBQyxJQUFBLFNBQUFnQyxPQUNBLEdBQUErSixNQUFBeEwsR0FDQSxLQUFBQSxNQUFBeUIsT0FDQStKLEtBQUEvSixNQUFBekIsS0FDQWpELEtBQUFpRSxNQUFBaEIsS0FBQXdMLEtBQ0F6TyxLQUFBaUUsTUFBQTFDLElBQUFtTixPQUFBaEssTUFBQUgsR0FBQSxJQUFBbUssT0FBQWhLLE1BQUFGLEVBRUEsT0FBQXhFLE9BR0FvRCxVQUFBWCxVQUFBZ0UsaUJBQUEsV0FDQSxNQUFBK0gsZ0JBR0FwTCxVQUFBWCxVQUFBakIsV0FBQSxXQUVBLE1BREF4QixNQUFBaUUsTUFBQStDLFdBQUFoSCxLQUFBaUUsTUFBQStDLFVBQ0FoSCxNQUdBb0QsVUFBQVgsVUFBQWhCLE1BQUEsV0FHQSxNQUZBekIsTUFBQWlFLE1BQUEyQixTQUFBLEVBQ0E1RixLQUFBaUUsTUFBQStDLFdBQUEsRUFDQWhILE1BR0FvRCxlQUlBL0QsS0FBQVcsV2hCdzRCTTJPLElBQUksU0FBUzdQLFFBQVFVLE9BQU9KLFVpQmo4QmxDLFdBQ0EsR0FBQXdQLGNBQUFwTyxXQUFBcU8sT0FBQXRNLGlCQUFBcUcsTUFFQXJHLGtCQUFBekQsUUFBQSwwQ0FFQThQLGFBQUE5UCxRQUFBLFVBQUE4UCxhQUVBaEcsT0FBQTlKLFFBQUEsaUJBRUErUCxPQUFBLEdBQUF0TSxrQkFFQXNNLE9BQUFuTSxJQUFBLFdBRUFtTSxPQUFBbk0sSUFBQSxnQkFFQWxDLFdBQUFvSSxVQUFBZ0csYUFBQW5NLFdBQ0F0QixNQUFBLFFBQ0EwRSxPQUFBLFdBQ0EsTUFBQWdKLFFBQUFyTSxNQUVBMUIsTUFBQSxXQUNBLE1BQUErTixRQUFBL04sU0FFQUQsT0FBQSxTQUFBZ0MsV0FDQSxNQUFBZ00sUUFBQWhPLE9BQUFnQyxZQUVBOUIsV0FBQSxXQUNBLE1BQUFmLE1BQUE4TyxLQUFBOU8sS0FBQW1CLFFBRUFtSSxrQkFBQSxTQUFBeUYsVUFDQSxNQUFBL08sTUFBQWdQLEdBQUFoUCxLQUFBbUIsTUFBQTROLFdBRUFyRixxQkFBQSxTQUFBcUYsVUFDQSxNQUFBL08sTUFBQWlQLGVBQUFqUCxLQUFBbUIsTUFBQTROLGFBSUF2UCxPQUFBSixRQUFBb0IsYUFFQW5CLEtBQUFXLFFqQm84QkdrUCx5Q0FBeUMsRUFBRUMsT0FBUyxHQUFHM0UsZ0JBQWdCLEtBQUs0RSxJQUFJLFNBQVN0USxRQUFRVSxPQUFPSixVa0IzK0IzRyxXQUNBLEdBQUF3UCxjQUFBbk8sVUFBQTZMLE1BQUFqSixnQkFBQXVGLE1BRUF2RixpQkFBQXZFLFFBQUEseUNBRUE4UCxhQUFBOVAsUUFBQSxVQUFBOFAsYUFFQWhHLE9BQUE5SixRQUFBLGlCQUVBd04sTUFBQSxHQUFBakosaUJBRUFpSixNQUFBM0ssUUFBQSxHQUFBLEdBQUEsSUFFQTBOLE9BQUFDLElBQUFoRCxNQUVBN0wsVUFBQW1JLFVBQUFnRyxhQUFBbk0sV0FDQXRCLE1BQUEsU0FDQUcsSUFBQSxTQUFBb0QsT0FDQSxNQUFBNEgsT0FBQWhMLElBQUFvRCxRQUVBbUIsT0FBQSxXQUNBLE1BQUF5RyxPQUFBekcsVUFFQTVFLFFBQUEsV0FDQSxPQUNBNkYsSUFBQXdGLE1BQUF4RixJQUNBRCxLQUFBeUYsTUFBQXpGLEtBQ0FpRSxXQUFBd0IsTUFBQXRJLElBQUExRSxPQUNBNEYsV0FBQW9ILE1BQUFwSCxXQUNBNkIsV0FBQXVGLE1BQUF2RixXQUNBZ0UsZUFBQXVCLE1BQUF0SSxJQUFBMUUsT0FBQWdOLE1BQUFwSCxXQUFBb0gsTUFBQTlHLGNBR0E5RCxlQUFBLFdBQ0EsTUFBQTRLLE9BQUE1SyxrQkFFQUMsUUFBQSxTQUFBNEMsRUFBQUMsRUFBQUMsT0FDQSxNQUFBNkgsT0FBQTNLLFFBQUE0QyxFQUFBQyxFQUFBQyxRQUVBMUQsV0FBQSxXQUNBLE1BQUFmLE1BQUE4TyxLQUFBOU8sS0FBQW1CLFFBRUFtSSxrQkFBQSxTQUFBeUYsVUFDQSxNQUFBL08sTUFBQWdQLEdBQUFoUCxLQUFBbUIsTUFBQTROLFdBRUFyRixxQkFBQSxTQUFBcUYsVUFDQSxNQUFBL08sTUFBQWlQLGVBQUFqUCxLQUFBbUIsTUFBQTROLGFBSUF2UCxPQUFBSixRQUFBcUIsWUFFQXBCLEtBQUFXLFFsQjgrQkd1UCx3Q0FBd0MsRUFBRUosT0FBUyxHQUFHM0UsZ0JBQWdCLEtBQUtnRixJQUFJLFNBQVMxUSxRQUFRVSxPQUFPSixTQUMxR2dGLFVBQVUsR0FBRyxHQUFHLEdBQUdELE1BQU0vRSxRQUFRZ0YsYUFDOUJoRSxtQkFBbUIsR0FBR3FQLElBQU0sSUFBSUMsSUFBSSxTQUFTNVEsUUFBUVUsT0FBT0osU21CeGhDL0QsWUFtR0EsU0FBQWUsY0FDQUgsS0FBQTJQLHlCQUNBM1AsS0FBQTRQLHlCQUNBNVAsS0FBQTZQLHlCQUNBN1AsS0FBQThQLDJCQUFBLEVBQ0E5UCxLQUFBK1AsMkJBQUEsS0F0R0EsR0FBQUMsV0FBQWxSLFFBQUEsZUFFQW1SLFFBQUEsRUFDQUMsUUFBQSxLQTZHQS9QLFlBQUFzQyxVQUFBdkIsU0FBQSxTQUFBNk4sVUFDQSxHQUFBOUcsSUFBQWlJLFFBQUFELFNBRUEsT0FEQWpRLE1BQUEyUCxzQkFBQTFILElBQUE4RyxTQUNBOUcsSUFRQTlILFdBQUFzQyxVQUFBME4sV0FBQSxTQUFBbEksSUFDQStILFVBQ0FoUSxLQUFBMlAsc0JBQUExSCxJQUNBLDBFQUNBQSxVQUVBakksTUFBQTJQLHNCQUFBMUgsS0FVQTlILFdBQUFzQyxVQUFBMk4sUUFBQSxTQUFBQyxLQUNBTCxVQUNBaFEsS0FBQThQLDBCQUNBLDhEQUVBLEtBQUEsR0FBQVEsSUFBQSxFQUFBQSxHQUFBRCxJQUFBL1EsT0FBQWdSLEtBQUEsQ0FDQSxHQUFBckksSUFBQW9JLElBQUFDLEdBQ0F0USxNQUFBNFAsc0JBQUEzSCxJQUNBK0gsVUFDQWhRLEtBQUE2UCxzQkFBQTVILElBQ0EsZ0ZBRUFBLEtBSUErSCxVQUNBaFEsS0FBQTJQLHNCQUFBMUgsSUFDQSx1RUFDQUEsSUFFQWpJLEtBQUF1USwyQkFBQXRJLE9BU0E5SCxXQUFBc0MsVUFBQVIsU0FBQSxTQUFBdU8sU0FDQVIsV0FDQWhRLEtBQUE4UCwwQkFDQSx3RUFFQTlQLEtBQUF5USw2QkFBQUQsUUFDQSxLQUNBLElBQUEsR0FBQXZJLE1BQUFqSSxNQUFBMlAsc0JBQ0EzUCxLQUFBNFAsc0JBQUEzSCxLQUdBakksS0FBQXVRLDJCQUFBdEksSUFFQSxRQUNBakksS0FBQTBRLGdDQVNBdlEsV0FBQXNDLFVBQUFrTyxjQUFBLFdBQ0EsTUFBQTNRLE1BQUE4UCwyQkFVQTNQLFdBQUFzQyxVQUFBOE4sMkJBQUEsU0FBQXRJLElBQ0FqSSxLQUFBNFAsc0JBQUEzSCxLQUFBLEVBQ0FqSSxLQUFBMlAsc0JBQUExSCxJQUFBakksS0FBQStQLDRCQUNBL1AsS0FBQTZQLHNCQUFBNUgsS0FBQSxHQVNBOUgsV0FBQXNDLFVBQUFnTyw2QkFBQSxTQUFBRCxTQUNBLElBQUEsR0FBQXZJLE1BQUFqSSxNQUFBMlAsc0JBQ0EzUCxLQUFBNFAsc0JBQUEzSCxLQUFBLEVBQ0FqSSxLQUFBNlAsc0JBQUE1SCxLQUFBLENBRUFqSSxNQUFBK1AsMkJBQUFTLFFBQ0F4USxLQUFBOFAsMkJBQUEsR0FRQTNQLFdBQUFzQyxVQUFBaU8sNEJBQUEsV0FDQTFRLEtBQUErUCwyQkFBQSxLQUNBL1AsS0FBQThQLDJCQUFBLEdBSUF0USxPQUFBSixRQUFBZSxhbkJ1aUNHeVEsY0FBYyxLQUFLQyxJQUFJLFNBQVMvUixRQUFRVSxPQUFPSixTb0JyeENsRCxZQWFBLElBQUE0USxXQUFBLFNBQUFjLFVBQUFDLE9BQUFsUyxFQUFBbVMsRUFBQUMsRUFBQUMsRUFBQTVTLEVBQUFVLEdBT0EsSUFBQThSLFVBQUEsQ0FDQSxHQUFBSyxNQUNBLElBQUFDLFNBQUFMLE9BQ0FJLE1BQUEsR0FBQWxTLE9BQ0EscUlBR0EsQ0FDQSxHQUFBb1MsT0FBQXhTLEVBQUFtUyxFQUFBQyxFQUFBQyxFQUFBNVMsRUFBQVUsR0FDQXNTLFNBQUEsQ0FDQUgsT0FBQSxHQUFBbFMsT0FDQSx3QkFDQThSLE9BQUFRLFFBQUEsTUFBQSxXQUFBLE1BQUFGLE1BQUFDLGVBS0EsS0FEQUgsT0FBQUssWUFBQSxFQUNBTCxPQUlBM1IsUUFBQUosUUFBQTRRLGVwQm15Q015QixJQUFJLFNBQVMzUyxRQUFRVSxPQUFPSixTcUJsMENsQyxRQUFBd1AsZ0JBQ0E1TyxLQUFBMFIsUUFBQTFSLEtBQUEwUixZQUNBMVIsS0FBQTJSLGNBQUEzUixLQUFBMlIsZUFBQVAsT0F1UUEsUUFBQVEsWUFBQUMsS0FDQSxNQUFBLGtCQUFBQSxLQUdBLFFBQUFDLFVBQUFELEtBQ0EsTUFBQSxnQkFBQUEsS0FHQSxRQUFBRSxVQUFBRixLQUNBLE1BQUEsZ0JBQUFBLE1BQUEsT0FBQUEsSUFHQSxRQUFBRyxhQUFBSCxLQUNBLE1BQUEsVUFBQUEsSUFsUkFyUyxPQUFBSixRQUFBd1AsYUFHQUEsYUFBQUEsYUFBQUEsYUFFQUEsYUFBQW5NLFVBQUFpUCxRQUFBTixPQUNBeEMsYUFBQW5NLFVBQUFrUCxjQUFBUCxPQUlBeEMsYUFBQXFELG9CQUFBLEdBSUFyRCxhQUFBbk0sVUFBQXlQLGdCQUFBLFNBQUExVCxHQUNBLElBQUFzVCxTQUFBdFQsSUFBQSxFQUFBQSxHQUFBMlQsTUFBQTNULEdBQ0EsS0FBQTRULFdBQUEsOEJBRUEsT0FEQXBTLE1BQUEyUixjQUFBblQsRUFDQXdCLE1BR0E0TyxhQUFBbk0sVUFBQXFNLEtBQUEsU0FBQXpOLE1BQ0EsR0FBQWdSLElBQUFDLFFBQUFwTSxJQUFBbUwsS0FBQXRTLEVBQUF3VCxTQU1BLElBSkF2UyxLQUFBMFIsVUFDQTFSLEtBQUEwUixZQUdBLFVBQUFyUSxRQUNBckIsS0FBQTBSLFFBQUFQLE9BQ0FZLFNBQUEvUixLQUFBMFIsUUFBQVAsU0FBQW5SLEtBQUEwUixRQUFBUCxNQUFBN1IsUUFBQSxDQUVBLEdBREErUyxHQUFBak8sVUFBQSxHQUNBaU8sYUFBQXBULE9BQ0EsS0FBQW9ULEdBRUEsTUFBQUQsV0FBQSx3Q0FNQSxHQUZBRSxRQUFBdFMsS0FBQTBSLFFBQUFyUSxNQUVBMlEsWUFBQU0sU0FDQSxPQUFBLENBRUEsSUFBQVYsV0FBQVUsU0FDQSxPQUFBbE8sVUFBQTlFLFFBRUEsSUFBQSxHQUNBZ1QsUUFBQWpULEtBQUFXLEtBQ0EsTUFDQSxLQUFBLEdBQ0FzUyxRQUFBalQsS0FBQVcsS0FBQW9FLFVBQUEsR0FDQSxNQUNBLEtBQUEsR0FDQWtPLFFBQUFqVCxLQUFBVyxLQUFBb0UsVUFBQSxHQUFBQSxVQUFBLEdBQ0EsTUFFQSxTQUdBLElBRkE4QixJQUFBOUIsVUFBQTlFLE9BQ0ErUixLQUFBLEdBQUFtQixPQUFBdE0sSUFBQSxHQUNBbkgsRUFBQSxFQUFBbUgsSUFBQW5ILEVBQUFBLElBQ0FzUyxLQUFBdFMsRUFBQSxHQUFBcUYsVUFBQXJGLEVBQ0F1VCxTQUFBbk8sTUFBQW5FLEtBQUFxUixVQUVBLElBQUFVLFNBQUFPLFNBQUEsQ0FHQSxJQUZBcE0sSUFBQTlCLFVBQUE5RSxPQUNBK1IsS0FBQSxHQUFBbUIsT0FBQXRNLElBQUEsR0FDQW5ILEVBQUEsRUFBQW1ILElBQUFuSCxFQUFBQSxJQUNBc1MsS0FBQXRTLEVBQUEsR0FBQXFGLFVBQUFyRixFQUlBLEtBRkF3VCxVQUFBRCxRQUFBRyxRQUNBdk0sSUFBQXFNLFVBQUFqVCxPQUNBUCxFQUFBLEVBQUFtSCxJQUFBbkgsRUFBQUEsSUFDQXdULFVBQUF4VCxHQUFBb0YsTUFBQW5FLEtBQUFxUixNQUdBLE9BQUEsR0FHQXpDLGFBQUFuTSxVQUFBaVEsWUFBQSxTQUFBclIsS0FBQXNSLFVBQ0EsR0FBQUMsRUFFQSxLQUFBaEIsV0FBQWUsVUFDQSxLQUFBUCxXQUFBLDhCQXVCQSxJQXJCQXBTLEtBQUEwUixVQUNBMVIsS0FBQTBSLFlBSUExUixLQUFBMFIsUUFBQW1CLGFBQ0E3UyxLQUFBOE8sS0FBQSxjQUFBek4sS0FDQXVRLFdBQUFlLFNBQUFBLFVBQ0FBLFNBQUFBLFNBQUFBLFVBRUEzUyxLQUFBMFIsUUFBQXJRLE1BR0EwUSxTQUFBL1IsS0FBQTBSLFFBQUFyUSxPQUVBckIsS0FBQTBSLFFBQUFyUSxNQUFBMkIsS0FBQTJQLFVBR0EzUyxLQUFBMFIsUUFBQXJRLE9BQUFyQixLQUFBMFIsUUFBQXJRLE1BQUFzUixVQU5BM1MsS0FBQTBSLFFBQUFyUSxNQUFBc1IsU0FTQVosU0FBQS9SLEtBQUEwUixRQUFBclEsU0FBQXJCLEtBQUEwUixRQUFBclEsTUFBQXlSLE9BQUEsQ0FDQSxHQUFBRixFQUlBQSxHQUhBWixZQUFBaFMsS0FBQTJSLGVBR0EvQyxhQUFBcUQsb0JBRkFqUyxLQUFBMlIsY0FLQWlCLEdBQUFBLEVBQUEsR0FBQTVTLEtBQUEwUixRQUFBclEsTUFBQS9CLE9BQUFzVCxJQUNBNVMsS0FBQTBSLFFBQUFyUSxNQUFBeVIsUUFBQSxFQUNBQyxRQUFBNUIsTUFBQSxtSUFHQW5SLEtBQUEwUixRQUFBclEsTUFBQS9CLFFBQ0Esa0JBQUF5VCxTQUFBQyxPQUVBRCxRQUFBQyxTQUtBLE1BQUFoVCxPQUdBNE8sYUFBQW5NLFVBQUF1TSxHQUFBSixhQUFBbk0sVUFBQWlRLFlBRUE5RCxhQUFBbk0sVUFBQXdRLEtBQUEsU0FBQTVSLEtBQUFzUixVQU1BLFFBQUFPLEtBQ0FsVCxLQUFBaVAsZUFBQTVOLEtBQUE2UixHQUVBQyxRQUNBQSxPQUFBLEVBQ0FSLFNBQUF4TyxNQUFBbkUsS0FBQW9FLFlBVkEsSUFBQXdOLFdBQUFlLFVBQ0EsS0FBQVAsV0FBQSw4QkFFQSxJQUFBZSxRQUFBLENBY0EsT0FIQUQsR0FBQVAsU0FBQUEsU0FDQTNTLEtBQUFnUCxHQUFBM04sS0FBQTZSLEdBRUFsVCxNQUlBNE8sYUFBQW5NLFVBQUF3TSxlQUFBLFNBQUE1TixLQUFBc1IsVUFDQSxHQUFBUyxNQUFBQyxTQUFBL1QsT0FBQVAsQ0FFQSxLQUFBNlMsV0FBQWUsVUFDQSxLQUFBUCxXQUFBLDhCQUVBLEtBQUFwUyxLQUFBMFIsVUFBQTFSLEtBQUEwUixRQUFBclEsTUFDQSxNQUFBckIsS0FNQSxJQUpBb1QsS0FBQXBULEtBQUEwUixRQUFBclEsTUFDQS9CLE9BQUE4VCxLQUFBOVQsT0FDQStULFNBQUEsR0FFQUQsT0FBQVQsVUFDQWYsV0FBQXdCLEtBQUFULFdBQUFTLEtBQUFULFdBQUFBLGVBQ0EzUyxNQUFBMFIsUUFBQXJRLE1BQ0FyQixLQUFBMFIsUUFBQXpDLGdCQUNBalAsS0FBQThPLEtBQUEsaUJBQUF6TixLQUFBc1IsY0FFQSxJQUFBWixTQUFBcUIsTUFBQSxDQUNBLElBQUFyVSxFQUFBTyxPQUFBUCxJQUFBLEdBQ0EsR0FBQXFVLEtBQUFyVSxLQUFBNFQsVUFDQVMsS0FBQXJVLEdBQUE0VCxVQUFBUyxLQUFBclUsR0FBQTRULFdBQUFBLFNBQUEsQ0FDQVUsU0FBQXRVLENBQ0EsT0FJQSxHQUFBLEVBQUFzVSxTQUNBLE1BQUFyVCxLQUVBLEtBQUFvVCxLQUFBOVQsUUFDQThULEtBQUE5VCxPQUFBLFFBQ0FVLE1BQUEwUixRQUFBclEsT0FFQStSLEtBQUFFLE9BQUFELFNBQUEsR0FHQXJULEtBQUEwUixRQUFBekMsZ0JBQ0FqUCxLQUFBOE8sS0FBQSxpQkFBQXpOLEtBQUFzUixVQUdBLE1BQUEzUyxPQUdBNE8sYUFBQW5NLFVBQUE4USxtQkFBQSxTQUFBbFMsTUFDQSxHQUFBNEIsS0FBQXNQLFNBRUEsS0FBQXZTLEtBQUEwUixRQUNBLE1BQUExUixLQUdBLEtBQUFBLEtBQUEwUixRQUFBekMsZUFLQSxNQUpBLEtBQUE3SyxVQUFBOUUsT0FDQVUsS0FBQTBSLFdBQ0ExUixLQUFBMFIsUUFBQXJRLGFBQ0FyQixNQUFBMFIsUUFBQXJRLE1BQ0FyQixJQUlBLElBQUEsSUFBQW9FLFVBQUE5RSxPQUFBLENBQ0EsSUFBQTJELE1BQUFqRCxNQUFBMFIsUUFDQSxtQkFBQXpPLEtBQ0FqRCxLQUFBdVQsbUJBQUF0USxJQUlBLE9BRkFqRCxNQUFBdVQsbUJBQUEsa0JBQ0F2VCxLQUFBMFIsV0FDQTFSLEtBS0EsR0FGQXVTLFVBQUF2UyxLQUFBMFIsUUFBQXJRLE1BRUF1USxXQUFBVyxXQUNBdlMsS0FBQWlQLGVBQUE1TixLQUFBa1IsZUFHQSxNQUFBQSxVQUFBalQsUUFDQVUsS0FBQWlQLGVBQUE1TixLQUFBa1IsVUFBQUEsVUFBQWpULE9BQUEsR0FJQSxjQUZBVSxNQUFBMFIsUUFBQXJRLE1BRUFyQixNQUdBNE8sYUFBQW5NLFVBQUE4UCxVQUFBLFNBQUFsUixNQUNBLEdBQUFtUyxJQU9BLE9BSEFBLEtBSEF4VCxLQUFBMFIsU0FBQTFSLEtBQUEwUixRQUFBclEsTUFFQXVRLFdBQUE1UixLQUFBMFIsUUFBQXJRLFFBQ0FyQixLQUFBMFIsUUFBQXJRLE9BRUFyQixLQUFBMFIsUUFBQXJRLE1BQUFvUixZQUlBN0QsYUFBQTZFLGNBQUEsU0FBQUMsUUFBQXJTLE1BQ0EsR0FBQW1TLElBT0EsT0FIQUEsS0FIQUUsUUFBQWhDLFNBQUFnQyxRQUFBaEMsUUFBQXJRLE1BRUF1USxXQUFBOEIsUUFBQWhDLFFBQUFyUSxPQUNBLEVBRUFxUyxRQUFBaEMsUUFBQXJRLE1BQUEvQixPQUpBLFFyQmczQ01xVSxJQUFJLFNBQVM3VSxRQUFRVSxPQUFPSixTQUNsQ2dGLFVBQVUsR0FBRyxJQUFJLEdBQUdELE1BQU0vRSxRQUFRZ0YsYUFDL0J3TSxjQUFjLEdBQUduQixJQUFNLEtBQUttRSxJQUFJLFNBQVM5VSxRQUFRVSxPQUFPSixTQUMzRGdGLFVBQVUsR0FBRyxJQUFJLEdBQUdELE1BQU0vRSxRQUFRZ0YsYUFDL0JxTCxJQUFNLEtBQUtvRSxJQUFJLFNBQVMvVSxRQUFRVSxPQUFPSixTc0Ixb0QxQyxZQUVBLFNBQUEwVSxVQUFBdk0sS0FDQSxHQUFBLE1BQUFBLElBQ0EsS0FBQSxJQUFBNkssV0FBQSx3REFHQSxPQUFBMkIsUUFBQXhNLEtBR0EvSCxPQUFBSixRQUFBMlUsT0FBQW5MLFFBQUEsU0FBQW9MLE9BQUFDLFFBS0EsSUFBQSxHQUpBQyxNQUNBQyxLQUNBQyxHQUFBTixTQUFBRSxRQUVBdFYsRUFBQSxFQUFBQSxFQUFBMEYsVUFBQTlFLE9BQUFaLElBQUEsQ0FDQXdWLEtBQUE5UCxVQUFBMUYsR0FDQXlWLEtBQUFKLE9BQUFJLEtBQUFKLE9BQUFHLE1BRUEsS0FBQSxHQUFBblYsR0FBQSxFQUFBQSxFQUFBb1YsS0FBQTdVLE9BQUFQLElBQ0FxVixHQUFBRCxLQUFBcFYsSUFBQW1WLEtBQUFDLEtBQUFwVixJQUlBLE1BQUFxVixldEI4b0RXLEVBQUUiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbigpIHtcbiAgdmFyIEdhbWVDb21wb25lbnQsIFZpZXdDb250cm9sbGVyO1xuXG4gIEdhbWVDb21wb25lbnQgPSByZXF1aXJlKCcuL2NvbXBvbmVudHMvR2FtZUNvbXBvbmVudC5jb2ZmZWUnKTtcblxuICBWaWV3Q29udHJvbGxlciA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoR2FtZUNvbXBvbmVudCwgbnVsbCk7XG5cbiAgUmVhY3QucmVuZGVyKFZpZXdDb250cm9sbGVyLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluZXN3ZWVwZXInKSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLG51bGwsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cy5EaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9saWIvRGlzcGF0Y2hlcicpXG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBBcHBEaXNwYXRjaGVyLCBEaXNwYXRjaGVyLCBNb2RhbEFjdGlvbnMsIE1vZGFsU3RvcmUsIFRpbGVTdG9yZSwgY2hhbmdlTW9kYWwsIG9uVGlsZXNDaGFuZ2U7XG5cbiAgRGlzcGF0Y2hlciA9IHJlcXVpcmUoJ0ZsdXgnKS5EaXNwYXRjaGVyO1xuXG4gIEFwcERpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcigpO1xuXG4gIFRpbGVTdG9yZSA9IHJlcXVpcmUoJy4vc3RvcmVzL1RpbGVTdG9yZS5jb2ZmZWUnKTtcblxuICBNb2RhbFN0b3JlID0gcmVxdWlyZSgnLi9zdG9yZXMvTW9kYWxTdG9yZS5jb2ZmZWUnKTtcblxuICBNb2RhbEFjdGlvbnMgPSByZXF1aXJlKCcuL2FjdGlvbnMvTW9kYWxBY3Rpb25zLmNvZmZlZScpO1xuXG4gIGNoYW5nZU1vZGFsID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICghbmFtZSkge1xuICAgICAgTW9kYWxTdG9yZS5yZXNldCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBNb2RhbFN0b3JlLnRvZ2dsZShuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIE1vZGFsU3RvcmUuZW1pdENoYW5nZSgpO1xuICB9O1xuXG4gIG9uVGlsZXNDaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5mbztcbiAgICBpbmZvID0gVGlsZVN0b3JlLmdldEluZm8oKTtcbiAgICByZXR1cm4gVGlsZVN0b3JlLmVtaXRDaGFuZ2UoKTtcbiAgfTtcblxuICBBcHBEaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIHRpbGU7XG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdUSUxFX0ZMQUdfVE9HR0xFJzpcbiAgICAgICAgdGlsZSA9IFRpbGVTdG9yZS5nZXQoe1xuICAgICAgICAgIHVpZDogZXZlbnQudWlkXG4gICAgICAgIH0pO1xuICAgICAgICB0aWxlLnRvZ2dsZUZsYWcoKTtcbiAgICAgICAgcmV0dXJuIG9uVGlsZXNDaGFuZ2UoKTtcbiAgICAgIGNhc2UgJ1RJTEVfQ0xFQVInOlxuICAgICAgICB0aWxlID0gVGlsZVN0b3JlLmdldCh7XG4gICAgICAgICAgdWlkOiBldmVudC51aWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRpbGUuY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIG9uVGlsZXNDaGFuZ2UoKTtcbiAgICAgIGNhc2UgJ1RJTEVTX0NMRUFSX1NBRkVfUkFORE9NJzpcbiAgICAgICAgdGlsZSA9IFRpbGVTdG9yZS5yYW5kb21TYWZlVGlsZSgpO1xuICAgICAgICBpZiAodGlsZSkge1xuICAgICAgICAgIHRpbGUuY2xlYXIoKTtcbiAgICAgICAgICByZXR1cm4gb25UaWxlc0NoYW5nZSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnVElMRVNfTkVXX0dBTUUnOlxuICAgICAgICBUaWxlU3RvcmUubmV3R2FtZSgxMCwgMTAsIDI1KTtcbiAgICAgICAgb25UaWxlc0NoYW5nZSgpO1xuICAgICAgICByZXR1cm4gY2hhbmdlTW9kYWwoJ25ld0dhbWUnKTtcbiAgICAgIGNhc2UgJ01PREFMX1RPR0dMRSc6XG4gICAgICAgIE1vZGFsU3RvcmUudG9nZ2xlKGV2ZW50Lm5hbWUpO1xuICAgICAgICByZXR1cm4gTW9kYWxTdG9yZS5lbWl0Q2hhbmdlKCk7XG4gICAgICBjYXNlICdNT0RBTF9SRVNFVCc6XG4gICAgICAgIHJldHVybiBjaGFuZ2VNb2RhbCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBBcHBEaXNwYXRjaGVyO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgRGlzcGF0Y2hlcjtcblxuICBEaXNwYXRjaGVyID0gcmVxdWlyZSgnLi4vRGlzcGF0Y2hlci5jb2ZmZWUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICB0b2dnbGU6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ01PREFMX1RPR0dMRScsXG4gICAgICAgIG5hbWU6IG5hbWVcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnTU9EQUxfUkVTRVQnXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBEaXNwYXRjaGVyO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9EaXNwYXRjaGVyLmNvZmZlZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIHRvZ2dsZUZsYWc6IGZ1bmN0aW9uKHVpZCkge1xuICAgICAgcmV0dXJuIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnVElMRV9GTEFHX1RPR0dMRScsXG4gICAgICAgIHVpZDogdWlkXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNsZWFyOiBmdW5jdGlvbih1aWQpIHtcbiAgICAgIHJldHVybiBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ1RJTEVfQ0xFQVInLFxuICAgICAgICB1aWQ6IHVpZFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgRGlzcGF0Y2hlcjtcblxuICBEaXNwYXRjaGVyID0gcmVxdWlyZSgnLi4vRGlzcGF0Y2hlci5jb2ZmZWUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBjbGVhclNhZmVSYW5kb21UaWxlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ1RJTEVTX0NMRUFSX1NBRkVfUkFORE9NJ1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBuZXdHYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ1RJTEVTX05FV19HQU1FJ1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgTW9kYWxzQ29sbGVjdGlvbjtcblxuICBNb2RhbHNDb2xsZWN0aW9uID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIE1vZGFsc0NvbGxlY3Rpb24oKSB7XG4gICAgICB0aGlzLnNob3cgPSB7fTtcbiAgICB9XG5cbiAgICBNb2RhbHNDb2xsZWN0aW9uLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihmaWxlTmFtZSkge1xuICAgICAgdGhpcy5zaG93W2ZpbGVOYW1lXSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIE1vZGFsc0NvbGxlY3Rpb24ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBpc0JlaW5nU2hvd24sIG1vZGFsTmFtZSwgcmVmLCByZXN1bHRzO1xuICAgICAgcmVmID0gdGhpcy5zaG93O1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChtb2RhbE5hbWUgaW4gcmVmKSB7XG4gICAgICAgIGlzQmVpbmdTaG93biA9IHJlZlttb2RhbE5hbWVdO1xuICAgICAgICBpZiAobW9kYWxOYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuc2hvd1ttb2RhbE5hbWVdID0gIWlzQmVpbmdTaG93bik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGlzQmVpbmdTaG93biA9IGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1vZGFsc0NvbGxlY3Rpb24ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIga2V5LCByZWYsIHNob3dNb2RhbDtcbiAgICAgIHJlZiA9IHRoaXMuc2hvdztcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICBzaG93TW9kYWwgPSByZWZba2V5XTtcbiAgICAgICAgdGhpcy5zaG93W2tleV0gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICByZXR1cm4gTW9kYWxzQ29sbGVjdGlvbjtcblxuICB9KSgpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gTW9kYWxzQ29sbGVjdGlvbjtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIFRpbGVNb2RlbCwgVGlsZXNDb2xsZWN0aW9uLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgVGlsZU1vZGVsID0gcmVxdWlyZSgnLi4vbW9kZWxzL1RpbGVNb2RlbC5jb2ZmZWUnKTtcblxuICBUaWxlc0NvbGxlY3Rpb24gPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gVGlsZXNDb2xsZWN0aW9uKCkge1xuICAgICAgdmFyIE1vZGVsLCBjb2xsZWN0aW9uO1xuICAgICAgdGhpcy5hbGwgPSBbXTtcbiAgICAgIGNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgdGhpcy5tb2RlbCA9IE1vZGVsID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICAgICAgZXh0ZW5kKE1vZGVsLCBzdXBlckNsYXNzKTtcblxuICAgICAgICBmdW5jdGlvbiBNb2RlbCgpIHtcbiAgICAgICAgICByZXR1cm4gTW9kZWwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICBNb2RlbC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBNb2RlbC5fX3N1cGVyX18uY2xlYXIuY2FsbCh0aGlzKTtcbiAgICAgICAgICBjb2xsZWN0aW9uLmNsZWFyTmVpZ2hib3JzKHRoaXMpO1xuICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uLm1vdmVVcGRhdGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBNb2RlbC5wcm90b3R5cGUudG9nZ2xlRmxhZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIE1vZGVsLl9fc3VwZXJfXy50b2dnbGVGbGFnLmNhbGwodGhpcyk7XG4gICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb24ubW92ZVVwZGF0ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBNb2RlbDtcblxuICAgICAgfSkoVGlsZU1vZGVsKTtcbiAgICB9XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLm5ld0dhbWUgPSBmdW5jdGlvbih4LCB5LCBtaW5lcykge1xuICAgICAgdmFyIGF0dHJzLCBpLCBqLCBrLCBtaW5lTnVtLCByZWYsIHJlZjEsIHJlZjIsIHRpbGU7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICB0aGlzLnNpemVYID0geDtcbiAgICAgIHRoaXMuc2l6ZVkgPSB5O1xuICAgICAgdGhpcy5udW1PZk1pbmVzID0gbWluZXM7XG4gICAgICBmb3IgKHkgPSBpID0gMCwgcmVmID0gdGhpcy5zaXplWSAtIDE7IDAgPD0gcmVmID8gaSA8PSByZWYgOiBpID49IHJlZjsgeSA9IDAgPD0gcmVmID8gKytpIDogLS1pKSB7XG4gICAgICAgIGZvciAoeCA9IGogPSAwLCByZWYxID0gdGhpcy5zaXplWCAtIDE7IDAgPD0gcmVmMSA/IGogPD0gcmVmMSA6IGogPj0gcmVmMTsgeCA9IDAgPD0gcmVmMSA/ICsraiA6IC0taikge1xuICAgICAgICAgIGF0dHJzID0ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHlcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMuYWRkKGF0dHJzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChtaW5lTnVtID0gayA9IDEsIHJlZjIgPSB0aGlzLm51bU9mTWluZXM7IDEgPD0gcmVmMiA/IGsgPD0gcmVmMiA6IGsgPj0gcmVmMjsgbWluZU51bSA9IDEgPD0gcmVmMiA/ICsrayA6IC0taykge1xuICAgICAgICB0aWxlID0gdGhpcy5yYW5kb21TYWZlVGlsZSgpO1xuICAgICAgICB0aWxlLm1vZGVsLmlzTWluZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnRhbGx5TWluZXMoKTtcbiAgICAgIHJldHVybiB0aGlzLmdhbWVVcGRhdGUoKTtcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5ub01pbmVGaXJzdENsaWNrID0gZnVuY3Rpb24odGlsZSkge1xuICAgICAgaWYgKHRoaXMubnVtT2ZDbGVhcnMgPT09IDAgJiYgdGlsZS5tb2RlbC5pc01pbmUgPT09IHRydWUpIHtcbiAgICAgICAgdGlsZS5tb2RlbC5pc01pbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yYW5kb21TYWZlVGlsZSgpLm1vZGVsLmlzTWluZSA9IHRydWU7XG4gICAgICAgIHRoaXMudGFsbHlNaW5lcygpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgIHZhciB0aWxlO1xuICAgICAgdGlsZSA9IG5ldyB0aGlzLm1vZGVsKG1vZGVsKTtcbiAgICAgIHRoaXMuYWxsLnB1c2godGlsZSk7XG4gICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5hbGwgPSBbXTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLnJhbmRvbVNhZmVUaWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZmluZEF0dHJzLCByYW5kb21JbmRleCwgc2FmZVRpbGVzO1xuICAgICAgZmluZEF0dHJzID0ge1xuICAgICAgICBpc0NsZWFyOiBmYWxzZSxcbiAgICAgICAgaXNNaW5lOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIHNhZmVUaWxlcyA9IHRoaXMuZ2V0QWxsKGZpbmRBdHRycyk7XG4gICAgICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNhZmVUaWxlcy5sZW5ndGgpO1xuICAgICAgcmV0dXJuIHNhZmVUaWxlc1tyYW5kb21JbmRleF07XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUudGFsbHlNaW5lcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFkamFjZW50VGlsZSwgaSwgaiwgbGVuLCBsZW4xLCBuZWlnaGJvckF0dHJzLCBuZWlnaGJvck1pbmUsIG5laWdoYm9yTWluZXMsIG5laWdoYm9yWCwgbmVpZ2hib3JZLCByZWYsIHJlZjEsIHJlc3VsdHMsIHRpbGU7XG4gICAgICByZWYgPSB0aGlzLmFsbDtcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aWxlID0gcmVmW2ldO1xuICAgICAgICBuZWlnaGJvck1pbmVzID0gMDtcbiAgICAgICAgcmVmMSA9IHRpbGUuZ2V0QWRqYWNlbnRUaWxlcygpO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICBhZGphY2VudFRpbGUgPSByZWYxW2pdO1xuICAgICAgICAgIG5laWdoYm9yWCA9IHRpbGUubW9kZWwueCArIGFkamFjZW50VGlsZVswXTtcbiAgICAgICAgICBuZWlnaGJvclkgPSB0aWxlLm1vZGVsLnkgKyBhZGphY2VudFRpbGVbMV07XG4gICAgICAgICAgbmVpZ2hib3JBdHRycyA9IHtcbiAgICAgICAgICAgIGlzTWluZTogdHJ1ZSxcbiAgICAgICAgICAgIHg6IG5laWdoYm9yWCxcbiAgICAgICAgICAgIHk6IG5laWdoYm9yWVxuICAgICAgICAgIH07XG4gICAgICAgICAgbmVpZ2hib3JNaW5lID0gdGhpcy5nZXQobmVpZ2hib3JBdHRycyk7XG4gICAgICAgICAgaWYgKG5laWdoYm9yTWluZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBuZWlnaGJvck1pbmVzKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aWxlLm1vZGVsLmFkamFjZW50TWluZXMgPSBuZWlnaGJvck1pbmVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdhbWVVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBsZW4sIHJlZiwgdGlsZTtcbiAgICAgIHRoaXMueCA9IE1hdGgubWF4LmFwcGx5KHRoaXMsIHRoaXMuYWxsLm1hcChmdW5jdGlvbih0aWxlKSB7XG4gICAgICAgIHJldHVybiB0aWxlLm1vZGVsLng7XG4gICAgICB9KSk7XG4gICAgICB0aGlzLnkgPSBNYXRoLm1heC5hcHBseSh0aGlzLCB0aGlzLmFsbC5tYXAoZnVuY3Rpb24odGlsZSkge1xuICAgICAgICByZXR1cm4gdGlsZS5tb2RlbC55O1xuICAgICAgfSkpO1xuICAgICAgdGhpcy54ID0gdGhpcy54LS07XG4gICAgICB0aGlzLnkgPSB0aGlzLnktLTtcbiAgICAgIHRoaXMubnVtT2ZNaW5lcyA9IDA7XG4gICAgICByZWYgPSB0aGlzLmFsbDtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aWxlID0gcmVmW2ldO1xuICAgICAgICBpZiAodGlsZS5tb2RlbC5pc01pbmUgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLm51bU9mTWluZXMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMubW92ZVVwZGF0ZSgpO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLm1vdmVVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBsZW4sIHJlZiwgdGlsZTtcbiAgICAgIHRoaXMubG9zcyA9IGZhbHNlO1xuICAgICAgdGhpcy53aW4gPSBmYWxzZTtcbiAgICAgIHRoaXMubnVtT2ZDbGVhcnMgPSAwO1xuICAgICAgdGhpcy5udW1PZkZsYWdzID0gMDtcbiAgICAgIHJlZiA9IHRoaXMuYWxsO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRpbGUgPSByZWZbaV07XG4gICAgICAgIGlmICh0aWxlLm1vZGVsLmlzQ2xlYXIgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLm51bU9mQ2xlYXJzKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGUubW9kZWwuaXNGbGFnZ2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5udW1PZkZsYWdzKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGUubW9kZWwuaXNNaW5lID09PSB0cnVlICYmIHRpbGUubW9kZWwuaXNDbGVhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMubG9zcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxvc3MgPT09IGZhbHNlICYmIHRoaXMuYWxsLmxlbmd0aCAtIHRoaXMubnVtT2ZNaW5lcyAtIHRoaXMubnVtT2ZDbGVhcnMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2luID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5jbGVhck5laWdoYm9ycyA9IGZ1bmN0aW9uKHRpbGUpIHtcbiAgICAgIHZhciBhZGphY2VudFRpbGUsIGksIGxlbiwgbmVpZ2hib3IsIHJlZiwgcmVzdWx0cywgc2hvdWxkQ2xlYXJOZWlnaGJvciwgc2hvdWxkQ2xlYXJOZWlnaGJvcnM7XG4gICAgICBzaG91bGRDbGVhck5laWdoYm9ycyA9IHRpbGUubW9kZWwuYWRqYWNlbnRNaW5lcyA9PT0gMCAmJiB0aWxlLm1vZGVsLmlzTWluZSA9PT0gZmFsc2U7XG4gICAgICBpZiAoc2hvdWxkQ2xlYXJOZWlnaGJvcnMpIHtcbiAgICAgICAgcmVmID0gdGlsZS5nZXRBZGphY2VudFRpbGVzKCk7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgYWRqYWNlbnRUaWxlID0gcmVmW2ldO1xuICAgICAgICAgIG5laWdoYm9yID0gdGhpcy5nZXQoe1xuICAgICAgICAgICAgeDogdGlsZS5tb2RlbC54ICsgYWRqYWNlbnRUaWxlWzBdLFxuICAgICAgICAgICAgeTogdGlsZS5tb2RlbC55ICsgYWRqYWNlbnRUaWxlWzFdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2hvdWxkQ2xlYXJOZWlnaGJvciA9IG5laWdoYm9yICYmIG5laWdoYm9yLm1vZGVsLmlzQ2xlYXIgPT09IGZhbHNlICYmIG5laWdoYm9yLm1vZGVsLmlzTWluZSA9PT0gZmFsc2U7XG4gICAgICAgICAgaWYgKHNob3VsZENsZWFyTmVpZ2hib3IpIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChuZWlnaGJvci5jbGVhcigpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHZvaWQgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRBbGwoYXR0cnMpWzBdO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICB2YXIgaSwga2V5LCBsZW4sIG1hdGNoZXMsIG51bU9mQXR0cnMsIG51bU9mTWF0Y2hlZEF0dHJzLCByZWYsIHRpbGUsIHZhbDtcbiAgICAgIG1hdGNoZXMgPSBbXTtcbiAgICAgIGlmICghYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsO1xuICAgICAgfVxuICAgICAgcmVmID0gdGhpcy5hbGw7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGlsZSA9IHJlZltpXTtcbiAgICAgICAgbnVtT2ZBdHRycyA9IDA7XG4gICAgICAgIG51bU9mTWF0Y2hlZEF0dHJzID0gMDtcbiAgICAgICAgZm9yIChrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICB2YWwgPSBhdHRyc1trZXldO1xuICAgICAgICAgIG51bU9mQXR0cnMrKztcbiAgICAgICAgICBpZiAodGlsZS5tb2RlbFtrZXldID09PSB2YWwpIHtcbiAgICAgICAgICAgIG51bU9mTWF0Y2hlZEF0dHJzKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChudW1PZk1hdGNoZWRBdHRycyA9PT0gbnVtT2ZBdHRycykge1xuICAgICAgICAgIG1hdGNoZXMucHVzaCh0aWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgfTtcblxuICAgIHJldHVybiBUaWxlc0NvbGxlY3Rpb247XG5cbiAgfSkoKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFRpbGVzQ29sbGVjdGlvbjtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIERhc2hib2FyZCwgTW9kYWxBY3Rpb25zLCBSLCBUaWxlc0FjdGlvbnM7XG5cbiAgTW9kYWxBY3Rpb25zID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9Nb2RhbEFjdGlvbnMuY29mZmVlJyk7XG5cbiAgVGlsZXNBY3Rpb25zID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9UaWxlc0FjdGlvbnMuY29mZmVlJyk7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBEYXNoYm9hcmQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdEYXNoYm9hcmQnLFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gUi5kaXYoe1xuICAgICAgICBpZDogJ2Rhc2hib2FyZCdcbiAgICAgIH0sIFtcbiAgICAgICAgUi5kaXYoe1xuICAgICAgICAgIGtleTogJ25ldy1nYW1lJyxcbiAgICAgICAgICBjbGFzc05hbWU6ICduZXctZ2FtZSBidXR0b24nLFxuICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1vZGFsQWN0aW9ucy50b2dnbGUoJ25ld0dhbWUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sICduZXcgZ2FtZScpLCBSLmRpdih7XG4gICAgICAgICAga2V5OiAnc2VsZWN0LXRpbGUnLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ3NlbGVjdC10aWxlIGJ1dHRvbicsXG4gICAgICAgICAgb25DbGljazogVGlsZXNBY3Rpb25zLmNsZWFyU2FmZVJhbmRvbVRpbGVcbiAgICAgICAgfSwgJ2NsZWFyIGEgc2FmZSB0aWxlJyksIFIuZGl2KHtcbiAgICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMnLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2luc3RydWN0aW9ucyBidXR0b24nLFxuICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1vZGFsQWN0aW9ucy50b2dnbGUoJ2luc3RydWN0aW9ucycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgJ2luc3RydWN0aW9ucycpXG4gICAgICBdKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gRGFzaGJvYXJkO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgRGFzaGJvYXJkQ29tcG9uZW50LCBHYW1lLCBJbmZvQ29tcG9uZW50LCBNb2RhbEFjdGlvbnMsIE1vZGFsT3ZlcmxheUNvbXBvbmVudCwgTW9kYWxTdG9yZSwgUiwgVGlsZVN0b3JlLCBUaWxlc0NvbXBvbmVudCwgYXNzaWduLCBnZXRNb2RhbFN0b3JlU3RhdGUsIGdldFN0YXRlLCBnZXRUaWxlU3RvcmVTdGF0ZSwgcXVldWU7XG5cbiAgVGlsZVN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL1RpbGVTdG9yZS5jb2ZmZWUnKTtcblxuICBNb2RhbFN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL01vZGFsU3RvcmUuY29mZmVlJyk7XG5cbiAgTW9kYWxBY3Rpb25zID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9Nb2RhbEFjdGlvbnMuY29mZmVlJyk7XG5cbiAgVGlsZXNDb21wb25lbnQgPSByZXF1aXJlKCcuL1RpbGVzQ29tcG9uZW50LmNvZmZlZScpO1xuXG4gIEluZm9Db21wb25lbnQgPSByZXF1aXJlKCcuL0luZm9Db21wb25lbnQuY29mZmVlJyk7XG5cbiAgRGFzaGJvYXJkQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9EYXNoYm9hcmRDb21wb25lbnQuY29mZmVlJyk7XG5cbiAgTW9kYWxPdmVybGF5Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9tb2RhbHMvTW9kYWxPdmVybGF5Q29tcG9uZW50LmNvZmZlZScpO1xuXG4gIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxuICBSID0gUmVhY3QuRE9NO1xuXG4gIHF1ZXVlID0gZnVuY3Rpb24oZm4pIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChmbiwgMCk7XG4gIH07XG5cbiAgZ2V0U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYXNzaWduKHt9LCBnZXRUaWxlU3RvcmVTdGF0ZSgpLCBnZXRNb2RhbFN0b3JlU3RhdGUoKSk7XG4gIH07XG5cbiAgZ2V0VGlsZVN0b3JlU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWxsOiBUaWxlU3RvcmUuZ2V0QWxsKCksXG4gICAgICBpbmZvOiBUaWxlU3RvcmUuZ2V0SW5mbygpXG4gICAgfTtcbiAgfTtcblxuICBnZXRNb2RhbFN0b3JlU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbW9kYWxzOiBNb2RhbFN0b3JlLmdldEFsbCgpXG4gICAgfTtcbiAgfTtcblxuICBHYW1lID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnR2FtZScsXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBnZXRTdGF0ZSgpO1xuICAgIH0sXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgVGlsZVN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMuX29uVGlsZVN0b3JlQ2hhbmdlKTtcbiAgICAgIHJldHVybiBNb2RhbFN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMuX29uTW9kYWxTdG9yZUNoYW5nZSk7XG4gICAgfSxcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgICBUaWxlU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5fb25UaWxlU3RvcmVDaGFuZ2UpO1xuICAgICAgcmV0dXJuIE1vZGFsU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5fb25Nb2RhbFN0b3JlQ2hhbmdlKTtcbiAgICB9LFxuICAgIF9vblRpbGVTdG9yZUNoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGlsZXNTdGF0ZTtcbiAgICAgIHRpbGVzU3RhdGUgPSBnZXRUaWxlU3RvcmVTdGF0ZSgpO1xuICAgICAgaWYgKHRpbGVzU3RhdGUuaW5mby53aW4gfHwgdGlsZXNTdGF0ZS5pbmZvLmxvc3MpIHtcbiAgICAgICAgcXVldWUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIE1vZGFsQWN0aW9ucy50b2dnbGUoJ25ld0dhbWUnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh0aWxlc1N0YXRlKTtcbiAgICB9LFxuICAgIF9vbk1vZGFsU3RvcmVDaGFuZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoZ2V0TW9kYWxTdG9yZVN0YXRlKCkpO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBib2FyZFdyYXBwcGVyLCBkYXNoYm9hcmQsIGluZm8sIG92ZXJsYXlzLCB0aWxlcztcbiAgICAgIGluZm8gPSBSZWFjdC5jcmVhdGVFbGVtZW50KEluZm9Db21wb25lbnQsIHtcbiAgICAgICAga2V5OiAnaW5mbycsXG4gICAgICAgIGluZm86IHRoaXMuc3RhdGUuaW5mb1xuICAgICAgfSk7XG4gICAgICB0aWxlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGlsZXNDb21wb25lbnQsIHtcbiAgICAgICAga2V5OiAndGlsZXMnLFxuICAgICAgICB0aWxlczogdGhpcy5zdGF0ZS5hbGxcbiAgICAgIH0pO1xuICAgICAgYm9hcmRXcmFwcHBlciA9IFIuZGl2KHtcbiAgICAgICAgaWQ6ICdib2FyZC13cmFwcHBlcicsXG4gICAgICAgIGtleTogJ2JvYXJkLXdyYXBwcGVyJ1xuICAgICAgfSwgW2luZm8sIHRpbGVzXSk7XG4gICAgICBkYXNoYm9hcmQgPSBSZWFjdC5jcmVhdGVFbGVtZW50KERhc2hib2FyZENvbXBvbmVudCwge1xuICAgICAgICBrZXk6ICdkYXNoYm9hcmQnXG4gICAgICB9KTtcbiAgICAgIG92ZXJsYXlzID0gUmVhY3QuY3JlYXRlRWxlbWVudChNb2RhbE92ZXJsYXlDb21wb25lbnQsIHtcbiAgICAgICAga2V5OiAnbW9kYWwtb3ZlcmxheScsXG4gICAgICAgIGluZm86IHRoaXMuc3RhdGUuaW5mbyxcbiAgICAgICAgbW9kYWxzOiB0aGlzLnN0YXRlLm1vZGFsc1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gUi5kaXYobnVsbCwgW292ZXJsYXlzLCBib2FyZFdyYXBwcGVyLCBkYXNoYm9hcmRdKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gR2FtZTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIEluZm8sIFI7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBJbmZvID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnSW5mbycsXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBSLnVsKHtcbiAgICAgICAgaWQ6ICdzdGF0cydcbiAgICAgIH0sIFtcbiAgICAgICAgUi5saSh7XG4gICAgICAgICAga2V5OiAndGlsZXMnXG4gICAgICAgIH0sIHRoaXMucHJvcHMuaW5mby5udW1PZlRpbGVzICsgXCIgdGlsZXNcIiksIFIubGkoe1xuICAgICAgICAgIGtleTogJ21pbmVzJ1xuICAgICAgICB9LCB0aGlzLnByb3BzLmluZm8ubnVtT2ZNaW5lcyArIFwiIG1pbmVzXCIpLCBSLmxpKHtcbiAgICAgICAgICBrZXk6ICdmbGFnZ2VkJ1xuICAgICAgICB9LCB0aGlzLnByb3BzLmluZm8ubnVtT2ZGbGFncyArIFwiIGZsYWdnZWQgdGlsZXNcIiksIFIubGkoe1xuICAgICAgICAgIGtleTogJ2NsZWFyZWQnXG4gICAgICAgIH0sIHRoaXMucHJvcHMuaW5mby5udW1PZlVuY2xlYXJlZCArIFwiIGxlZnQgdG8gY2xlYXJcIilcbiAgICAgIF0pO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBJbmZvO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgUiwgVGlsZSwgVGlsZUFjdGlvbnM7XG5cbiAgVGlsZUFjdGlvbnMgPSByZXF1aXJlKCcuLi9hY3Rpb25zL1RpbGVBY3Rpb25zLmNvZmZlZScpO1xuXG4gIFIgPSBSZWFjdC5ET007XG5cbiAgVGlsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1RpbGUnLFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gUi5saSh7XG4gICAgICAgIGNsYXNzTmFtZTogdGhpcy5nZXRDbGFzcygpLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLmNsaWNrSGFuZGxlclxuICAgICAgfSwgUi5zcGFuKG51bGwsIHRoaXMuZ2V0VGV4dCgpKSk7XG4gICAgfSxcbiAgICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgdmFyIGZsYWdLZXlXYXNQcmVzc2VkO1xuICAgICAgaWYgKCEkZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIFRpbGVBY3Rpb25zLmNsZWFyKHRoaXMucHJvcHMudGlsZS5tb2RlbC51aWQpO1xuICAgICAgfVxuICAgICAgZmxhZ0tleVdhc1ByZXNzZWQgPSAkZXZlbnQuc2hpZnRLZXkgPT09IHRydWUgfHwgJGV2ZW50LmFsdEtleSA9PT0gdHJ1ZTtcbiAgICAgIGlmIChmbGFnS2V5V2FzUHJlc3NlZCkge1xuICAgICAgICByZXR1cm4gVGlsZUFjdGlvbnMudG9nZ2xlRmxhZyh0aGlzLnByb3BzLnRpbGUubW9kZWwudWlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBUaWxlQWN0aW9ucy5jbGVhcih0aGlzLnByb3BzLnRpbGUubW9kZWwudWlkKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGlzRmlyc3RDb2x1bW46IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGlsZS5tb2RlbC54ID09PSAwO1xuICAgIH0sXG4gICAgaGFzQmVlbkZsYWdnZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGlsZS5tb2RlbC5pc0NsZWFyICE9PSB0cnVlICYmIHRoaXMucHJvcHMudGlsZS5tb2RlbC5pc0ZsYWdnZWQgPT09IHRydWU7XG4gICAgfSxcbiAgICBoYXNCZWVuQ2xlYXJlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy50aWxlLm1vZGVsLmlzQ2xlYXIgPT09IHRydWU7XG4gICAgfSxcbiAgICBoYXNNaW5lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnRpbGUubW9kZWwuaXNNaW5lID09PSB0cnVlO1xuICAgIH0sXG4gICAgc2hvdWxkRGlzcGxheU1pbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFzQmVlbkNsZWFyZWQoKSAmJiB0aGlzLmhhc01pbmUoKTtcbiAgICB9LFxuICAgIGhhc1plcm9BZGphY2VudE1pbmVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnRpbGUubW9kZWwuYWRqYWNlbnRNaW5lcyA9PT0gMCAmJiB0aGlzLmhhc0JlZW5DbGVhcmVkKCk7XG4gICAgfSxcbiAgICBnZXRUZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0ZXh0O1xuICAgICAgdGV4dCA9ICcnO1xuICAgICAgaWYgKHRoaXMuaGFzQmVlbkNsZWFyZWQoKSkge1xuICAgICAgICB0ZXh0ID0gdGhpcy5wcm9wcy50aWxlLm1vZGVsLmFkamFjZW50TWluZXM7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzQmVlbkZsYWdnZWQoKSkge1xuICAgICAgICB0ZXh0ID0gJz8nO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnNob3VsZERpc3BsYXlNaW5lKCkpIHtcbiAgICAgICAgdGV4dCA9ICdYJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH0sXG4gICAgZ2V0Q2xhc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFsndGlsZScsIHRoaXMuaXNGaXJzdENvbHVtbigpID8gJ250aCcgOiB2b2lkIDAsIHRoaXMuaGFzQmVlbkNsZWFyZWQoKSA/ICdjbGVhcicgOiB2b2lkIDAsIHRoaXMuaGFzQmVlbkZsYWdnZWQoKSA/ICdmbGFnZ2VkJyA6IHZvaWQgMCwgdGhpcy5zaG91bGREaXNwbGF5TWluZSgpID8gJ21pbmUnIDogdm9pZCAwLCB0aGlzLmhhc1plcm9BZGphY2VudE1pbmVzKCkgPyAnemVybycgOiB2b2lkIDBdLmpvaW4oJyAnKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gVGlsZTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIFIsIFRpbGVDb21wb25lbnQsIFRpbGVzO1xuXG4gIFRpbGVDb21wb25lbnQgPSByZXF1aXJlKCcuL1RpbGVDb21wb25lbnQuY29mZmVlJyk7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBUaWxlcyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ1RpbGVzJyxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRpbGVzO1xuICAgICAgdGlsZXMgPSB0aGlzLnByb3BzLnRpbGVzLm1hcCgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGlsZUNvbXBvbmVudCwge1xuICAgICAgICAgICAga2V5OiBpbmRleCxcbiAgICAgICAgICAgIHJlZjogaXRlbS5tb2RlbC51aWQsXG4gICAgICAgICAgICB0aWxlOiBpdGVtXG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICByZXR1cm4gUi51bCh7XG4gICAgICAgIGlkOiAnYm9hcmQnXG4gICAgICB9LCB0aWxlcyk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFRpbGVzO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgTW9kYWxBY3Rpb25zLCBNb2RhbE92ZXJsYXksIFI7XG5cbiAgTW9kYWxBY3Rpb25zID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9Nb2RhbEFjdGlvbnMuY29mZmVlJyk7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBNb2RhbE92ZXJsYXkgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdNb2RhbEluc3RydWN0aW9ucycsXG4gICAgZ2V0Q2xhc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNsYXNzZXM7XG4gICAgICBjbGFzc2VzID0gWydtZXNzYWdlJ107XG4gICAgICBpZiAoIXRoaXMucHJvcHMuc2hvdykge1xuICAgICAgICBjbGFzc2VzLnB1c2goJ2hpZGUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcbiAgICB9LFxuICAgIGNsaWNrSGFuZGxlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gTW9kYWxBY3Rpb25zLnRvZ2dsZSgnaW5zdHJ1Y3Rpb25zJyk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJ1dHRvbiwgY29udHJvbHMsIGRlc2NyaXB0aW9uO1xuICAgICAgZGVzY3JpcHRpb24gPSBSLmRpdih7XG4gICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1kZXNjcmlwdGlvbidcbiAgICAgIH0sIFtcbiAgICAgICAgUi5kaXYoe1xuICAgICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1oZWFkZXInLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2JvcmRlci1ib3R0b20nXG4gICAgICAgIH0sICdob3cgdG8gcGxheScpLCBSLmRpdih7XG4gICAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWRldGFpbHMnLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2JvcmRlci1ib3R0b20nXG4gICAgICAgIH0sIFsndGhlIGdhbWUgaXMgcGxheWVkIGJ5IHJldmVhbGluZyB0aWxlcyBvZiB0aGUgZ3JpZC4nLCAnaWYgYSBzZWxlY3RlZCB0aWxlIGNvbnRhaW5zIGEgbWluZSwgdGhlIHBsYXllciBsb3NlcyB0aGUgZ2FtZS4nLCAnb3RoZXJ3aXNlLCBhIGRpZ2l0IGlzIHJldmVhbGVkIGluIHRoZSB0aWxlLCBpbmRpY2F0aW5nIHRoZSBudW1iZXInLCAnb2YgbWluZXMgbG9jYXRlZCBpbiB0aGUgZWlnaHQgYWRqYWNlbnQgdGlsZXMuJ10uam9pbignICcpKSwgUi5kaXYoe1xuICAgICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1jbGljaydcbiAgICAgICAgfSwgUi5zcGFuKHtcbiAgICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtY2xpY2stY29kZScsXG4gICAgICAgICAgY2xhc3NOYW1lOiAnY29kZSdcbiAgICAgICAgfSwgJ2NsaWNrJyksIFIuc3Bhbih7XG4gICAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWNsaWNrLXRleHQnXG4gICAgICAgIH0sICcgdG8gcmV2ZWFsIHRoZSBzcXVhcmVzIG9mIHRoZSBncmlkLicpKSwgUi5kaXYoe1xuICAgICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1jbGljay1oaW50JyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdib3JkZXItYm90dG9tJ1xuICAgICAgICB9LCAnKHlvdXIgZmlyc3QgY2xpY2sgd2lsbCBuZXZlciBsYW5kIG9uIGEgbWluZSknKVxuICAgICAgXSk7XG4gICAgICBjb250cm9scyA9IFIuZGl2KHtcbiAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWNvbnRyb2xzJ1xuICAgICAgfSwgW1xuICAgICAgICBSLnNwYW4oe1xuICAgICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1jb250cm9scy1jb2RlMScsXG4gICAgICAgICAgY2xhc3NOYW1lOiAnY29kZSdcbiAgICAgICAgfSwgJ3NoaWZ0ICsgY2xpY2snKSwgUi5zcGFuKHtcbiAgICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtY29udHJvbHMtdGV4dDEnXG4gICAgICAgIH0sICcgb3IgJyksIFIuc3Bhbih7XG4gICAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWNvbnRyb2xzLWNvZGUyJyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdjb2RlJ1xuICAgICAgICB9LCAnYWx0ICsgY2xpY2snKSwgUi5zcGFuKHtcbiAgICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtY29udHJvbHMtdGV4dDInXG4gICAgICAgIH0sICcgd2lsbCBcImZsYWdcIiBhIHRpbGUsIGhlbHBpbmcgeW91IHRvIHJlbWVtYmVyIHdoZXJlIHlvdSB0aGluayBhIG1pbmUgaXMgaGlkZGVuJylcbiAgICAgIF0pO1xuICAgICAgYnV0dG9uID0gUi5kaXYoe1xuICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtYnV0dG9uJ1xuICAgICAgfSwgUi5kaXYoe1xuICAgICAgICBjbGFzc05hbWU6ICdidXR0b24nLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLmNsaWNrSGFuZGxlclxuICAgICAgfSwgJ2dvdCBpdCEnKSk7XG4gICAgICByZXR1cm4gUi5kaXYoe1xuICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtbW9kYWwnLFxuICAgICAgICBjbGFzc05hbWU6IHRoaXMuZ2V0Q2xhc3MoKVxuICAgICAgfSwgW2Rlc2NyaXB0aW9uLCBjb250cm9scywgYnV0dG9uXSk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IE1vZGFsT3ZlcmxheTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIE1vZGFsQWN0aW9ucywgTW9kYWxPdmVybGF5LCBSLCBUaWxlc0FjdGlvbnM7XG5cbiAgTW9kYWxBY3Rpb25zID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9Nb2RhbEFjdGlvbnMuY29mZmVlJyk7XG5cbiAgVGlsZXNBY3Rpb25zID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9UaWxlc0FjdGlvbnMuY29mZmVlJyk7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBNb2RhbE92ZXJsYXkgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdNb2RhbE5ld0dhbWUnLFxuICAgIGdldENsYXNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbGFzc2VzO1xuICAgICAgY2xhc3NlcyA9IFsnbWVzc2FnZSddO1xuICAgICAgaWYgKCF0aGlzLnByb3BzLnNob3cpIHtcbiAgICAgICAgY2xhc3Nlcy5wdXNoKCdoaWRlJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG4gICAgfSxcbiAgICBnZXRUaXRsZVRleHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuc2hvdyAmJiAhdGhpcy5wcm9wcy53aW4gJiYgIXRoaXMucHJvcHMubG9zcykge1xuICAgICAgICByZXR1cm4gJ25ldyBnYW1lPyc7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMud2luICYmICF0aGlzLnByb3BzLmxvc3MpIHtcbiAgICAgICAgcmV0dXJuICd5b3Ugd29uISc7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLnByb3BzLndpbiAmJiAhdGhpcy5wcm9wcy53aW4pIHtcbiAgICAgICAgcmV0dXJuICd5b3UgbG9zdC4uLic7XG4gICAgICB9XG4gICAgfSxcbiAgICBjbGlja0hhbmRsZXJOZXdHYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBUaWxlc0FjdGlvbnMubmV3R2FtZSgpO1xuICAgIH0sXG4gICAgY2xpY2tIYW5kbGVyRXhpdE1vZGFsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBNb2RhbEFjdGlvbnMucmVzZXQoKTtcbiAgICB9LFxuICAgIHJlbmRlckJ1dHRvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJ1dHRvbnM7XG4gICAgICBidXR0b25zID0gW1xuICAgICAgICBSLmRpdih7XG4gICAgICAgICAga2V5OiAnbmV3LWdhbWUtc3RhcnQnLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbicsXG4gICAgICAgICAgb25DbGljazogdGhpcy5jbGlja0hhbmRsZXJOZXdHYW1lXG4gICAgICAgIH0sICdzdGFydCEnKVxuICAgICAgXTtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5sb3NzKSB7XG4gICAgICAgIGJ1dHRvbnMucHVzaChSLmRpdih7XG4gICAgICAgICAga2V5OiAnbmV3LWdhbWUtcmVzdW1lJyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdidXR0b24nLFxuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2xpY2tIYW5kbGVyRXhpdE1vZGFsXG4gICAgICAgIH0sICdyZXN1bWUuLi4nKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUi5kaXYoe1xuICAgICAgICBrZXk6ICduZXctZ2FtZS1idXR0b25zJ1xuICAgICAgfSwgYnV0dG9ucyk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRpdGxlO1xuICAgICAgdGl0bGUgPSBSLmRpdih7XG4gICAgICAgIGtleTogJ25ldy1nYW1lLXRpdGxlLXdyYXBwZXInLFxuICAgICAgICBjbGFzc05hbWU6ICdib3JkZXItYm90dG9tJ1xuICAgICAgfSwgUi5kaXYoe1xuICAgICAgICBrZXk6ICduZXctZ2FtZS10aXRsZScsXG4gICAgICAgIGNsYXNzTmFtZTogJ3RpdGxlJ1xuICAgICAgfSwgdGhpcy5nZXRUaXRsZVRleHQoKSkpO1xuICAgICAgcmV0dXJuIFIuZGl2KHtcbiAgICAgICAga2V5OiAnbmV3LWdhbWUtbW9kYWwnLFxuICAgICAgICBjbGFzc05hbWU6IHRoaXMuZ2V0Q2xhc3MoKVxuICAgICAgfSwgW3RpdGxlLCB0aGlzLnJlbmRlckJ1dHRvbnMoKV0pO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBNb2RhbE92ZXJsYXk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBJbnN0cnVjdGlvbnNDb21wb25lbnQsIE1vZGFsQWN0aW9ucywgTW9kYWxPdmVybGF5LCBOZXdHYW1lQ29tcG9uZW50LCBSO1xuXG4gIE1vZGFsQWN0aW9ucyA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvTW9kYWxBY3Rpb25zLmNvZmZlZScpO1xuXG4gIEluc3RydWN0aW9uc0NvbXBvbmVudCA9IHJlcXVpcmUoJy4vTW9kYWxJbnN0cnVjdGlvbnNDb21wb25lbnQuY29mZmVlJyk7XG5cbiAgTmV3R2FtZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vTW9kYWxOZXdHYW1lQ29tcG9uZW50LmNvZmZlZScpO1xuXG4gIFIgPSBSZWFjdC5ET007XG5cbiAgTW9kYWxPdmVybGF5ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnTW9kYWxPdmVybGF5JyxcbiAgICBnZXRDbGFzczogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5tb2RhbHMubmV3R2FtZSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMubW9kYWxzLmluc3RydWN0aW9ucykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICByZXR1cm4gJ2hpZGUnO1xuICAgIH0sXG4gICAgcmVzZXRIYW5kbGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5pbmZvLmxvc3MgJiYgIXRoaXMucHJvcHMuaW5mby53aW4pIHtcbiAgICAgICAgcmV0dXJuIE1vZGFsQWN0aW9ucy5yZXNldCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaW5zdHJ1Y3Rpb25zSGFuZGxlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gTW9kYWxBY3Rpb25zLnRvZ2dsZSgnaW5zdHJ1Y3Rpb25zJyk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG92ZXJsYXk7XG4gICAgICBvdmVybGF5ID0gUi5kaXYoe1xuICAgICAgICBpZDogJ292ZXJsYXknLFxuICAgICAgICBrZXk6ICdvdmVybGF5JyxcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmdldENsYXNzKCksXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMucmVzZXRIYW5kbGVyXG4gICAgICB9LCBudWxsKTtcbiAgICAgIHJldHVybiBSLmRpdihudWxsLCBbXG4gICAgICAgIG92ZXJsYXksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5zdHJ1Y3Rpb25zQ29tcG9uZW50LCB7XG4gICAgICAgICAga2V5OiAnbW9kYWwtaW5zdHJ1Y3Rpb25zJyxcbiAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLm1vZGFscy5pbnN0cnVjdGlvbnNcbiAgICAgICAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTmV3R2FtZUNvbXBvbmVudCwge1xuICAgICAgICAgIGtleTogJ21vZGFsLW5ldy1nYW1lJyxcbiAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLm1vZGFscy5uZXdHYW1lLFxuICAgICAgICAgIHdpbjogdGhpcy5wcm9wcy5pbmZvLndpbixcbiAgICAgICAgICBsb3NzOiB0aGlzLnByb3BzLmluZm8ubG9zc1xuICAgICAgICB9KVxuICAgICAgXSk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IE1vZGFsT3ZlcmxheTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIFRpbGVNb2RlbDtcblxuICBOdW1iZXIuaXNJbnRlZ2VyID0gTnVtYmVyLmlzSW50ZWdlciB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUodmFsdWUpICYmIE1hdGguZmxvb3IodmFsdWUpID09PSB2YWx1ZTtcbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFRpbGVNb2RlbCA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgYWRqYWNlbnRUaWxlcztcblxuICAgIGFkamFjZW50VGlsZXMgPSBbWy0xLCAtMV0sIFswLCAtMV0sIFsxLCAtMV0sIFstMSwgMF0sIFsxLCAwXSwgWy0xLCAxXSwgWzAsIDFdLCBbMSwgMV1dO1xuXG4gICAgZnVuY3Rpb24gVGlsZU1vZGVsKGF0dHJzKSB7XG4gICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoYXR0cnMueCkgfHwgIU51bWJlci5pc0ludGVnZXIoYXR0cnMueSkpIHtcbiAgICAgICAgdGhyb3cgXCJgeGAgYW5kIGB5YCBhcmUgcmVxdWlyZWQgSW50ZWdlciBhdHRyaWJ1dGVzIHRvIGluc3RhbnRpYXRlIFRpbGVcIjtcbiAgICAgIH1cbiAgICAgIHRoaXMubW9kZWwgPSB7XG4gICAgICAgIHg6IHZvaWQgMCxcbiAgICAgICAgeTogdm9pZCAwLFxuICAgICAgICB1aWQ6IHZvaWQgMCxcbiAgICAgICAgaXNNaW5lOiBmYWxzZSxcbiAgICAgICAgaXNDbGVhcjogZmFsc2UsXG4gICAgICAgIGlzRmxhZ2dlZDogZmFsc2UsXG4gICAgICAgIGFkamFjZW50TWluZXM6IDBcbiAgICAgIH07XG4gICAgICB0aGlzLnNldChhdHRycyk7XG4gICAgfVxuXG4gICAgVGlsZU1vZGVsLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihhdHRycykge1xuICAgICAgdmFyIGF0dHIsIGtleTtcbiAgICAgIGZvciAoa2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGF0dHIgPSBhdHRyc1trZXldO1xuICAgICAgICB0aGlzLm1vZGVsW2tleV0gPSBhdHRyO1xuICAgICAgICB0aGlzLm1vZGVsLnVpZCA9IFN0cmluZyhhdHRycy54KSArICctJyArIFN0cmluZyhhdHRycy55KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBUaWxlTW9kZWwucHJvdG90eXBlLmdldEFkamFjZW50VGlsZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBhZGphY2VudFRpbGVzO1xuICAgIH07XG5cbiAgICBUaWxlTW9kZWwucHJvdG90eXBlLnRvZ2dsZUZsYWcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMubW9kZWwuaXNGbGFnZ2VkID0gIXRoaXMubW9kZWwuaXNGbGFnZ2VkO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFRpbGVNb2RlbC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMubW9kZWwuaXNDbGVhciA9IHRydWU7XG4gICAgICB0aGlzLm1vZGVsLmlzRmxhZ2dlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHJldHVybiBUaWxlTW9kZWw7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIEV2ZW50RW1pdHRlciwgTW9kYWxTdG9yZSwgTW9kYWxzLCBNb2RhbHNDb2xsZWN0aW9uLCBhc3NpZ247XG5cbiAgTW9kYWxzQ29sbGVjdGlvbiA9IHJlcXVpcmUoJy4uL2NvbGxlY3Rpb25zL01vZGFsc0NvbGxlY3Rpb24uY29mZmVlJyk7XG5cbiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xuXG4gIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxuICBNb2RhbHMgPSBuZXcgTW9kYWxzQ29sbGVjdGlvbigpO1xuXG4gIE1vZGFscy5zZXQoJ25ld0dhbWUnKTtcblxuICBNb2RhbHMuc2V0KCdpbnN0cnVjdGlvbnMnKTtcblxuICBNb2RhbFN0b3JlID0gYXNzaWduKHt9LCBFdmVudEVtaXR0ZXIucHJvdG90eXBlLCB7XG4gICAgZXZlbnQ6ICdldmVudCcsXG4gICAgZ2V0QWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBNb2RhbHMuc2hvdztcbiAgICB9LFxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBNb2RhbHMucmVzZXQoKTtcbiAgICB9LFxuICAgIHRvZ2dsZTogZnVuY3Rpb24obW9kYWxOYW1lKSB7XG4gICAgICByZXR1cm4gTW9kYWxzLnRvZ2dsZShtb2RhbE5hbWUpO1xuICAgIH0sXG4gICAgZW1pdENoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbWl0KHRoaXMuZXZlbnQpO1xuICAgIH0sXG4gICAgYWRkQ2hhbmdlTGlzdGVuZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy5vbih0aGlzLmV2ZW50LCBjYWxsYmFjayk7XG4gICAgfSxcbiAgICByZW1vdmVDaGFuZ2VMaXN0ZW5lcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbW92ZUxpc3RlbmVyKHRoaXMuZXZlbnQsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gTW9kYWxTdG9yZTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIEV2ZW50RW1pdHRlciwgVGlsZVN0b3JlLCBUaWxlcywgVGlsZXNDb2xsZWN0aW9uLCBhc3NpZ247XG5cbiAgVGlsZXNDb2xsZWN0aW9uID0gcmVxdWlyZSgnLi4vY29sbGVjdGlvbnMvVGlsZXNDb2xsZWN0aW9uLmNvZmZlZScpO1xuXG4gIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcblxuICBhc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbiAgVGlsZXMgPSBuZXcgVGlsZXNDb2xsZWN0aW9uKCk7XG5cbiAgVGlsZXMubmV3R2FtZSgxMCwgMTAsIDI1KTtcblxuICB3aW5kb3cuZm9vID0gVGlsZXM7XG5cbiAgVGlsZVN0b3JlID0gYXNzaWduKHt9LCBFdmVudEVtaXR0ZXIucHJvdG90eXBlLCB7XG4gICAgZXZlbnQ6ICdjaGFuZ2UnLFxuICAgIGdldDogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiBUaWxlcy5nZXQoYXR0cnMpO1xuICAgIH0sXG4gICAgZ2V0QWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBUaWxlcy5nZXRBbGwoKTtcbiAgICB9LFxuICAgIGdldEluZm86IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2luOiBUaWxlcy53aW4sXG4gICAgICAgIGxvc3M6IFRpbGVzLmxvc3MsXG4gICAgICAgIG51bU9mVGlsZXM6IFRpbGVzLmFsbC5sZW5ndGgsXG4gICAgICAgIG51bU9mTWluZXM6IFRpbGVzLm51bU9mTWluZXMsXG4gICAgICAgIG51bU9mRmxhZ3M6IFRpbGVzLm51bU9mRmxhZ3MsXG4gICAgICAgIG51bU9mVW5jbGVhcmVkOiBUaWxlcy5hbGwubGVuZ3RoIC0gVGlsZXMubnVtT2ZNaW5lcyAtIFRpbGVzLm51bU9mQ2xlYXJzXG4gICAgICB9O1xuICAgIH0sXG4gICAgcmFuZG9tU2FmZVRpbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFRpbGVzLnJhbmRvbVNhZmVUaWxlKCk7XG4gICAgfSxcbiAgICBuZXdHYW1lOiBmdW5jdGlvbih4LCB5LCBtaW5lcykge1xuICAgICAgcmV0dXJuIFRpbGVzLm5ld0dhbWUoeCwgeSwgbWluZXMpO1xuICAgIH0sXG4gICAgZW1pdENoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbWl0KHRoaXMuZXZlbnQpO1xuICAgIH0sXG4gICAgYWRkQ2hhbmdlTGlzdGVuZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy5vbih0aGlzLmV2ZW50LCBjYWxsYmFjayk7XG4gICAgfSxcbiAgICByZW1vdmVDaGFuZ2VMaXN0ZW5lcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbW92ZUxpc3RlbmVyKHRoaXMuZXZlbnQsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gVGlsZVN0b3JlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLypcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEaXNwYXRjaGVyXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnLi9pbnZhcmlhbnQnKTtcblxudmFyIF9sYXN0SUQgPSAxO1xudmFyIF9wcmVmaXggPSAnSURfJztcblxuLyoqXG4gKiBEaXNwYXRjaGVyIGlzIHVzZWQgdG8gYnJvYWRjYXN0IHBheWxvYWRzIHRvIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLiBUaGlzIGlzXG4gKiBkaWZmZXJlbnQgZnJvbSBnZW5lcmljIHB1Yi1zdWIgc3lzdGVtcyBpbiB0d28gd2F5czpcbiAqXG4gKiAgIDEpIENhbGxiYWNrcyBhcmUgbm90IHN1YnNjcmliZWQgdG8gcGFydGljdWxhciBldmVudHMuIEV2ZXJ5IHBheWxvYWQgaXNcbiAqICAgICAgZGlzcGF0Y2hlZCB0byBldmVyeSByZWdpc3RlcmVkIGNhbGxiYWNrLlxuICogICAyKSBDYWxsYmFja3MgY2FuIGJlIGRlZmVycmVkIGluIHdob2xlIG9yIHBhcnQgdW50aWwgb3RoZXIgY2FsbGJhY2tzIGhhdmVcbiAqICAgICAgYmVlbiBleGVjdXRlZC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgY29uc2lkZXIgdGhpcyBoeXBvdGhldGljYWwgZmxpZ2h0IGRlc3RpbmF0aW9uIGZvcm0sIHdoaWNoXG4gKiBzZWxlY3RzIGEgZGVmYXVsdCBjaXR5IHdoZW4gYSBjb3VudHJ5IGlzIHNlbGVjdGVkOlxuICpcbiAqICAgdmFyIGZsaWdodERpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcigpO1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggY291bnRyeSBpcyBzZWxlY3RlZFxuICogICB2YXIgQ291bnRyeVN0b3JlID0ge2NvdW50cnk6IG51bGx9O1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggY2l0eSBpcyBzZWxlY3RlZFxuICogICB2YXIgQ2l0eVN0b3JlID0ge2NpdHk6IG51bGx9O1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGJhc2UgZmxpZ2h0IHByaWNlIG9mIHRoZSBzZWxlY3RlZCBjaXR5XG4gKiAgIHZhciBGbGlnaHRQcmljZVN0b3JlID0ge3ByaWNlOiBudWxsfVxuICpcbiAqIFdoZW4gYSB1c2VyIGNoYW5nZXMgdGhlIHNlbGVjdGVkIGNpdHksIHdlIGRpc3BhdGNoIHRoZSBwYXlsb2FkOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gKiAgICAgYWN0aW9uVHlwZTogJ2NpdHktdXBkYXRlJyxcbiAqICAgICBzZWxlY3RlZENpdHk6ICdwYXJpcydcbiAqICAgfSk7XG4gKlxuICogVGhpcyBwYXlsb2FkIGlzIGRpZ2VzdGVkIGJ5IGBDaXR5U3RvcmVgOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NpdHktdXBkYXRlJykge1xuICogICAgICAgQ2l0eVN0b3JlLmNpdHkgPSBwYXlsb2FkLnNlbGVjdGVkQ2l0eTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIGNvdW50cnksIHdlIGRpc3BhdGNoIHRoZSBwYXlsb2FkOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gKiAgICAgYWN0aW9uVHlwZTogJ2NvdW50cnktdXBkYXRlJyxcbiAqICAgICBzZWxlY3RlZENvdW50cnk6ICdhdXN0cmFsaWEnXG4gKiAgIH0pO1xuICpcbiAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBib3RoIHN0b3JlczpcbiAqXG4gKiAgICBDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIENvdW50cnlTdG9yZS5jb3VudHJ5ID0gcGF5bG9hZC5zZWxlY3RlZENvdW50cnk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSBjYWxsYmFjayB0byB1cGRhdGUgYENvdW50cnlTdG9yZWAgaXMgcmVnaXN0ZXJlZCwgd2Ugc2F2ZSBhIHJlZmVyZW5jZVxuICogdG8gdGhlIHJldHVybmVkIHRva2VuLiBVc2luZyB0aGlzIHRva2VuIHdpdGggYHdhaXRGb3IoKWAsIHdlIGNhbiBndWFyYW50ZWVcbiAqIHRoYXQgYENvdW50cnlTdG9yZWAgaXMgdXBkYXRlZCBiZWZvcmUgdGhlIGNhbGxiYWNrIHRoYXQgdXBkYXRlcyBgQ2l0eVN0b3JlYFxuICogbmVlZHMgdG8gcXVlcnkgaXRzIGRhdGEuXG4gKlxuICogICBDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIC8vIGBDb3VudHJ5U3RvcmUuY291bnRyeWAgbWF5IG5vdCBiZSB1cGRhdGVkLlxuICogICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBpcyBub3cgZ3VhcmFudGVlZCB0byBiZSB1cGRhdGVkLlxuICpcbiAqICAgICAgIC8vIFNlbGVjdCB0aGUgZGVmYXVsdCBjaXR5IGZvciB0aGUgbmV3IGNvdW50cnlcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gZ2V0RGVmYXVsdENpdHlGb3JDb3VudHJ5KENvdW50cnlTdG9yZS5jb3VudHJ5KTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSB1c2FnZSBvZiBgd2FpdEZvcigpYCBjYW4gYmUgY2hhaW5lZCwgZm9yIGV4YW1wbGU6XG4gKlxuICogICBGbGlnaHRQcmljZVN0b3JlLmRpc3BhdGNoVG9rZW4gPVxuICogICAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgICAgc3dpdGNoIChwYXlsb2FkLmFjdGlvblR5cGUpIHtcbiAqICAgICAgICAgY2FzZSAnY291bnRyeS11cGRhdGUnOlxuICogICAgICAgICAgIGZsaWdodERpc3BhdGNoZXIud2FpdEZvcihbQ2l0eVN0b3JlLmRpc3BhdGNoVG9rZW5dKTtcbiAqICAgICAgICAgICBGbGlnaHRQcmljZVN0b3JlLnByaWNlID1cbiAqICAgICAgICAgICAgIGdldEZsaWdodFByaWNlU3RvcmUoQ291bnRyeVN0b3JlLmNvdW50cnksIENpdHlTdG9yZS5jaXR5KTtcbiAqICAgICAgICAgICBicmVhaztcbiAqXG4gKiAgICAgICAgIGNhc2UgJ2NpdHktdXBkYXRlJzpcbiAqICAgICAgICAgICBGbGlnaHRQcmljZVN0b3JlLnByaWNlID1cbiAqICAgICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUoQ291bnRyeVN0b3JlLmNvdW50cnksIENpdHlTdG9yZS5jaXR5KTtcbiAqICAgICAgICAgICBicmVhaztcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSBgY291bnRyeS11cGRhdGVgIHBheWxvYWQgd2lsbCBiZSBndWFyYW50ZWVkIHRvIGludm9rZSB0aGUgc3RvcmVzJ1xuICogcmVnaXN0ZXJlZCBjYWxsYmFja3MgaW4gb3JkZXI6IGBDb3VudHJ5U3RvcmVgLCBgQ2l0eVN0b3JlYCwgdGhlblxuICogYEZsaWdodFByaWNlU3RvcmVgLlxuICovXG5cbiAgZnVuY3Rpb24gRGlzcGF0Y2hlcigpIHtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcyA9IHt9O1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNQZW5kaW5nID0ge307XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0hhbmRsZWQgPSB7fTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdpdGggZXZlcnkgZGlzcGF0Y2hlZCBwYXlsb2FkLiBSZXR1cm5zXG4gICAqIGEgdG9rZW4gdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGB3YWl0Rm9yKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBpZCA9IF9wcmVmaXggKyBfbGFzdElEKys7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdID0gY2FsbGJhY2s7XG4gICAgcmV0dXJuIGlkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgY2FsbGJhY2sgYmFzZWQgb24gaXRzIHRva2VuLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLnVucmVnaXN0ZXI9ZnVuY3Rpb24oaWQpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tpZF0sXG4gICAgICAnRGlzcGF0Y2hlci51bnJlZ2lzdGVyKC4uLik6IGAlc2AgZG9lcyBub3QgbWFwIHRvIGEgcmVnaXN0ZXJlZCBjYWxsYmFjay4nLFxuICAgICAgaWRcbiAgICApO1xuICAgIGRlbGV0ZSB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tpZF07XG4gIH07XG5cbiAgLyoqXG4gICAqIFdhaXRzIGZvciB0aGUgY2FsbGJhY2tzIHNwZWNpZmllZCB0byBiZSBpbnZva2VkIGJlZm9yZSBjb250aW51aW5nIGV4ZWN1dGlvblxuICAgKiBvZiB0aGUgY3VycmVudCBjYWxsYmFjay4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBhIGNhbGxiYWNrIGluXG4gICAqIHJlc3BvbnNlIHRvIGEgZGlzcGF0Y2hlZCBwYXlsb2FkLlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IGlkc1xuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUud2FpdEZvcj1mdW5jdGlvbihpZHMpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcsXG4gICAgICAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IE11c3QgYmUgaW52b2tlZCB3aGlsZSBkaXNwYXRjaGluZy4nXG4gICAgKTtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaWRzLmxlbmd0aDsgaWkrKykge1xuICAgICAgdmFyIGlkID0gaWRzW2lpXTtcbiAgICAgIGlmICh0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0pIHtcbiAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkW2lkXSxcbiAgICAgICAgICAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IENpcmN1bGFyIGRlcGVuZGVuY3kgZGV0ZWN0ZWQgd2hpbGUgJyArXG4gICAgICAgICAgJ3dhaXRpbmcgZm9yIGAlc2AuJyxcbiAgICAgICAgICBpZFxuICAgICAgICApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGludmFyaWFudChcbiAgICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdLFxuICAgICAgICAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IGAlc2AgZG9lcyBub3QgbWFwIHRvIGEgcmVnaXN0ZXJlZCBjYWxsYmFjay4nLFxuICAgICAgICBpZFxuICAgICAgKTtcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfaW52b2tlQ2FsbGJhY2soaWQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhIHBheWxvYWQgdG8gYWxsIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24ocGF5bG9hZCkge1xuICAgIGludmFyaWFudChcbiAgICAgICF0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcsXG4gICAgICAnRGlzcGF0Y2guZGlzcGF0Y2goLi4uKTogQ2Fubm90IGRpc3BhdGNoIGluIHRoZSBtaWRkbGUgb2YgYSBkaXNwYXRjaC4nXG4gICAgKTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX3N0YXJ0RGlzcGF0Y2hpbmcocGF5bG9hZCk7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzKSB7XG4gICAgICAgIGlmICh0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0pIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9zdG9wRGlzcGF0Y2hpbmcoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIElzIHRoaXMgRGlzcGF0Y2hlciBjdXJyZW50bHkgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5pc0Rpc3BhdGNoaW5nPWZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmc7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIGNhbGxiYWNrIHN0b3JlZCB3aXRoIHRoZSBnaXZlbiBpZC4gQWxzbyBkbyBzb21lIGludGVybmFsXG4gICAqIGJvb2trZWVwaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS4kRGlzcGF0Y2hlcl9pbnZva2VDYWxsYmFjaz1mdW5jdGlvbihpZCkge1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNQZW5kaW5nW2lkXSA9IHRydWU7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdKHRoaXMuJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQpO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkW2lkXSA9IHRydWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB1cCBib29ra2VlcGluZyBuZWVkZWQgd2hlbiBkaXNwYXRjaGluZy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS4kRGlzcGF0Y2hlcl9zdGFydERpc3BhdGNoaW5nPWZ1bmN0aW9uKHBheWxvYWQpIHtcbiAgICBmb3IgKHZhciBpZCBpbiB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcykge1xuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmdbaWRdID0gZmFsc2U7XG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2lzSGFuZGxlZFtpZF0gPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgYm9va2tlZXBpbmcgdXNlZCBmb3IgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuJERpc3BhdGNoZXJfc3RvcERpc3BhdGNoaW5nPWZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQgPSBudWxsO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICB9O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gRGlzcGF0Y2hlcjtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGludmFyaWFudFxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgaW52YXJpYW50ID0gZnVuY3Rpb24oY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKGZhbHNlKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgK1xuICAgICAgICAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgJ0ludmFyaWFudCBWaW9sYXRpb246ICcgK1xuICAgICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7IHJldHVybiBhcmdzW2FyZ0luZGV4KytdOyB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH1cbiAgICAgIHRocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4nKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgICAgICAgZm9yIChpID0gMTsgaSA8IGxlbjsgaSsrKVxuICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgICBmb3IgKGkgPSAxOyBpIDwgbGVuOyBpKyspXG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblxuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIHZhciBtO1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gMDtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbihlbWl0dGVyLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IDE7XG4gIGVsc2VcbiAgICByZXQgPSBlbWl0dGVyLl9ldmVudHNbdHlwZV0ubGVuZ3RoO1xuICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBUb09iamVjdCh2YWwpIHtcblx0aWYgKHZhbCA9PSBudWxsKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcblx0fVxuXG5cdHJldHVybiBPYmplY3QodmFsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuXHR2YXIgZnJvbTtcblx0dmFyIGtleXM7XG5cdHZhciB0byA9IFRvT2JqZWN0KHRhcmdldCk7XG5cblx0Zm9yICh2YXIgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRmcm9tID0gYXJndW1lbnRzW3NdO1xuXHRcdGtleXMgPSBPYmplY3Qua2V5cyhPYmplY3QoZnJvbSkpO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRvO1xufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==