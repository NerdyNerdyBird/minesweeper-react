!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){var GameComponent,ViewController;GameComponent=require("./components/GameComponent.coffee"),ViewController=React.createElement(GameComponent,null),React.render(ViewController,document.getElementById("minesweeper"))}).call(this)},{"./components/GameComponent.coffee":10}],2:[function(require,module,exports){module.exports.Dispatcher=require("./lib/Dispatcher")},{"./lib/Dispatcher":24}],3:[function(require,module,exports){(function(){var AppDispatcher,Dispatcher,ModalStore,TileStore,changeModal,onTilesChange;Dispatcher=require("Flux").Dispatcher,AppDispatcher=new Dispatcher,TileStore=require("./stores/TileStore.coffee"),ModalStore=require("./stores/ModalStore.coffee"),changeModal=function(name){return name?ModalStore.toggle(name):ModalStore.reset(),ModalStore.emitChange()},onTilesChange=function(){var info;return info=TileStore.getInfo(),(info.win||info.loss)&&ModalActions.toggle("newGame"),TileStore.emitChange()},AppDispatcher.register(function(event){var tile;switch(event.type){case"TILE_FLAG_TOGGLE":return tile=TileStore.get({uid:event.uid}),tile.toggleFlag(),onTilesChange();case"TILE_CLEAR":return tile=TileStore.get({uid:event.uid}),tile.clear(),onTilesChange();case"TILES_CLEAR_SAFE_RANDOM":if(tile=TileStore.randomSafeTile())return tile.clear(),onTilesChange();break;case"TILES_NEW_GAME":return TileStore.newGame(10,10,25),onTilesChange(),changeModal("newGame");case"MODAL_TOGGLE":return ModalStore.toggle(event.name),ModalStore.emitChange();case"MODAL_RESET":return changeModal()}}),module.exports=AppDispatcher}).call(this)},{"./stores/ModalStore.coffee":18,"./stores/TileStore.coffee":19,Flux:20}],4:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("../Dispatcher.coffee"),module.exports={toggle:function(name){return Dispatcher.dispatch({type:"MODAL_TOGGLE",name:name})},reset:function(){return Dispatcher.dispatch({type:"MODAL_RESET"})}}}).call(this)},{"../Dispatcher.coffee":3}],5:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("../Dispatcher.coffee"),module.exports={toggleFlag:function(uid){return Dispatcher.dispatch({type:"TILE_FLAG_TOGGLE",uid:uid})},clear:function(uid){return Dispatcher.dispatch({type:"TILE_CLEAR",uid:uid})}}}).call(this)},{"../Dispatcher.coffee":3}],6:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("../Dispatcher.coffee"),module.exports={clearSafeRandomTile:function(){return Dispatcher.dispatch({type:"TILES_CLEAR_SAFE_RANDOM"})},newGame:function(){return Dispatcher.dispatch({type:"TILES_NEW_GAME"})}}}).call(this)},{"../Dispatcher.coffee":3}],7:[function(require,module,exports){(function(){var ModalsCollection;ModalsCollection=function(){function ModalsCollection(){this.show={}}return ModalsCollection.prototype.set=function(fileName){return this.show[fileName]=!1,this},ModalsCollection.prototype.toggle=function(name){var isBeingShown,modalName,ref,results;ref=this.show,results=[];for(modalName in ref)isBeingShown=ref[modalName],results.push(modalName===name?this.show[modalName]=!isBeingShown:isBeingShown=!1);return results},ModalsCollection.prototype.reset=function(){var key,ref,showModal;ref=this.show;for(key in ref)showModal=ref[key],this.show[key]=!1;return this},ModalsCollection}(),module.exports=ModalsCollection}).call(this)},{}],8:[function(require,module,exports){(function(){var TileModel,TilesCollection,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;TileModel=require("../models/TileModel.coffee"),TilesCollection=function(){function TilesCollection(){var Model,collection;this.all=[],collection=this,this.model=Model=function(superClass){function Model(){return Model.__super__.constructor.apply(this,arguments)}return extend(Model,superClass),Model.prototype.clear=function(){return Model.__super__.clear.call(this),collection.clearNeighbors(this),collection.moveUpdate()},Model.prototype.toggleFlag=function(){return Model.__super__.toggleFlag.call(this),collection.moveUpdate()},Model}(TileModel)}return TilesCollection.prototype.newGame=function(x,y,mines){var attrs,i,j,k,mineNum,ref,ref1,ref2,tile;for(this.reset(),this.sizeX=x,this.sizeY=y,this.numOfMines=mines,y=i=0,ref=this.sizeY-1;ref>=0?ref>=i:i>=ref;y=ref>=0?++i:--i)for(x=j=0,ref1=this.sizeX-1;ref1>=0?ref1>=j:j>=ref1;x=ref1>=0?++j:--j)attrs={x:x,y:y},this.add(attrs);for(mineNum=k=1,ref2=this.numOfMines;ref2>=1?ref2>=k:k>=ref2;mineNum=ref2>=1?++k:--k)tile=this.randomSafeTile(),tile.model.isMine=!0;return this.tallyMines(),this.gameUpdate()},TilesCollection.prototype.noMineFirstClick=function(tile){return 0===this.numOfClears&&tile.model.isMine===!0&&(tile.model.isMine=!1,this.randomSafeTile().model.isMine=!0,this.tallyMines()),tile},TilesCollection.prototype.add=function(model){var tile;return tile=new this.model(model),this.all.push(tile),tile},TilesCollection.prototype.reset=function(){return this.all=[],this},TilesCollection.prototype.randomSafeTile=function(){var findAttrs,randomIndex,safeTiles;return findAttrs={isClear:!1,isMine:!1},safeTiles=this.getAll(findAttrs),randomIndex=Math.floor(Math.random()*safeTiles.length),safeTiles[randomIndex]},TilesCollection.prototype.tallyMines=function(){var adjacentTile,i,j,len,len1,neighborAttrs,neighborMine,neighborMines,neighborX,neighborY,ref,ref1,results,tile;for(ref=this.all,results=[],i=0,len=ref.length;len>i;i++){for(tile=ref[i],neighborMines=0,ref1=tile.adjacentTiles,j=0,len1=ref1.length;len1>j;j++)adjacentTile=ref1[j],neighborX=tile.model.x+adjacentTile[0],neighborY=tile.model.y+adjacentTile[1],neighborAttrs={isMine:!0,x:neighborX,y:neighborY},neighborMine=this.get(neighborAttrs),void 0!==neighborMine&&neighborMines++;results.push(tile.model.adjacentMines=neighborMines)}return results},TilesCollection.prototype.gameUpdate=function(){var i,len,ref,tile;for(this.x=Math.max.apply(this,this.all.map(function(tile){return tile.model.x})),this.y=Math.max.apply(this,this.all.map(function(tile){return tile.model.y})),this.x=this.x--,this.y=this.y--,this.numOfMines=0,ref=this.all,i=0,len=ref.length;len>i;i++)tile=ref[i],tile.model.isMine===!0&&this.numOfMines++;return this.moveUpdate()},TilesCollection.prototype.moveUpdate=function(){var i,len,ref,tile;for(this.loss=!1,this.win=!1,this.numOfClears=0,this.numOfFlags=0,ref=this.all,i=0,len=ref.length;len>i;i++)tile=ref[i],tile.model.isClear===!0&&this.numOfClears++,tile.model.isFlagged===!0&&this.numOfFlags++,tile.model.isMine===!0&&tile.model.isClear===!0&&(this.loss=!0);return this.loss===!1&&this.all.length-this.numOfMines-this.numOfClears===0?this.win=!0:void 0},TilesCollection.prototype.clearNeighbors=function(tile){var adjacentTile,i,len,neighbor,ref,results,shouldClearNeighbor,shouldClearNeighbors;if(shouldClearNeighbors=0===tile.model.adjacentMines&&tile.model.isMine===!1){for(ref=tile.adjacentTiles,results=[],i=0,len=ref.length;len>i;i++)adjacentTile=ref[i],neighbor=this.get({x:tile.model.x+adjacentTile[0],y:tile.model.y+adjacentTile[1]}),shouldClearNeighbor=neighbor&&neighbor.model.isClear===!1&&neighbor.model.isMine===!1,results.push(shouldClearNeighbor?neighbor.clear():void 0);return results}},TilesCollection.prototype.get=function(attrs){return this.getAll(attrs)[0]},TilesCollection.prototype.getAll=function(attrs){var i,key,len,matches,numOfAttrs,numOfMatchedAttrs,ref,tile,val;if(matches=[],!attrs)return this.all;for(ref=this.all,i=0,len=ref.length;len>i;i++){tile=ref[i],numOfAttrs=0,numOfMatchedAttrs=0;for(key in attrs)val=attrs[key],numOfAttrs++,tile.model[key]===val&&numOfMatchedAttrs++;numOfMatchedAttrs===numOfAttrs&&matches.push(tile)}return matches},TilesCollection}(),module.exports=TilesCollection}).call(this)},{"../models/TileModel.coffee":17}],9:[function(require,module,exports){(function(){var Dashboard,ModalActions,R,TilesActions;ModalActions=require("../actions/ModalActions.coffee"),TilesActions=require("../actions/TilesActions.coffee"),R=React.DOM,Dashboard=React.createClass({displayName:"Dashboard",render:function(){return R.div({id:"dashboard"},[R.div({key:"new-game",className:"new-game button",onClick:function(){return ModalActions.toggle("newGame")}},"new game"),R.div({key:"select-tile",className:"select-tile button",onClick:TilesActions.clearSafeRandomTile},"clear a safe tile"),R.div({key:"instructions",className:"instructions button",onClick:function(){return ModalActions.toggle("instructions")}},"instructions")])}}),module.exports=Dashboard}).call(this)},{"../actions/ModalActions.coffee":4,"../actions/TilesActions.coffee":6}],10:[function(require,module,exports){(function(){var DashboardComponent,Dispatcher,Game,InfoComponent,ModalActions,ModalOverlayComponent,ModalStore,R,TileStore,TilesComponent,assign,getModalStoreState,getState,getTileStoreState;Dispatcher=require("../Dispatcher.coffee"),TileStore=require("../stores/TileStore.coffee"),ModalStore=require("../stores/ModalStore.coffee"),ModalActions=require("../actions/ModalActions.coffee"),TilesComponent=require("./TilesComponent.coffee"),InfoComponent=require("./InfoComponent.coffee"),DashboardComponent=require("./DashboardComponent.coffee"),ModalOverlayComponent=require("./modals/ModalOverlayComponent.coffee"),assign=require("object-assign"),R=React.DOM,getState=function(){return assign({},getTileStoreState(),getModalStoreState())},getTileStoreState=function(){return{all:TileStore.getAll(),info:TileStore.getInfo()}},getModalStoreState=function(){return{modals:ModalStore.getAll()}},Game=React.createClass({displayName:"Game",getInitialState:function(){return getState()},componentDidMount:function(){return TileStore.addChangeListener(this._onTileStoreChange),ModalStore.addChangeListener(this._onModalStoreChange)},componentWillUnmount:function(){return TileStore.removeChangeListener(this._onTileStoreChange),ModalStore.removeChangeListener(this._onModalStoreChange)},_onTileStoreChange:function(){var tilesState;return tilesState=getTileStoreState(),this.setState(tilesState)},_onModalStoreChange:function(){return this.setState(getModalStoreState())},render:function(){var boardWrappper,dashboard,info,overlays,tiles;return info=React.createElement(InfoComponent,{key:"info",info:this.state.info}),tiles=React.createElement(TilesComponent,{key:"tiles",tiles:this.state.all}),boardWrappper=R.div({id:"board-wrappper",key:"board-wrappper"},[info,tiles]),dashboard=React.createElement(DashboardComponent,{key:"dashboard"}),overlays=React.createElement(ModalOverlayComponent,{key:"modal-overlay",info:this.state.info,modals:this.state.modals}),R.div(null,[overlays,boardWrappper,dashboard])}}),module.exports=Game}).call(this)},{"../Dispatcher.coffee":3,"../actions/ModalActions.coffee":4,"../stores/ModalStore.coffee":18,"../stores/TileStore.coffee":19,"./DashboardComponent.coffee":9,"./InfoComponent.coffee":11,"./TilesComponent.coffee":13,"./modals/ModalOverlayComponent.coffee":16,"object-assign":26}],11:[function(require,module,exports){(function(){var Info,R;R=React.DOM,Info=React.createClass({displayName:"Info",render:function(){return R.ul({id:"stats"},[R.li({key:"tiles"},this.props.info.numOfTiles+" tiles"),R.li({key:"mines"},this.props.info.numOfMines+" mines"),R.li({key:"flagged"},this.props.info.numOfFlags+" flagged tiles"),R.li({key:"cleared"},this.props.info.numOfUncleared+" left to clear")])}}),module.exports=Info}).call(this)},{}],12:[function(require,module,exports){(function(){var R,Tile,TileActions;TileActions=require("../actions/TileActions.coffee"),R=React.DOM,Tile=React.createClass({displayName:"Tile",render:function(){return R.li({className:this.getClass(),onClick:this.clickHandler},R.span(null,this.getText()))},clickHandler:function($event){var flagKeyWasPressed;return $event?(flagKeyWasPressed=$event.shiftKey===!0||$event.altKey===!0,flagKeyWasPressed?TileActions.toggleFlag(this.props.tile.model.uid):TileActions.clear(this.props.tile.model.uid)):TileActions.clear(this.props.tile.model.uid)},isFirstColumn:function(){return 0===this.props.tile.model.x},hasBeenFlagged:function(){return this.props.tile.model.isClear!==!0&&this.props.tile.model.isFlagged===!0},hasBeenCleared:function(){return this.props.tile.model.isClear===!0},hasMine:function(){return this.props.tile.model.isMine===!0},shouldDisplayMine:function(){return this.hasMine()&&this.hasBeenCleared()},hasZeroAdjacentMines:function(){return 0===this.props.tile.model.adjacentMines&&this.hasBeenCleared()},getText:function(){var text;return text="",this.hasBeenCleared()?text=this.props.tile.model.adjacentMines:this.hasBeenFlagged()?text="?":this.shouldDisplayMine()&&(text="X"),text},getClass:function(){return["tile",this.isFirstColumn()?"nth":void 0,this.hasBeenCleared()?"clear":void 0,this.hasBeenFlagged()?"flagged":void 0,this.shouldDisplayMine()?"mine":void 0,this.hasZeroAdjacentMines()?"zero":void 0].join(" ")}}),module.exports=Tile}).call(this)},{"../actions/TileActions.coffee":5}],13:[function(require,module,exports){(function(){var R,TileComponent,Tiles;TileComponent=require("./TileComponent.coffee"),R=React.DOM,Tiles=React.createClass({displayName:"Tiles",render:function(){var tiles;return tiles=this.props.tiles.map(function(_this){return function(item,index){return React.createElement(TileComponent,{key:index,ref:item.model.uid,tile:item})}}(this)),R.ul({id:"board"},tiles)}}),module.exports=Tiles}).call(this)},{"./TileComponent.coffee":12}],14:[function(require,module,exports){(function(){var ModalActions,ModalOverlay,R;ModalActions=require("../../actions/ModalActions.coffee"),R=React.DOM,ModalOverlay=React.createClass({displayName:"ModalInstructions",getClass:function(){var classes;return classes=["message"],this.props.show||classes.push("hide"),classes.join(" ")},clickHandler:function(){return ModalActions.toggle("instructions")},render:function(){var button,controls,description;return description=R.div({key:"instructions-description"},[R.div({key:"instructions-header",className:"border-bottom"},"how to play"),R.div({key:"instructions-details",className:"border-bottom"},["the game is played by revealing tiles of the grid.","if a selected tile contains a mine, the player loses the game.","otherwise, a digit is revealed in the tile, indicating the number","of mines located in the eight adjacent tiles."].join(" ")),R.div({key:"instructions-click"},R.span({key:"instructions-click-code",className:"code"},"click"),R.span({key:"instructions-click-text"}," to reveal the squares of the grid.")),R.div({key:"instructions-click-hint",className:"border-bottom"},"(your first click will never land on a mine)")]),controls=R.div({key:"instructions-controls"},[R.span({key:"instructions-controls-code1",className:"code"},"shift + click"),R.span({key:"instructions-controls-text1"}," or "),R.span({key:"instructions-controls-code2",className:"code"},"alt + click"),R.span({key:"instructions-controls-text2"},' will "flag" a tile, helping you to remember where you think a mine is hidden')]),button=R.div({key:"instructions-button"},R.div({className:"button",onClick:this.clickHandler},"got it!")),R.div({key:"instructions-modal",className:this.getClass()},[description,controls,button])}}),module.exports=ModalOverlay}).call(this)},{"../../actions/ModalActions.coffee":4}],15:[function(require,module,exports){(function(){var ModalActions,ModalOverlay,R,TilesActions;ModalActions=require("../../actions/ModalActions.coffee"),TilesActions=require("../../actions/TilesActions.coffee"),R=React.DOM,ModalOverlay=React.createClass({displayName:"ModalNewGame",getClass:function(){var classes;return classes=["message"],this.props.show||classes.push("hide"),classes.join(" ")},getTitleText:function(){return!this.props.show||this.props.win||this.props.loss?this.props.win&&!this.props.loss?"you won!":this.props.win||this.props.win?void 0:"you lost...":"new game?"},clickHandlerNewGame:function(){return TilesActions.newGame()},clickHandlerExitModal:function(){return ModalActions.reset()},renderButtons:function(){var buttons;return buttons=[R.div({key:"new-game-start",className:"button",onClick:this.clickHandlerNewGame},"start!")],this.props.loss||buttons.push(R.div({key:"new-game-resume",className:"button",onClick:this.clickHandlerExitModal},"resume...")),R.div({key:"new-game-buttons"},buttons)},render:function(){var title;return title=R.div({key:"new-game-title-wrapper",className:"border-bottom"},R.div({key:"new-game-title",className:"title"},this.getTitleText())),R.div({key:"new-game-modal",className:this.getClass()},[title,this.renderButtons()])}}),module.exports=ModalOverlay}).call(this)},{"../../actions/ModalActions.coffee":4,"../../actions/TilesActions.coffee":6}],16:[function(require,module,exports){(function(){var InstructionsComponent,ModalActions,ModalOverlay,NewGameComponent,R;ModalActions=require("../../actions/ModalActions.coffee"),InstructionsComponent=require("./ModalInstructionsComponent.coffee"),NewGameComponent=require("./ModalNewGameComponent.coffee"),R=React.DOM,ModalOverlay=React.createClass({displayName:"ModalOverlay",getClass:function(){return this.props.modals.newGame?"":this.props.modals.instructions?"":"hide"},resetHandler:function(){return this.props.info.loss||this.props.info.win?void 0:ModalActions.reset()},instructionsHandler:function(){return ModalActions.toggle("instructions")},render:function(){var overlay;return overlay=R.div({id:"overlay",key:"overlay",className:this.getClass(),onClick:this.resetHandler},null),R.div(null,[overlay,React.createElement(InstructionsComponent,{key:"modal-instructions",show:this.props.modals.instructions}),React.createElement(NewGameComponent,{key:"modal-new-game",show:this.props.modals.newGame,win:this.props.info.win,loss:this.props.info.loss})])}}),module.exports=ModalOverlay}).call(this)},{"../../actions/ModalActions.coffee":4,"./ModalInstructionsComponent.coffee":14,"./ModalNewGameComponent.coffee":15}],17:[function(require,module,exports){(function(){var TileModel;Number.isInteger=Number.isInteger||function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value},module.exports=TileModel=function(){function TileModel(attrs){if(!Number.isInteger(attrs.x)||!Number.isInteger(attrs.y))throw"`x` and `y` are required Integer attributes to instantiate Tile";this.model={x:void 0,y:void 0,uid:void 0,isMine:!1,isClear:!1,isFlagged:!1,adjacentMines:0},this.adjacentTiles=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],this.set(attrs)}return TileModel.prototype.set=function(attrs){var attr,key;for(key in attrs)attr=attrs[key],this.model[key]=attr,this.model.uid=String(attrs.x)+"-"+String(attrs.y);return this},TileModel.prototype.toggleFlag=function(){return this.model.isFlagged=!this.model.isFlagged,this},TileModel.prototype.clear=function(){return this.model.isClear=!0,this.model.isFlagged=!1,this},TileModel}()}).call(this)},{}],18:[function(require,module,exports){(function(){var EventEmitter,ModalStore,Modals,ModalsCollection,assign;ModalsCollection=require("../collections/ModalsCollection.coffee"),EventEmitter=require("events").EventEmitter,assign=require("object-assign"),Modals=new ModalsCollection,Modals.set("newGame"),Modals.set("instructions"),ModalStore=assign({},EventEmitter.prototype,{event:"event",getAll:function(){return Modals.show},reset:function(){return Modals.reset()},toggle:function(modalName){return Modals.toggle(modalName)},emitChange:function(){return this.emit(this.event)},addChangeListener:function(callback){return this.on(this.event,callback)},removeChangeListener:function(callback){return this.removeListener(this.event,callback)}}),module.exports=ModalStore}).call(this)},{"../collections/ModalsCollection.coffee":7,events:23,"object-assign":26}],19:[function(require,module,exports){(function(){var EventEmitter,TileStore,Tiles,TilesCollection,assign;TilesCollection=require("../collections/TilesCollection.coffee"),EventEmitter=require("events").EventEmitter,assign=require("object-assign"),Tiles=new TilesCollection,Tiles.newGame(10,10,25),window.foo=Tiles,TileStore=assign({},EventEmitter.prototype,{event:"change",get:function(attrs){return Tiles.get(attrs)},getAll:function(){return Tiles.getAll()},getInfo:function(){return{win:Tiles.win,loss:Tiles.loss,numOfTiles:Tiles.all.length,numOfMines:Tiles.numOfMines,numOfFlags:Tiles.numOfFlags,numOfUncleared:Tiles.all.length-Tiles.numOfMines-Tiles.numOfClears}},randomSafeTile:function(){return Tiles.randomSafeTile()},newGame:function(x,y,mines){return Tiles.newGame(x,y,mines)},emitChange:function(){return this.emit(this.event)},addChangeListener:function(callback){return this.on(this.event,callback)},removeChangeListener:function(callback){return this.removeListener(this.event,callback)}}),module.exports=TileStore}).call(this)},{"../collections/TilesCollection.coffee":8,events:23,"object-assign":26}],20:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"./lib/Dispatcher":21,dup:2}],21:[function(require,module,exports){"use strict";function Dispatcher(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var invariant=require("./invariant"),_lastID=1,_prefix="ID_";Dispatcher.prototype.register=function(callback){var id=_prefix+_lastID++;return this.$Dispatcher_callbacks[id]=callback,id},Dispatcher.prototype.unregister=function(id){invariant(this.$Dispatcher_callbacks[id],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",id),delete this.$Dispatcher_callbacks[id]},Dispatcher.prototype.waitFor=function(ids){invariant(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var ii=0;ii<ids.length;ii++){var id=ids[ii];this.$Dispatcher_isPending[id]?invariant(this.$Dispatcher_isHandled[id],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",id):(invariant(this.$Dispatcher_callbacks[id],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",id),this.$Dispatcher_invokeCallback(id))}},Dispatcher.prototype.dispatch=function(payload){invariant(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(payload);try{for(var id in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[id]||this.$Dispatcher_invokeCallback(id)}finally{this.$Dispatcher_stopDispatching()}},Dispatcher.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},Dispatcher.prototype.$Dispatcher_invokeCallback=function(id){this.$Dispatcher_isPending[id]=!0,this.$Dispatcher_callbacks[id](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[id]=!0},Dispatcher.prototype.$Dispatcher_startDispatching=function(payload){for(var id in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[id]=!1,this.$Dispatcher_isHandled[id]=!1;this.$Dispatcher_pendingPayload=payload,this.$Dispatcher_isDispatching=!0},Dispatcher.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},module.exports=Dispatcher},{"./invariant":22}],22:[function(require,module,exports){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}throw error.framesToPop=1,error}};module.exports=invariant},{}],23:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}],24:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{"./invariant":25,dup:21}],25:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{dup:22}],26:[function(require,module,exports){"use strict";function ToObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=Object.assign||function(target,source){for(var from,keys,to=ToObject(target),s=1;s<arguments.length;s++){from=arguments[s],keys=Object.keys(Object(from));for(var i=0;i<keys.length;i++)to[keys[i]]=from[keys[i]]}return to}},{}]},{},[1,2]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJSZXNvdXJjZXMvY29mZmVlL0FwcC5jb2ZmZWUiLCJidWlsZC5qcyIsIm5vZGVfbW9kdWxlcy9mbHV4L2luZGV4LmpzIiwiUmVzb3VyY2VzL2NvZmZlZS9EaXNwYXRjaGVyLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvYWN0aW9ucy9Nb2RhbEFjdGlvbnMuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9hY3Rpb25zL1RpbGVBY3Rpb25zLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvYWN0aW9ucy9UaWxlc0FjdGlvbnMuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb2xsZWN0aW9ucy9Nb2RhbHNDb2xsZWN0aW9uLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvY29sbGVjdGlvbnMvVGlsZXNDb2xsZWN0aW9uLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvY29tcG9uZW50cy9EYXNoYm9hcmRDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL0dhbWVDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL0luZm9Db21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL1RpbGVDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL1RpbGVzQ29tcG9uZW50LmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvY29tcG9uZW50cy9tb2RhbHMvTW9kYWxJbnN0cnVjdGlvbnNDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL21vZGFscy9Nb2RhbE5ld0dhbWVDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9jb21wb25lbnRzL21vZGFscy9Nb2RhbE92ZXJsYXlDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9tb2RlbHMvVGlsZU1vZGVsLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvc3RvcmVzL01vZGFsU3RvcmUuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9zdG9yZXMvVGlsZVN0b3JlLmNvZmZlZSIsIm5vZGVfbW9kdWxlcy9GbHV4L2xpYi9EaXNwYXRjaGVyLmpzIiwibm9kZV9tb2R1bGVzL0ZsdXgvbGliL2ludmFyaWFudC5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIiwibm9kZV9tb2R1bGVzL29iamVjdC1hc3NpZ24vaW5kZXguanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLDEsIm1vZHVsZSIsIkdhbWVDb21wb25lbnQiLCJWaWV3Q29udHJvbGxlciIsIlJlYWN0IiwiY3JlYXRlRWxlbWVudCIsInJlbmRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aGlzIiwiLi9jb21wb25lbnRzL0dhbWVDb21wb25lbnQuY29mZmVlIiwyLCJEaXNwYXRjaGVyIiwiLi9saWIvRGlzcGF0Y2hlciIsMywiQXBwRGlzcGF0Y2hlciIsIk1vZGFsU3RvcmUiLCJUaWxlU3RvcmUiLCJjaGFuZ2VNb2RhbCIsIm9uVGlsZXNDaGFuZ2UiLCJuYW1lIiwidG9nZ2xlIiwicmVzZXQiLCJlbWl0Q2hhbmdlIiwiaW5mbyIsImdldEluZm8iLCJ3aW4iLCJsb3NzIiwiTW9kYWxBY3Rpb25zIiwicmVnaXN0ZXIiLCJldmVudCIsInRpbGUiLCJ0eXBlIiwiZ2V0IiwidWlkIiwidG9nZ2xlRmxhZyIsImNsZWFyIiwicmFuZG9tU2FmZVRpbGUiLCJuZXdHYW1lIiwiLi9zdG9yZXMvTW9kYWxTdG9yZS5jb2ZmZWUiLCIuL3N0b3Jlcy9UaWxlU3RvcmUuY29mZmVlIiwiRmx1eCIsNCwiZGlzcGF0Y2giLCIuLi9EaXNwYXRjaGVyLmNvZmZlZSIsNSw2LCJjbGVhclNhZmVSYW5kb21UaWxlIiw3LCJNb2RhbHNDb2xsZWN0aW9uIiwic2hvdyIsInByb3RvdHlwZSIsInNldCIsImZpbGVOYW1lIiwiaXNCZWluZ1Nob3duIiwibW9kYWxOYW1lIiwicmVmIiwicmVzdWx0cyIsInB1c2giLCJrZXkiLCJzaG93TW9kYWwiLDgsIlRpbGVNb2RlbCIsIlRpbGVzQ29sbGVjdGlvbiIsImV4dGVuZCIsImNoaWxkIiwicGFyZW50IiwiY3RvciIsImNvbnN0cnVjdG9yIiwiaGFzUHJvcCIsIl9fc3VwZXJfXyIsImhhc093blByb3BlcnR5IiwiTW9kZWwiLCJjb2xsZWN0aW9uIiwiYWxsIiwibW9kZWwiLCJzdXBlckNsYXNzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJjbGVhck5laWdoYm9ycyIsIm1vdmVVcGRhdGUiLCJ4IiwieSIsIm1pbmVzIiwiYXR0cnMiLCJqIiwiayIsIm1pbmVOdW0iLCJyZWYxIiwicmVmMiIsInNpemVYIiwic2l6ZVkiLCJudW1PZk1pbmVzIiwiYWRkIiwiaXNNaW5lIiwidGFsbHlNaW5lcyIsImdhbWVVcGRhdGUiLCJub01pbmVGaXJzdENsaWNrIiwibnVtT2ZDbGVhcnMiLCJmaW5kQXR0cnMiLCJyYW5kb21JbmRleCIsInNhZmVUaWxlcyIsImlzQ2xlYXIiLCJnZXRBbGwiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhZGphY2VudFRpbGUiLCJsZW4iLCJsZW4xIiwibmVpZ2hib3JBdHRycyIsIm5laWdoYm9yTWluZSIsIm5laWdoYm9yTWluZXMiLCJuZWlnaGJvclgiLCJuZWlnaGJvclkiLCJhZGphY2VudFRpbGVzIiwiYWRqYWNlbnRNaW5lcyIsIm1heCIsIm1hcCIsIm51bU9mRmxhZ3MiLCJpc0ZsYWdnZWQiLCJuZWlnaGJvciIsInNob3VsZENsZWFyTmVpZ2hib3IiLCJzaG91bGRDbGVhck5laWdoYm9ycyIsIm1hdGNoZXMiLCJudW1PZkF0dHJzIiwibnVtT2ZNYXRjaGVkQXR0cnMiLCJ2YWwiLCIuLi9tb2RlbHMvVGlsZU1vZGVsLmNvZmZlZSIsOSwiRGFzaGJvYXJkIiwiUiIsIlRpbGVzQWN0aW9ucyIsIkRPTSIsImNyZWF0ZUNsYXNzIiwiZGlzcGxheU5hbWUiLCJkaXYiLCJpZCIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCIuLi9hY3Rpb25zL01vZGFsQWN0aW9ucy5jb2ZmZWUiLCIuLi9hY3Rpb25zL1RpbGVzQWN0aW9ucy5jb2ZmZWUiLDEwLCJEYXNoYm9hcmRDb21wb25lbnQiLCJHYW1lIiwiSW5mb0NvbXBvbmVudCIsIk1vZGFsT3ZlcmxheUNvbXBvbmVudCIsIlRpbGVzQ29tcG9uZW50IiwiYXNzaWduIiwiZ2V0TW9kYWxTdG9yZVN0YXRlIiwiZ2V0U3RhdGUiLCJnZXRUaWxlU3RvcmVTdGF0ZSIsIm1vZGFscyIsImdldEluaXRpYWxTdGF0ZSIsImNvbXBvbmVudERpZE1vdW50IiwiYWRkQ2hhbmdlTGlzdGVuZXIiLCJfb25UaWxlU3RvcmVDaGFuZ2UiLCJfb25Nb2RhbFN0b3JlQ2hhbmdlIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJyZW1vdmVDaGFuZ2VMaXN0ZW5lciIsInRpbGVzU3RhdGUiLCJzZXRTdGF0ZSIsImJvYXJkV3JhcHBwZXIiLCJkYXNoYm9hcmQiLCJvdmVybGF5cyIsInRpbGVzIiwic3RhdGUiLCIuLi9zdG9yZXMvTW9kYWxTdG9yZS5jb2ZmZWUiLCIuLi9zdG9yZXMvVGlsZVN0b3JlLmNvZmZlZSIsIi4vRGFzaGJvYXJkQ29tcG9uZW50LmNvZmZlZSIsIi4vSW5mb0NvbXBvbmVudC5jb2ZmZWUiLCIuL1RpbGVzQ29tcG9uZW50LmNvZmZlZSIsIi4vbW9kYWxzL01vZGFsT3ZlcmxheUNvbXBvbmVudC5jb2ZmZWUiLCJvYmplY3QtYXNzaWduIiwxMSwiSW5mbyIsInVsIiwibGkiLCJwcm9wcyIsIm51bU9mVGlsZXMiLCJudW1PZlVuY2xlYXJlZCIsMTIsIlRpbGUiLCJUaWxlQWN0aW9ucyIsImdldENsYXNzIiwiY2xpY2tIYW5kbGVyIiwic3BhbiIsImdldFRleHQiLCIkZXZlbnQiLCJmbGFnS2V5V2FzUHJlc3NlZCIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiaXNGaXJzdENvbHVtbiIsImhhc0JlZW5GbGFnZ2VkIiwiaGFzQmVlbkNsZWFyZWQiLCJoYXNNaW5lIiwic2hvdWxkRGlzcGxheU1pbmUiLCJoYXNaZXJvQWRqYWNlbnRNaW5lcyIsInRleHQiLCJqb2luIiwiLi4vYWN0aW9ucy9UaWxlQWN0aW9ucy5jb2ZmZWUiLDEzLCJUaWxlQ29tcG9uZW50IiwiVGlsZXMiLCJfdGhpcyIsIml0ZW0iLCJpbmRleCIsIi4vVGlsZUNvbXBvbmVudC5jb2ZmZWUiLDE0LCJNb2RhbE92ZXJsYXkiLCJjbGFzc2VzIiwiYnV0dG9uIiwiY29udHJvbHMiLCJkZXNjcmlwdGlvbiIsIi4uLy4uL2FjdGlvbnMvTW9kYWxBY3Rpb25zLmNvZmZlZSIsMTUsImdldFRpdGxlVGV4dCIsImNsaWNrSGFuZGxlck5ld0dhbWUiLCJjbGlja0hhbmRsZXJFeGl0TW9kYWwiLCJyZW5kZXJCdXR0b25zIiwiYnV0dG9ucyIsInRpdGxlIiwiLi4vLi4vYWN0aW9ucy9UaWxlc0FjdGlvbnMuY29mZmVlIiwxNiwiSW5zdHJ1Y3Rpb25zQ29tcG9uZW50IiwiTmV3R2FtZUNvbXBvbmVudCIsImluc3RydWN0aW9ucyIsInJlc2V0SGFuZGxlciIsImluc3RydWN0aW9uc0hhbmRsZXIiLCJvdmVybGF5IiwiLi9Nb2RhbEluc3RydWN0aW9uc0NvbXBvbmVudC5jb2ZmZWUiLCIuL01vZGFsTmV3R2FtZUNvbXBvbmVudC5jb2ZmZWUiLDE3LCJOdW1iZXIiLCJpc0ludGVnZXIiLCJ2YWx1ZSIsImlzRmluaXRlIiwiYXR0ciIsIlN0cmluZyIsMTgsIkV2ZW50RW1pdHRlciIsIk1vZGFscyIsImVtaXQiLCJjYWxsYmFjayIsIm9uIiwicmVtb3ZlTGlzdGVuZXIiLCIuLi9jb2xsZWN0aW9ucy9Nb2RhbHNDb2xsZWN0aW9uLmNvZmZlZSIsImV2ZW50cyIsMTksIndpbmRvdyIsImZvbyIsIi4uL2NvbGxlY3Rpb25zL1RpbGVzQ29sbGVjdGlvbi5jb2ZmZWUiLDIwLCJkdXAiLDIxLCIkRGlzcGF0Y2hlcl9jYWxsYmFja3MiLCIkRGlzcGF0Y2hlcl9pc1BlbmRpbmciLCIkRGlzcGF0Y2hlcl9pc0hhbmRsZWQiLCIkRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nIiwiJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQiLCJpbnZhcmlhbnQiLCJfbGFzdElEIiwiX3ByZWZpeCIsInVucmVnaXN0ZXIiLCJ3YWl0Rm9yIiwiaWRzIiwiaWkiLCIkRGlzcGF0Y2hlcl9pbnZva2VDYWxsYmFjayIsInBheWxvYWQiLCIkRGlzcGF0Y2hlcl9zdGFydERpc3BhdGNoaW5nIiwiJERpc3BhdGNoZXJfc3RvcERpc3BhdGNoaW5nIiwiaXNEaXNwYXRjaGluZyIsIi4vaW52YXJpYW50IiwyMiwiY29uZGl0aW9uIiwiZm9ybWF0IiwiYiIsImMiLCJkIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJhcmdzIiwiYXJnSW5kZXgiLCJyZXBsYWNlIiwiZnJhbWVzVG9Qb3AiLDIzLCJfZXZlbnRzIiwiX21heExpc3RlbmVycyIsImlzRnVuY3Rpb24iLCJhcmciLCJpc051bWJlciIsImlzT2JqZWN0IiwiaXNVbmRlZmluZWQiLCJkZWZhdWx0TWF4TGlzdGVuZXJzIiwic2V0TWF4TGlzdGVuZXJzIiwiaXNOYU4iLCJUeXBlRXJyb3IiLCJlciIsImhhbmRsZXIiLCJsaXN0ZW5lcnMiLCJBcnJheSIsInNsaWNlIiwiYWRkTGlzdGVuZXIiLCJsaXN0ZW5lciIsIm0iLCJuZXdMaXN0ZW5lciIsIndhcm5lZCIsImNvbnNvbGUiLCJ0cmFjZSIsIm9uY2UiLCJnIiwiZmlyZWQiLCJsaXN0IiwicG9zaXRpb24iLCJzcGxpY2UiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJyZXQiLCJsaXN0ZW5lckNvdW50IiwiZW1pdHRlciIsMjQsMjUsMjYsIlRvT2JqZWN0IiwiT2JqZWN0IiwidGFyZ2V0Iiwic291cmNlIiwiZnJvbSIsImtleXMiLCJ0byJdLCJt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Z0MsUUFBQWhDLFFBQUE5UCxNQUVBZ1EsV0FBQThCLFFBQUFoQyxRQUFBOVAsT0FDQSxFQUVBOFIsUUFBQWhDLFFBQUE5UCxNQUFBakMsT0FKQSxRckJtMkNNZ1UsSUFBSSxTQUFTeFUsUUFBUVUsT0FBT0osU0FDbENpRixVQUFVLEdBQUcsSUFBSSxHQUFHRCxNQUFNaEYsUUFBUWlGLGFBQy9Ca00sY0FBYyxHQUFHbkIsSUFBTSxLQUFLbUUsSUFBSSxTQUFTelUsUUFBUVUsT0FBT0osU0FDM0RpRixVQUFVLEdBQUcsSUFBSSxHQUFHRCxNQUFNaEYsUUFBUWlGLGFBQy9CK0ssSUFBTSxLQUFLb0UsSUFBSSxTQUFTMVUsUUFBUVUsT0FBT0osU3NCN25EMUMsWUFFQSxTQUFBcVUsVUFBQW5NLEtBQ0EsR0FBQSxNQUFBQSxJQUNBLEtBQUEsSUFBQXlLLFdBQUEsd0RBR0EsT0FBQTJCLFFBQUFwTSxLQUdBOUgsT0FBQUosUUFBQXNVLE9BQUEvSyxRQUFBLFNBQUFnTCxPQUFBQyxRQUtBLElBQUEsR0FKQUMsTUFDQUMsS0FDQUMsR0FBQU4sU0FBQUUsUUFFQWpWLEVBQUEsRUFBQUEsRUFBQTJGLFVBQUEvRSxPQUFBWixJQUFBLENBQ0FtVixLQUFBeFAsVUFBQTNGLEdBQ0FvVixLQUFBSixPQUFBSSxLQUFBSixPQUFBRyxNQUVBLEtBQUEsR0FBQTlVLEdBQUEsRUFBQUEsRUFBQStVLEtBQUF4VSxPQUFBUCxJQUNBZ1YsR0FBQUQsS0FBQS9VLElBQUE4VSxLQUFBQyxLQUFBL1UsSUFJQSxNQUFBZ1YsZXRCaW9EVyxFQUFFIiwiZmlsZSI6ImJ1aWxkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBHYW1lQ29tcG9uZW50LCBWaWV3Q29udHJvbGxlcjtcblxuICBHYW1lQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL0dhbWVDb21wb25lbnQuY29mZmVlJyk7XG5cbiAgVmlld0NvbnRyb2xsZXIgPSBSZWFjdC5jcmVhdGVFbGVtZW50KEdhbWVDb21wb25lbnQsIG51bGwpO1xuXG4gIFJlYWN0LnJlbmRlcihWaWV3Q29udHJvbGxlciwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmVzd2VlcGVyJykpO1xuXG59KS5jYWxsKHRoaXMpO1xuIixudWxsLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMuRGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vbGliL0Rpc3BhdGNoZXInKVxuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgQXBwRGlzcGF0Y2hlciwgRGlzcGF0Y2hlciwgTW9kYWxTdG9yZSwgVGlsZVN0b3JlLCBjaGFuZ2VNb2RhbCwgb25UaWxlc0NoYW5nZTtcblxuICBEaXNwYXRjaGVyID0gcmVxdWlyZSgnRmx1eCcpLkRpc3BhdGNoZXI7XG5cbiAgQXBwRGlzcGF0Y2hlciA9IG5ldyBEaXNwYXRjaGVyKCk7XG5cbiAgVGlsZVN0b3JlID0gcmVxdWlyZSgnLi9zdG9yZXMvVGlsZVN0b3JlLmNvZmZlZScpO1xuXG4gIE1vZGFsU3RvcmUgPSByZXF1aXJlKCcuL3N0b3Jlcy9Nb2RhbFN0b3JlLmNvZmZlZScpO1xuXG4gIGNoYW5nZU1vZGFsID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICghbmFtZSkge1xuICAgICAgTW9kYWxTdG9yZS5yZXNldCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBNb2RhbFN0b3JlLnRvZ2dsZShuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIE1vZGFsU3RvcmUuZW1pdENoYW5nZSgpO1xuICB9O1xuXG4gIG9uVGlsZXNDaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5mbztcbiAgICBpbmZvID0gVGlsZVN0b3JlLmdldEluZm8oKTtcbiAgICBpZiAoaW5mby53aW4gfHwgaW5mby5sb3NzKSB7XG4gICAgICBNb2RhbEFjdGlvbnMudG9nZ2xlKCduZXdHYW1lJyk7XG4gICAgfVxuICAgIHJldHVybiBUaWxlU3RvcmUuZW1pdENoYW5nZSgpO1xuICB9O1xuXG4gIEFwcERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgdGlsZTtcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ1RJTEVfRkxBR19UT0dHTEUnOlxuICAgICAgICB0aWxlID0gVGlsZVN0b3JlLmdldCh7XG4gICAgICAgICAgdWlkOiBldmVudC51aWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRpbGUudG9nZ2xlRmxhZygpO1xuICAgICAgICByZXR1cm4gb25UaWxlc0NoYW5nZSgpO1xuICAgICAgY2FzZSAnVElMRV9DTEVBUic6XG4gICAgICAgIHRpbGUgPSBUaWxlU3RvcmUuZ2V0KHtcbiAgICAgICAgICB1aWQ6IGV2ZW50LnVpZFxuICAgICAgICB9KTtcbiAgICAgICAgdGlsZS5jbGVhcigpO1xuICAgICAgICByZXR1cm4gb25UaWxlc0NoYW5nZSgpO1xuICAgICAgY2FzZSAnVElMRVNfQ0xFQVJfU0FGRV9SQU5ET00nOlxuICAgICAgICB0aWxlID0gVGlsZVN0b3JlLnJhbmRvbVNhZmVUaWxlKCk7XG4gICAgICAgIGlmICh0aWxlKSB7XG4gICAgICAgICAgdGlsZS5jbGVhcigpO1xuICAgICAgICAgIHJldHVybiBvblRpbGVzQ2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdUSUxFU19ORVdfR0FNRSc6XG4gICAgICAgIFRpbGVTdG9yZS5uZXdHYW1lKDEwLCAxMCwgMjUpO1xuICAgICAgICBvblRpbGVzQ2hhbmdlKCk7XG4gICAgICAgIHJldHVybiBjaGFuZ2VNb2RhbCgnbmV3R2FtZScpO1xuICAgICAgY2FzZSAnTU9EQUxfVE9HR0xFJzpcbiAgICAgICAgTW9kYWxTdG9yZS50b2dnbGUoZXZlbnQubmFtZSk7XG4gICAgICAgIHJldHVybiBNb2RhbFN0b3JlLmVtaXRDaGFuZ2UoKTtcbiAgICAgIGNhc2UgJ01PREFMX1JFU0VUJzpcbiAgICAgICAgcmV0dXJuIGNoYW5nZU1vZGFsKCk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IEFwcERpc3BhdGNoZXI7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBEaXNwYXRjaGVyO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9EaXNwYXRjaGVyLmNvZmZlZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIHRvZ2dsZTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnTU9EQUxfVE9HR0xFJyxcbiAgICAgICAgbmFtZTogbmFtZVxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdNT0RBTF9SRVNFVCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIERpc3BhdGNoZXI7XG5cbiAgRGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4uL0Rpc3BhdGNoZXIuY29mZmVlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgdG9nZ2xlRmxhZzogZnVuY3Rpb24odWlkKSB7XG4gICAgICByZXR1cm4gRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdUSUxFX0ZMQUdfVE9HR0xFJyxcbiAgICAgICAgdWlkOiB1aWRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKHVpZCkge1xuICAgICAgcmV0dXJuIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnVElMRV9DTEVBUicsXG4gICAgICAgIHVpZDogdWlkXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBEaXNwYXRjaGVyO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9EaXNwYXRjaGVyLmNvZmZlZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIGNsZWFyU2FmZVJhbmRvbVRpbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnVElMRVNfQ0xFQVJfU0FGRV9SQU5ET00nXG4gICAgICB9KTtcbiAgICB9LFxuICAgIG5ld0dhbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnVElMRVNfTkVXX0dBTUUnXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBNb2RhbHNDb2xsZWN0aW9uO1xuXG4gIE1vZGFsc0NvbGxlY3Rpb24gPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gTW9kYWxzQ29sbGVjdGlvbigpIHtcbiAgICAgIHRoaXMuc2hvdyA9IHt9O1xuICAgIH1cblxuICAgIE1vZGFsc0NvbGxlY3Rpb24ucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGZpbGVOYW1lKSB7XG4gICAgICB0aGlzLnNob3dbZmlsZU5hbWVdID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kYWxzQ29sbGVjdGlvbi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIGlzQmVpbmdTaG93biwgbW9kYWxOYW1lLCByZWYsIHJlc3VsdHM7XG4gICAgICByZWYgPSB0aGlzLnNob3c7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKG1vZGFsTmFtZSBpbiByZWYpIHtcbiAgICAgICAgaXNCZWluZ1Nob3duID0gcmVmW21vZGFsTmFtZV07XG4gICAgICAgIGlmIChtb2RhbE5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5zaG93W21vZGFsTmFtZV0gPSAhaXNCZWluZ1Nob3duKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goaXNCZWluZ1Nob3duID0gZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgTW9kYWxzQ29sbGVjdGlvbi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBrZXksIHJlZiwgc2hvd01vZGFsO1xuICAgICAgcmVmID0gdGhpcy5zaG93O1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIHNob3dNb2RhbCA9IHJlZltrZXldO1xuICAgICAgICB0aGlzLnNob3dba2V5XSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHJldHVybiBNb2RhbHNDb2xsZWN0aW9uO1xuXG4gIH0pKCk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBNb2RhbHNDb2xsZWN0aW9uO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgVGlsZU1vZGVsLCBUaWxlc0NvbGxlY3Rpb24sXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBUaWxlTW9kZWwgPSByZXF1aXJlKCcuLi9tb2RlbHMvVGlsZU1vZGVsLmNvZmZlZScpO1xuXG4gIFRpbGVzQ29sbGVjdGlvbiA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBUaWxlc0NvbGxlY3Rpb24oKSB7XG4gICAgICB2YXIgTW9kZWwsIGNvbGxlY3Rpb247XG4gICAgICB0aGlzLmFsbCA9IFtdO1xuICAgICAgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICB0aGlzLm1vZGVsID0gTW9kZWwgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgICAgICBleHRlbmQoTW9kZWwsIHN1cGVyQ2xhc3MpO1xuXG4gICAgICAgIGZ1bmN0aW9uIE1vZGVsKCkge1xuICAgICAgICAgIHJldHVybiBNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE1vZGVsLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIE1vZGVsLl9fc3VwZXJfXy5jbGVhci5jYWxsKHRoaXMpO1xuICAgICAgICAgIGNvbGxlY3Rpb24uY2xlYXJOZWlnaGJvcnModGhpcyk7XG4gICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb24ubW92ZVVwZGF0ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIE1vZGVsLnByb3RvdHlwZS50b2dnbGVGbGFnID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgTW9kZWwuX19zdXBlcl9fLnRvZ2dsZUZsYWcuY2FsbCh0aGlzKTtcbiAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5tb3ZlVXBkYXRlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIE1vZGVsO1xuXG4gICAgICB9KShUaWxlTW9kZWwpO1xuICAgIH1cblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUubmV3R2FtZSA9IGZ1bmN0aW9uKHgsIHksIG1pbmVzKSB7XG4gICAgICB2YXIgYXR0cnMsIGksIGosIGssIG1pbmVOdW0sIHJlZiwgcmVmMSwgcmVmMiwgdGlsZTtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgIHRoaXMuc2l6ZVggPSB4O1xuICAgICAgdGhpcy5zaXplWSA9IHk7XG4gICAgICB0aGlzLm51bU9mTWluZXMgPSBtaW5lcztcbiAgICAgIGZvciAoeSA9IGkgPSAwLCByZWYgPSB0aGlzLnNpemVZIC0gMTsgMCA8PSByZWYgPyBpIDw9IHJlZiA6IGkgPj0gcmVmOyB5ID0gMCA8PSByZWYgPyArK2kgOiAtLWkpIHtcbiAgICAgICAgZm9yICh4ID0gaiA9IDAsIHJlZjEgPSB0aGlzLnNpemVYIC0gMTsgMCA8PSByZWYxID8gaiA8PSByZWYxIDogaiA+PSByZWYxOyB4ID0gMCA8PSByZWYxID8gKytqIDogLS1qKSB7XG4gICAgICAgICAgYXR0cnMgPSB7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeVxuICAgICAgICAgIH07XG4gICAgICAgICAgdGhpcy5hZGQoYXR0cnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKG1pbmVOdW0gPSBrID0gMSwgcmVmMiA9IHRoaXMubnVtT2ZNaW5lczsgMSA8PSByZWYyID8gayA8PSByZWYyIDogayA+PSByZWYyOyBtaW5lTnVtID0gMSA8PSByZWYyID8gKytrIDogLS1rKSB7XG4gICAgICAgIHRpbGUgPSB0aGlzLnJhbmRvbVNhZmVUaWxlKCk7XG4gICAgICAgIHRpbGUubW9kZWwuaXNNaW5lID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMudGFsbHlNaW5lcygpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2FtZVVwZGF0ZSgpO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLm5vTWluZUZpcnN0Q2xpY2sgPSBmdW5jdGlvbih0aWxlKSB7XG4gICAgICBpZiAodGhpcy5udW1PZkNsZWFycyA9PT0gMCAmJiB0aWxlLm1vZGVsLmlzTWluZSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aWxlLm1vZGVsLmlzTWluZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJhbmRvbVNhZmVUaWxlKCkubW9kZWwuaXNNaW5lID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50YWxseU1pbmVzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgdmFyIHRpbGU7XG4gICAgICB0aWxlID0gbmV3IHRoaXMubW9kZWwobW9kZWwpO1xuICAgICAgdGhpcy5hbGwucHVzaCh0aWxlKTtcbiAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmFsbCA9IFtdO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUucmFuZG9tU2FmZVRpbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBmaW5kQXR0cnMsIHJhbmRvbUluZGV4LCBzYWZlVGlsZXM7XG4gICAgICBmaW5kQXR0cnMgPSB7XG4gICAgICAgIGlzQ2xlYXI6IGZhbHNlLFxuICAgICAgICBpc01pbmU6IGZhbHNlXG4gICAgICB9O1xuICAgICAgc2FmZVRpbGVzID0gdGhpcy5nZXRBbGwoZmluZEF0dHJzKTtcbiAgICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2FmZVRpbGVzLmxlbmd0aCk7XG4gICAgICByZXR1cm4gc2FmZVRpbGVzW3JhbmRvbUluZGV4XTtcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS50YWxseU1pbmVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYWRqYWNlbnRUaWxlLCBpLCBqLCBsZW4sIGxlbjEsIG5laWdoYm9yQXR0cnMsIG5laWdoYm9yTWluZSwgbmVpZ2hib3JNaW5lcywgbmVpZ2hib3JYLCBuZWlnaGJvclksIHJlZiwgcmVmMSwgcmVzdWx0cywgdGlsZTtcbiAgICAgIHJlZiA9IHRoaXMuYWxsO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRpbGUgPSByZWZbaV07XG4gICAgICAgIG5laWdoYm9yTWluZXMgPSAwO1xuICAgICAgICByZWYxID0gdGlsZS5hZGphY2VudFRpbGVzO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICBhZGphY2VudFRpbGUgPSByZWYxW2pdO1xuICAgICAgICAgIG5laWdoYm9yWCA9IHRpbGUubW9kZWwueCArIGFkamFjZW50VGlsZVswXTtcbiAgICAgICAgICBuZWlnaGJvclkgPSB0aWxlLm1vZGVsLnkgKyBhZGphY2VudFRpbGVbMV07XG4gICAgICAgICAgbmVpZ2hib3JBdHRycyA9IHtcbiAgICAgICAgICAgIGlzTWluZTogdHJ1ZSxcbiAgICAgICAgICAgIHg6IG5laWdoYm9yWCxcbiAgICAgICAgICAgIHk6IG5laWdoYm9yWVxuICAgICAgICAgIH07XG4gICAgICAgICAgbmVpZ2hib3JNaW5lID0gdGhpcy5nZXQobmVpZ2hib3JBdHRycyk7XG4gICAgICAgICAgaWYgKG5laWdoYm9yTWluZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBuZWlnaGJvck1pbmVzKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aWxlLm1vZGVsLmFkamFjZW50TWluZXMgPSBuZWlnaGJvck1pbmVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdhbWVVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBsZW4sIHJlZiwgdGlsZTtcbiAgICAgIHRoaXMueCA9IE1hdGgubWF4LmFwcGx5KHRoaXMsIHRoaXMuYWxsLm1hcChmdW5jdGlvbih0aWxlKSB7XG4gICAgICAgIHJldHVybiB0aWxlLm1vZGVsLng7XG4gICAgICB9KSk7XG4gICAgICB0aGlzLnkgPSBNYXRoLm1heC5hcHBseSh0aGlzLCB0aGlzLmFsbC5tYXAoZnVuY3Rpb24odGlsZSkge1xuICAgICAgICByZXR1cm4gdGlsZS5tb2RlbC55O1xuICAgICAgfSkpO1xuICAgICAgdGhpcy54ID0gdGhpcy54LS07XG4gICAgICB0aGlzLnkgPSB0aGlzLnktLTtcbiAgICAgIHRoaXMubnVtT2ZNaW5lcyA9IDA7XG4gICAgICByZWYgPSB0aGlzLmFsbDtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aWxlID0gcmVmW2ldO1xuICAgICAgICBpZiAodGlsZS5tb2RlbC5pc01pbmUgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLm51bU9mTWluZXMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMubW92ZVVwZGF0ZSgpO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLm1vdmVVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBsZW4sIHJlZiwgdGlsZTtcbiAgICAgIHRoaXMubG9zcyA9IGZhbHNlO1xuICAgICAgdGhpcy53aW4gPSBmYWxzZTtcbiAgICAgIHRoaXMubnVtT2ZDbGVhcnMgPSAwO1xuICAgICAgdGhpcy5udW1PZkZsYWdzID0gMDtcbiAgICAgIHJlZiA9IHRoaXMuYWxsO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRpbGUgPSByZWZbaV07XG4gICAgICAgIGlmICh0aWxlLm1vZGVsLmlzQ2xlYXIgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLm51bU9mQ2xlYXJzKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGUubW9kZWwuaXNGbGFnZ2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5udW1PZkZsYWdzKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGUubW9kZWwuaXNNaW5lID09PSB0cnVlICYmIHRpbGUubW9kZWwuaXNDbGVhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMubG9zcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxvc3MgPT09IGZhbHNlICYmIHRoaXMuYWxsLmxlbmd0aCAtIHRoaXMubnVtT2ZNaW5lcyAtIHRoaXMubnVtT2ZDbGVhcnMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2luID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5jbGVhck5laWdoYm9ycyA9IGZ1bmN0aW9uKHRpbGUpIHtcbiAgICAgIHZhciBhZGphY2VudFRpbGUsIGksIGxlbiwgbmVpZ2hib3IsIHJlZiwgcmVzdWx0cywgc2hvdWxkQ2xlYXJOZWlnaGJvciwgc2hvdWxkQ2xlYXJOZWlnaGJvcnM7XG4gICAgICBzaG91bGRDbGVhck5laWdoYm9ycyA9IHRpbGUubW9kZWwuYWRqYWNlbnRNaW5lcyA9PT0gMCAmJiB0aWxlLm1vZGVsLmlzTWluZSA9PT0gZmFsc2U7XG4gICAgICBpZiAoc2hvdWxkQ2xlYXJOZWlnaGJvcnMpIHtcbiAgICAgICAgcmVmID0gdGlsZS5hZGphY2VudFRpbGVzO1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGFkamFjZW50VGlsZSA9IHJlZltpXTtcbiAgICAgICAgICBuZWlnaGJvciA9IHRoaXMuZ2V0KHtcbiAgICAgICAgICAgIHg6IHRpbGUubW9kZWwueCArIGFkamFjZW50VGlsZVswXSxcbiAgICAgICAgICAgIHk6IHRpbGUubW9kZWwueSArIGFkamFjZW50VGlsZVsxXVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNob3VsZENsZWFyTmVpZ2hib3IgPSBuZWlnaGJvciAmJiBuZWlnaGJvci5tb2RlbC5pc0NsZWFyID09PSBmYWxzZSAmJiBuZWlnaGJvci5tb2RlbC5pc01pbmUgPT09IGZhbHNlO1xuICAgICAgICAgIGlmIChzaG91bGRDbGVhck5laWdoYm9yKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gobmVpZ2hib3IuY2xlYXIoKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh2b2lkIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihhdHRycykge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsKGF0dHJzKVswXTtcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihhdHRycykge1xuICAgICAgdmFyIGksIGtleSwgbGVuLCBtYXRjaGVzLCBudW1PZkF0dHJzLCBudW1PZk1hdGNoZWRBdHRycywgcmVmLCB0aWxlLCB2YWw7XG4gICAgICBtYXRjaGVzID0gW107XG4gICAgICBpZiAoIWF0dHJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFsbDtcbiAgICAgIH1cbiAgICAgIHJlZiA9IHRoaXMuYWxsO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRpbGUgPSByZWZbaV07XG4gICAgICAgIG51bU9mQXR0cnMgPSAwO1xuICAgICAgICBudW1PZk1hdGNoZWRBdHRycyA9IDA7XG4gICAgICAgIGZvciAoa2V5IGluIGF0dHJzKSB7XG4gICAgICAgICAgdmFsID0gYXR0cnNba2V5XTtcbiAgICAgICAgICBudW1PZkF0dHJzKys7XG4gICAgICAgICAgaWYgKHRpbGUubW9kZWxba2V5XSA9PT0gdmFsKSB7XG4gICAgICAgICAgICBudW1PZk1hdGNoZWRBdHRycysrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobnVtT2ZNYXRjaGVkQXR0cnMgPT09IG51bU9mQXR0cnMpIHtcbiAgICAgICAgICBtYXRjaGVzLnB1c2godGlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGlsZXNDb2xsZWN0aW9uO1xuXG4gIH0pKCk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBUaWxlc0NvbGxlY3Rpb247XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBEYXNoYm9hcmQsIE1vZGFsQWN0aW9ucywgUiwgVGlsZXNBY3Rpb25zO1xuXG4gIE1vZGFsQWN0aW9ucyA9IHJlcXVpcmUoJy4uL2FjdGlvbnMvTW9kYWxBY3Rpb25zLmNvZmZlZScpO1xuXG4gIFRpbGVzQWN0aW9ucyA9IHJlcXVpcmUoJy4uL2FjdGlvbnMvVGlsZXNBY3Rpb25zLmNvZmZlZScpO1xuXG4gIFIgPSBSZWFjdC5ET007XG5cbiAgRGFzaGJvYXJkID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnRGFzaGJvYXJkJyxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFIuZGl2KHtcbiAgICAgICAgaWQ6ICdkYXNoYm9hcmQnXG4gICAgICB9LCBbXG4gICAgICAgIFIuZGl2KHtcbiAgICAgICAgICBrZXk6ICduZXctZ2FtZScsXG4gICAgICAgICAgY2xhc3NOYW1lOiAnbmV3LWdhbWUgYnV0dG9uJyxcbiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBNb2RhbEFjdGlvbnMudG9nZ2xlKCduZXdHYW1lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAnbmV3IGdhbWUnKSwgUi5kaXYoe1xuICAgICAgICAgIGtleTogJ3NlbGVjdC10aWxlJyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdzZWxlY3QtdGlsZSBidXR0b24nLFxuICAgICAgICAgIG9uQ2xpY2s6IFRpbGVzQWN0aW9ucy5jbGVhclNhZmVSYW5kb21UaWxlXG4gICAgICAgIH0sICdjbGVhciBhIHNhZmUgdGlsZScpLCBSLmRpdih7XG4gICAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zJyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdpbnN0cnVjdGlvbnMgYnV0dG9uJyxcbiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBNb2RhbEFjdGlvbnMudG9nZ2xlKCdpbnN0cnVjdGlvbnMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sICdpbnN0cnVjdGlvbnMnKVxuICAgICAgXSk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IERhc2hib2FyZDtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIERhc2hib2FyZENvbXBvbmVudCwgRGlzcGF0Y2hlciwgR2FtZSwgSW5mb0NvbXBvbmVudCwgTW9kYWxBY3Rpb25zLCBNb2RhbE92ZXJsYXlDb21wb25lbnQsIE1vZGFsU3RvcmUsIFIsIFRpbGVTdG9yZSwgVGlsZXNDb21wb25lbnQsIGFzc2lnbiwgZ2V0TW9kYWxTdG9yZVN0YXRlLCBnZXRTdGF0ZSwgZ2V0VGlsZVN0b3JlU3RhdGU7XG5cbiAgRGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4uL0Rpc3BhdGNoZXIuY29mZmVlJyk7XG5cbiAgVGlsZVN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL1RpbGVTdG9yZS5jb2ZmZWUnKTtcblxuICBNb2RhbFN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL01vZGFsU3RvcmUuY29mZmVlJyk7XG5cbiAgTW9kYWxBY3Rpb25zID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9Nb2RhbEFjdGlvbnMuY29mZmVlJyk7XG5cbiAgVGlsZXNDb21wb25lbnQgPSByZXF1aXJlKCcuL1RpbGVzQ29tcG9uZW50LmNvZmZlZScpO1xuXG4gIEluZm9Db21wb25lbnQgPSByZXF1aXJlKCcuL0luZm9Db21wb25lbnQuY29mZmVlJyk7XG5cbiAgRGFzaGJvYXJkQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9EYXNoYm9hcmRDb21wb25lbnQuY29mZmVlJyk7XG5cbiAgTW9kYWxPdmVybGF5Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9tb2RhbHMvTW9kYWxPdmVybGF5Q29tcG9uZW50LmNvZmZlZScpO1xuXG4gIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxuICBSID0gUmVhY3QuRE9NO1xuXG4gIGdldFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGFzc2lnbih7fSwgZ2V0VGlsZVN0b3JlU3RhdGUoKSwgZ2V0TW9kYWxTdG9yZVN0YXRlKCkpO1xuICB9O1xuXG4gIGdldFRpbGVTdG9yZVN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbDogVGlsZVN0b3JlLmdldEFsbCgpLFxuICAgICAgaW5mbzogVGlsZVN0b3JlLmdldEluZm8oKVxuICAgIH07XG4gIH07XG5cbiAgZ2V0TW9kYWxTdG9yZVN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vZGFsczogTW9kYWxTdG9yZS5nZXRBbGwoKVxuICAgIH07XG4gIH07XG5cbiAgR2FtZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0dhbWUnLFxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZ2V0U3RhdGUoKTtcbiAgICB9LFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAgIFRpbGVTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLl9vblRpbGVTdG9yZUNoYW5nZSk7XG4gICAgICByZXR1cm4gTW9kYWxTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLl9vbk1vZGFsU3RvcmVDaGFuZ2UpO1xuICAgIH0sXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgVGlsZVN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuX29uVGlsZVN0b3JlQ2hhbmdlKTtcbiAgICAgIHJldHVybiBNb2RhbFN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuX29uTW9kYWxTdG9yZUNoYW5nZSk7XG4gICAgfSxcbiAgICBfb25UaWxlU3RvcmVDaGFuZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRpbGVzU3RhdGU7XG4gICAgICB0aWxlc1N0YXRlID0gZ2V0VGlsZVN0b3JlU3RhdGUoKTtcbiAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHRpbGVzU3RhdGUpO1xuICAgIH0sXG4gICAgX29uTW9kYWxTdG9yZUNoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZShnZXRNb2RhbFN0b3JlU3RhdGUoKSk7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJvYXJkV3JhcHBwZXIsIGRhc2hib2FyZCwgaW5mbywgb3ZlcmxheXMsIHRpbGVzO1xuICAgICAgaW5mbyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5mb0NvbXBvbmVudCwge1xuICAgICAgICBrZXk6ICdpbmZvJyxcbiAgICAgICAgaW5mbzogdGhpcy5zdGF0ZS5pbmZvXG4gICAgICB9KTtcbiAgICAgIHRpbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChUaWxlc0NvbXBvbmVudCwge1xuICAgICAgICBrZXk6ICd0aWxlcycsXG4gICAgICAgIHRpbGVzOiB0aGlzLnN0YXRlLmFsbFxuICAgICAgfSk7XG4gICAgICBib2FyZFdyYXBwcGVyID0gUi5kaXYoe1xuICAgICAgICBpZDogJ2JvYXJkLXdyYXBwcGVyJyxcbiAgICAgICAga2V5OiAnYm9hcmQtd3JhcHBwZXInXG4gICAgICB9LCBbaW5mbywgdGlsZXNdKTtcbiAgICAgIGRhc2hib2FyZCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFzaGJvYXJkQ29tcG9uZW50LCB7XG4gICAgICAgIGtleTogJ2Rhc2hib2FyZCdcbiAgICAgIH0pO1xuICAgICAgb3ZlcmxheXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KE1vZGFsT3ZlcmxheUNvbXBvbmVudCwge1xuICAgICAgICBrZXk6ICdtb2RhbC1vdmVybGF5JyxcbiAgICAgICAgaW5mbzogdGhpcy5zdGF0ZS5pbmZvLFxuICAgICAgICBtb2RhbHM6IHRoaXMuc3RhdGUubW9kYWxzXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBSLmRpdihudWxsLCBbb3ZlcmxheXMsIGJvYXJkV3JhcHBwZXIsIGRhc2hib2FyZF0pO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBHYW1lO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgSW5mbywgUjtcblxuICBSID0gUmVhY3QuRE9NO1xuXG4gIEluZm8gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdJbmZvJyxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFIudWwoe1xuICAgICAgICBpZDogJ3N0YXRzJ1xuICAgICAgfSwgW1xuICAgICAgICBSLmxpKHtcbiAgICAgICAgICBrZXk6ICd0aWxlcydcbiAgICAgICAgfSwgdGhpcy5wcm9wcy5pbmZvLm51bU9mVGlsZXMgKyBcIiB0aWxlc1wiKSwgUi5saSh7XG4gICAgICAgICAga2V5OiAnbWluZXMnXG4gICAgICAgIH0sIHRoaXMucHJvcHMuaW5mby5udW1PZk1pbmVzICsgXCIgbWluZXNcIiksIFIubGkoe1xuICAgICAgICAgIGtleTogJ2ZsYWdnZWQnXG4gICAgICAgIH0sIHRoaXMucHJvcHMuaW5mby5udW1PZkZsYWdzICsgXCIgZmxhZ2dlZCB0aWxlc1wiKSwgUi5saSh7XG4gICAgICAgICAga2V5OiAnY2xlYXJlZCdcbiAgICAgICAgfSwgdGhpcy5wcm9wcy5pbmZvLm51bU9mVW5jbGVhcmVkICsgXCIgbGVmdCB0byBjbGVhclwiKVxuICAgICAgXSk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IEluZm87XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBSLCBUaWxlLCBUaWxlQWN0aW9ucztcblxuICBUaWxlQWN0aW9ucyA9IHJlcXVpcmUoJy4uL2FjdGlvbnMvVGlsZUFjdGlvbnMuY29mZmVlJyk7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBUaWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnVGlsZScsXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBSLmxpKHtcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmdldENsYXNzKCksXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMuY2xpY2tIYW5kbGVyXG4gICAgICB9LCBSLnNwYW4obnVsbCwgdGhpcy5nZXRUZXh0KCkpKTtcbiAgICB9LFxuICAgIGNsaWNrSGFuZGxlcjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICB2YXIgZmxhZ0tleVdhc1ByZXNzZWQ7XG4gICAgICBpZiAoISRldmVudCkge1xuICAgICAgICByZXR1cm4gVGlsZUFjdGlvbnMuY2xlYXIodGhpcy5wcm9wcy50aWxlLm1vZGVsLnVpZCk7XG4gICAgICB9XG4gICAgICBmbGFnS2V5V2FzUHJlc3NlZCA9ICRldmVudC5zaGlmdEtleSA9PT0gdHJ1ZSB8fCAkZXZlbnQuYWx0S2V5ID09PSB0cnVlO1xuICAgICAgaWYgKGZsYWdLZXlXYXNQcmVzc2VkKSB7XG4gICAgICAgIHJldHVybiBUaWxlQWN0aW9ucy50b2dnbGVGbGFnKHRoaXMucHJvcHMudGlsZS5tb2RlbC51aWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFRpbGVBY3Rpb25zLmNsZWFyKHRoaXMucHJvcHMudGlsZS5tb2RlbC51aWQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaXNGaXJzdENvbHVtbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy50aWxlLm1vZGVsLnggPT09IDA7XG4gICAgfSxcbiAgICBoYXNCZWVuRmxhZ2dlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy50aWxlLm1vZGVsLmlzQ2xlYXIgIT09IHRydWUgJiYgdGhpcy5wcm9wcy50aWxlLm1vZGVsLmlzRmxhZ2dlZCA9PT0gdHJ1ZTtcbiAgICB9LFxuICAgIGhhc0JlZW5DbGVhcmVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnRpbGUubW9kZWwuaXNDbGVhciA9PT0gdHJ1ZTtcbiAgICB9LFxuICAgIGhhc01pbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGlsZS5tb2RlbC5pc01pbmUgPT09IHRydWU7XG4gICAgfSxcbiAgICBzaG91bGREaXNwbGF5TWluZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXNNaW5lKCkgJiYgdGhpcy5oYXNCZWVuQ2xlYXJlZCgpO1xuICAgIH0sXG4gICAgaGFzWmVyb0FkamFjZW50TWluZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGlsZS5tb2RlbC5hZGphY2VudE1pbmVzID09PSAwICYmIHRoaXMuaGFzQmVlbkNsZWFyZWQoKTtcbiAgICB9LFxuICAgIGdldFRleHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRleHQ7XG4gICAgICB0ZXh0ID0gJyc7XG4gICAgICBpZiAodGhpcy5oYXNCZWVuQ2xlYXJlZCgpKSB7XG4gICAgICAgIHRleHQgPSB0aGlzLnByb3BzLnRpbGUubW9kZWwuYWRqYWNlbnRNaW5lcztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNCZWVuRmxhZ2dlZCgpKSB7XG4gICAgICAgIHRleHQgPSAnPyc7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc2hvdWxkRGlzcGxheU1pbmUoKSkge1xuICAgICAgICB0ZXh0ID0gJ1gnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfSxcbiAgICBnZXRDbGFzczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gWyd0aWxlJywgdGhpcy5pc0ZpcnN0Q29sdW1uKCkgPyAnbnRoJyA6IHZvaWQgMCwgdGhpcy5oYXNCZWVuQ2xlYXJlZCgpID8gJ2NsZWFyJyA6IHZvaWQgMCwgdGhpcy5oYXNCZWVuRmxhZ2dlZCgpID8gJ2ZsYWdnZWQnIDogdm9pZCAwLCB0aGlzLnNob3VsZERpc3BsYXlNaW5lKCkgPyAnbWluZScgOiB2b2lkIDAsIHRoaXMuaGFzWmVyb0FkamFjZW50TWluZXMoKSA/ICd6ZXJvJyA6IHZvaWQgMF0uam9pbignICcpO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBUaWxlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgUiwgVGlsZUNvbXBvbmVudCwgVGlsZXM7XG5cbiAgVGlsZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vVGlsZUNvbXBvbmVudC5jb2ZmZWUnKTtcblxuICBSID0gUmVhY3QuRE9NO1xuXG4gIFRpbGVzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnVGlsZXMnLFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGlsZXM7XG4gICAgICB0aWxlcyA9IHRoaXMucHJvcHMudGlsZXMubWFwKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChUaWxlQ29tcG9uZW50LCB7XG4gICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgcmVmOiBpdGVtLm1vZGVsLnVpZCxcbiAgICAgICAgICAgIHRpbGU6IGl0ZW1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgIHJldHVybiBSLnVsKHtcbiAgICAgICAgaWQ6ICdib2FyZCdcbiAgICAgIH0sIHRpbGVzKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gVGlsZXM7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBNb2RhbEFjdGlvbnMsIE1vZGFsT3ZlcmxheSwgUjtcblxuICBNb2RhbEFjdGlvbnMgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL01vZGFsQWN0aW9ucy5jb2ZmZWUnKTtcblxuICBSID0gUmVhY3QuRE9NO1xuXG4gIE1vZGFsT3ZlcmxheSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ01vZGFsSW5zdHJ1Y3Rpb25zJyxcbiAgICBnZXRDbGFzczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2xhc3NlcztcbiAgICAgIGNsYXNzZXMgPSBbJ21lc3NhZ2UnXTtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5zaG93KSB7XG4gICAgICAgIGNsYXNzZXMucHVzaCgnaGlkZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuICAgIH0sXG4gICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBNb2RhbEFjdGlvbnMudG9nZ2xlKCdpbnN0cnVjdGlvbnMnKTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYnV0dG9uLCBjb250cm9scywgZGVzY3JpcHRpb247XG4gICAgICBkZXNjcmlwdGlvbiA9IFIuZGl2KHtcbiAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWRlc2NyaXB0aW9uJ1xuICAgICAgfSwgW1xuICAgICAgICBSLmRpdih7XG4gICAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWhlYWRlcicsXG4gICAgICAgICAgY2xhc3NOYW1lOiAnYm9yZGVyLWJvdHRvbSdcbiAgICAgICAgfSwgJ2hvdyB0byBwbGF5JyksIFIuZGl2KHtcbiAgICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtZGV0YWlscycsXG4gICAgICAgICAgY2xhc3NOYW1lOiAnYm9yZGVyLWJvdHRvbSdcbiAgICAgICAgfSwgWyd0aGUgZ2FtZSBpcyBwbGF5ZWQgYnkgcmV2ZWFsaW5nIHRpbGVzIG9mIHRoZSBncmlkLicsICdpZiBhIHNlbGVjdGVkIHRpbGUgY29udGFpbnMgYSBtaW5lLCB0aGUgcGxheWVyIGxvc2VzIHRoZSBnYW1lLicsICdvdGhlcndpc2UsIGEgZGlnaXQgaXMgcmV2ZWFsZWQgaW4gdGhlIHRpbGUsIGluZGljYXRpbmcgdGhlIG51bWJlcicsICdvZiBtaW5lcyBsb2NhdGVkIGluIHRoZSBlaWdodCBhZGphY2VudCB0aWxlcy4nXS5qb2luKCcgJykpLCBSLmRpdih7XG4gICAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWNsaWNrJ1xuICAgICAgICB9LCBSLnNwYW4oe1xuICAgICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1jbGljay1jb2RlJyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdjb2RlJ1xuICAgICAgICB9LCAnY2xpY2snKSwgUi5zcGFuKHtcbiAgICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtY2xpY2stdGV4dCdcbiAgICAgICAgfSwgJyB0byByZXZlYWwgdGhlIHNxdWFyZXMgb2YgdGhlIGdyaWQuJykpLCBSLmRpdih7XG4gICAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWNsaWNrLWhpbnQnLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2JvcmRlci1ib3R0b20nXG4gICAgICAgIH0sICcoeW91ciBmaXJzdCBjbGljayB3aWxsIG5ldmVyIGxhbmQgb24gYSBtaW5lKScpXG4gICAgICBdKTtcbiAgICAgIGNvbnRyb2xzID0gUi5kaXYoe1xuICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtY29udHJvbHMnXG4gICAgICB9LCBbXG4gICAgICAgIFIuc3Bhbih7XG4gICAgICAgICAga2V5OiAnaW5zdHJ1Y3Rpb25zLWNvbnRyb2xzLWNvZGUxJyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdjb2RlJ1xuICAgICAgICB9LCAnc2hpZnQgKyBjbGljaycpLCBSLnNwYW4oe1xuICAgICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1jb250cm9scy10ZXh0MSdcbiAgICAgICAgfSwgJyBvciAnKSwgUi5zcGFuKHtcbiAgICAgICAgICBrZXk6ICdpbnN0cnVjdGlvbnMtY29udHJvbHMtY29kZTInLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2NvZGUnXG4gICAgICAgIH0sICdhbHQgKyBjbGljaycpLCBSLnNwYW4oe1xuICAgICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1jb250cm9scy10ZXh0MidcbiAgICAgICAgfSwgJyB3aWxsIFwiZmxhZ1wiIGEgdGlsZSwgaGVscGluZyB5b3UgdG8gcmVtZW1iZXIgd2hlcmUgeW91IHRoaW5rIGEgbWluZSBpcyBoaWRkZW4nKVxuICAgICAgXSk7XG4gICAgICBidXR0b24gPSBSLmRpdih7XG4gICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1idXR0b24nXG4gICAgICB9LCBSLmRpdih7XG4gICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbicsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMuY2xpY2tIYW5kbGVyXG4gICAgICB9LCAnZ290IGl0IScpKTtcbiAgICAgIHJldHVybiBSLmRpdih7XG4gICAgICAgIGtleTogJ2luc3RydWN0aW9ucy1tb2RhbCcsXG4gICAgICAgIGNsYXNzTmFtZTogdGhpcy5nZXRDbGFzcygpXG4gICAgICB9LCBbZGVzY3JpcHRpb24sIGNvbnRyb2xzLCBidXR0b25dKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gTW9kYWxPdmVybGF5O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgTW9kYWxBY3Rpb25zLCBNb2RhbE92ZXJsYXksIFIsIFRpbGVzQWN0aW9ucztcblxuICBNb2RhbEFjdGlvbnMgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL01vZGFsQWN0aW9ucy5jb2ZmZWUnKTtcblxuICBUaWxlc0FjdGlvbnMgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL1RpbGVzQWN0aW9ucy5jb2ZmZWUnKTtcblxuICBSID0gUmVhY3QuRE9NO1xuXG4gIE1vZGFsT3ZlcmxheSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ01vZGFsTmV3R2FtZScsXG4gICAgZ2V0Q2xhc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNsYXNzZXM7XG4gICAgICBjbGFzc2VzID0gWydtZXNzYWdlJ107XG4gICAgICBpZiAoIXRoaXMucHJvcHMuc2hvdykge1xuICAgICAgICBjbGFzc2VzLnB1c2goJ2hpZGUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcbiAgICB9LFxuICAgIGdldFRpdGxlVGV4dDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5zaG93ICYmICF0aGlzLnByb3BzLndpbiAmJiAhdGhpcy5wcm9wcy5sb3NzKSB7XG4gICAgICAgIHJldHVybiAnbmV3IGdhbWU/JztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy53aW4gJiYgIXRoaXMucHJvcHMubG9zcykge1xuICAgICAgICByZXR1cm4gJ3lvdSB3b24hJztcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMucHJvcHMud2luICYmICF0aGlzLnByb3BzLndpbikge1xuICAgICAgICByZXR1cm4gJ3lvdSBsb3N0Li4uJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGNsaWNrSGFuZGxlck5ld0dhbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFRpbGVzQWN0aW9ucy5uZXdHYW1lKCk7XG4gICAgfSxcbiAgICBjbGlja0hhbmRsZXJFeGl0TW9kYWw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIE1vZGFsQWN0aW9ucy5yZXNldCgpO1xuICAgIH0sXG4gICAgcmVuZGVyQnV0dG9uczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYnV0dG9ucztcbiAgICAgIGJ1dHRvbnMgPSBbXG4gICAgICAgIFIuZGl2KHtcbiAgICAgICAgICBrZXk6ICduZXctZ2FtZS1zdGFydCcsXG4gICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9uJyxcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNsaWNrSGFuZGxlck5ld0dhbWVcbiAgICAgICAgfSwgJ3N0YXJ0IScpXG4gICAgICBdO1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmxvc3MpIHtcbiAgICAgICAgYnV0dG9ucy5wdXNoKFIuZGl2KHtcbiAgICAgICAgICBrZXk6ICduZXctZ2FtZS1yZXN1bWUnLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbicsXG4gICAgICAgICAgb25DbGljazogdGhpcy5jbGlja0hhbmRsZXJFeGl0TW9kYWxcbiAgICAgICAgfSwgJ3Jlc3VtZS4uLicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBSLmRpdih7XG4gICAgICAgIGtleTogJ25ldy1nYW1lLWJ1dHRvbnMnXG4gICAgICB9LCBidXR0b25zKTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGl0bGU7XG4gICAgICB0aXRsZSA9IFIuZGl2KHtcbiAgICAgICAga2V5OiAnbmV3LWdhbWUtdGl0bGUtd3JhcHBlcicsXG4gICAgICAgIGNsYXNzTmFtZTogJ2JvcmRlci1ib3R0b20nXG4gICAgICB9LCBSLmRpdih7XG4gICAgICAgIGtleTogJ25ldy1nYW1lLXRpdGxlJyxcbiAgICAgICAgY2xhc3NOYW1lOiAndGl0bGUnXG4gICAgICB9LCB0aGlzLmdldFRpdGxlVGV4dCgpKSk7XG4gICAgICByZXR1cm4gUi5kaXYoe1xuICAgICAgICBrZXk6ICduZXctZ2FtZS1tb2RhbCcsXG4gICAgICAgIGNsYXNzTmFtZTogdGhpcy5nZXRDbGFzcygpXG4gICAgICB9LCBbdGl0bGUsIHRoaXMucmVuZGVyQnV0dG9ucygpXSk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IE1vZGFsT3ZlcmxheTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIEluc3RydWN0aW9uc0NvbXBvbmVudCwgTW9kYWxBY3Rpb25zLCBNb2RhbE92ZXJsYXksIE5ld0dhbWVDb21wb25lbnQsIFI7XG5cbiAgTW9kYWxBY3Rpb25zID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9Nb2RhbEFjdGlvbnMuY29mZmVlJyk7XG5cbiAgSW5zdHJ1Y3Rpb25zQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9Nb2RhbEluc3RydWN0aW9uc0NvbXBvbmVudC5jb2ZmZWUnKTtcblxuICBOZXdHYW1lQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9Nb2RhbE5ld0dhbWVDb21wb25lbnQuY29mZmVlJyk7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBNb2RhbE92ZXJsYXkgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdNb2RhbE92ZXJsYXknLFxuICAgIGdldENsYXNzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLm1vZGFscy5uZXdHYW1lKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5tb2RhbHMuaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiAnaGlkZSc7XG4gICAgfSxcbiAgICByZXNldEhhbmRsZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmluZm8ubG9zcyAmJiAhdGhpcy5wcm9wcy5pbmZvLndpbikge1xuICAgICAgICByZXR1cm4gTW9kYWxBY3Rpb25zLnJlc2V0KCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpbnN0cnVjdGlvbnNIYW5kbGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBNb2RhbEFjdGlvbnMudG9nZ2xlKCdpbnN0cnVjdGlvbnMnKTtcbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3ZlcmxheTtcbiAgICAgIG92ZXJsYXkgPSBSLmRpdih7XG4gICAgICAgIGlkOiAnb3ZlcmxheScsXG4gICAgICAgIGtleTogJ292ZXJsYXknLFxuICAgICAgICBjbGFzc05hbWU6IHRoaXMuZ2V0Q2xhc3MoKSxcbiAgICAgICAgb25DbGljazogdGhpcy5yZXNldEhhbmRsZXJcbiAgICAgIH0sIG51bGwpO1xuICAgICAgcmV0dXJuIFIuZGl2KG51bGwsIFtcbiAgICAgICAgb3ZlcmxheSwgUmVhY3QuY3JlYXRlRWxlbWVudChJbnN0cnVjdGlvbnNDb21wb25lbnQsIHtcbiAgICAgICAgICBrZXk6ICdtb2RhbC1pbnN0cnVjdGlvbnMnLFxuICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMubW9kYWxzLmluc3RydWN0aW9uc1xuICAgICAgICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChOZXdHYW1lQ29tcG9uZW50LCB7XG4gICAgICAgICAga2V5OiAnbW9kYWwtbmV3LWdhbWUnLFxuICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMubW9kYWxzLm5ld0dhbWUsXG4gICAgICAgICAgd2luOiB0aGlzLnByb3BzLmluZm8ud2luLFxuICAgICAgICAgIGxvc3M6IHRoaXMucHJvcHMuaW5mby5sb3NzXG4gICAgICAgIH0pXG4gICAgICBdKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gTW9kYWxPdmVybGF5O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgVGlsZU1vZGVsO1xuXG4gIE51bWJlci5pc0ludGVnZXIgPSBOdW1iZXIuaXNJbnRlZ2VyIHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiAmJiBpc0Zpbml0ZSh2YWx1ZSkgJiYgTWF0aC5mbG9vcih2YWx1ZSkgPT09IHZhbHVlO1xuICB9O1xuXG4gIG1vZHVsZS5leHBvcnRzID0gVGlsZU1vZGVsID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFRpbGVNb2RlbChhdHRycykge1xuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGF0dHJzLngpIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKGF0dHJzLnkpKSB7XG4gICAgICAgIHRocm93IFwiYHhgIGFuZCBgeWAgYXJlIHJlcXVpcmVkIEludGVnZXIgYXR0cmlidXRlcyB0byBpbnN0YW50aWF0ZSBUaWxlXCI7XG4gICAgICB9XG4gICAgICB0aGlzLm1vZGVsID0ge1xuICAgICAgICB4OiB2b2lkIDAsXG4gICAgICAgIHk6IHZvaWQgMCxcbiAgICAgICAgdWlkOiB2b2lkIDAsXG4gICAgICAgIGlzTWluZTogZmFsc2UsXG4gICAgICAgIGlzQ2xlYXI6IGZhbHNlLFxuICAgICAgICBpc0ZsYWdnZWQ6IGZhbHNlLFxuICAgICAgICBhZGphY2VudE1pbmVzOiAwXG4gICAgICB9O1xuICAgICAgdGhpcy5hZGphY2VudFRpbGVzID0gW1stMSwgLTFdLCBbMCwgLTFdLCBbMSwgLTFdLCBbLTEsIDBdLCBbMSwgMF0sIFstMSwgMV0sIFswLCAxXSwgWzEsIDFdXTtcbiAgICAgIHRoaXMuc2V0KGF0dHJzKTtcbiAgICB9XG5cbiAgICBUaWxlTW9kZWwucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICB2YXIgYXR0ciwga2V5O1xuICAgICAgZm9yIChrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgYXR0ciA9IGF0dHJzW2tleV07XG4gICAgICAgIHRoaXMubW9kZWxba2V5XSA9IGF0dHI7XG4gICAgICAgIHRoaXMubW9kZWwudWlkID0gU3RyaW5nKGF0dHJzLngpICsgJy0nICsgU3RyaW5nKGF0dHJzLnkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFRpbGVNb2RlbC5wcm90b3R5cGUudG9nZ2xlRmxhZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5tb2RlbC5pc0ZsYWdnZWQgPSAhdGhpcy5tb2RlbC5pc0ZsYWdnZWQ7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgVGlsZU1vZGVsLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5tb2RlbC5pc0NsZWFyID0gdHJ1ZTtcbiAgICAgIHRoaXMubW9kZWwuaXNGbGFnZ2VkID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRpbGVNb2RlbDtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgRXZlbnRFbWl0dGVyLCBNb2RhbFN0b3JlLCBNb2RhbHMsIE1vZGFsc0NvbGxlY3Rpb24sIGFzc2lnbjtcblxuICBNb2RhbHNDb2xsZWN0aW9uID0gcmVxdWlyZSgnLi4vY29sbGVjdGlvbnMvTW9kYWxzQ29sbGVjdGlvbi5jb2ZmZWUnKTtcblxuICBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG5cbiAgYXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG4gIE1vZGFscyA9IG5ldyBNb2RhbHNDb2xsZWN0aW9uKCk7XG5cbiAgTW9kYWxzLnNldCgnbmV3R2FtZScpO1xuXG4gIE1vZGFscy5zZXQoJ2luc3RydWN0aW9ucycpO1xuXG4gIE1vZGFsU3RvcmUgPSBhc3NpZ24oe30sIEV2ZW50RW1pdHRlci5wcm90b3R5cGUsIHtcbiAgICBldmVudDogJ2V2ZW50JyxcbiAgICBnZXRBbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIE1vZGFscy5zaG93O1xuICAgIH0sXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIE1vZGFscy5yZXNldCgpO1xuICAgIH0sXG4gICAgdG9nZ2xlOiBmdW5jdGlvbihtb2RhbE5hbWUpIHtcbiAgICAgIHJldHVybiBNb2RhbHMudG9nZ2xlKG1vZGFsTmFtZSk7XG4gICAgfSxcbiAgICBlbWl0Q2hhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmVtaXQodGhpcy5ldmVudCk7XG4gICAgfSxcbiAgICBhZGRDaGFuZ2VMaXN0ZW5lcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLm9uKHRoaXMuZXZlbnQsIGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIHJlbW92ZUNoYW5nZUxpc3RlbmVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTGlzdGVuZXIodGhpcy5ldmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBNb2RhbFN0b3JlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgRXZlbnRFbWl0dGVyLCBUaWxlU3RvcmUsIFRpbGVzLCBUaWxlc0NvbGxlY3Rpb24sIGFzc2lnbjtcblxuICBUaWxlc0NvbGxlY3Rpb24gPSByZXF1aXJlKCcuLi9jb2xsZWN0aW9ucy9UaWxlc0NvbGxlY3Rpb24uY29mZmVlJyk7XG5cbiAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xuXG4gIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxuICBUaWxlcyA9IG5ldyBUaWxlc0NvbGxlY3Rpb24oKTtcblxuICBUaWxlcy5uZXdHYW1lKDEwLCAxMCwgMjUpO1xuXG4gIHdpbmRvdy5mb28gPSBUaWxlcztcblxuICBUaWxlU3RvcmUgPSBhc3NpZ24oe30sIEV2ZW50RW1pdHRlci5wcm90b3R5cGUsIHtcbiAgICBldmVudDogJ2NoYW5nZScsXG4gICAgZ2V0OiBmdW5jdGlvbihhdHRycykge1xuICAgICAgcmV0dXJuIFRpbGVzLmdldChhdHRycyk7XG4gICAgfSxcbiAgICBnZXRBbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFRpbGVzLmdldEFsbCgpO1xuICAgIH0sXG4gICAgZ2V0SW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aW46IFRpbGVzLndpbixcbiAgICAgICAgbG9zczogVGlsZXMubG9zcyxcbiAgICAgICAgbnVtT2ZUaWxlczogVGlsZXMuYWxsLmxlbmd0aCxcbiAgICAgICAgbnVtT2ZNaW5lczogVGlsZXMubnVtT2ZNaW5lcyxcbiAgICAgICAgbnVtT2ZGbGFnczogVGlsZXMubnVtT2ZGbGFncyxcbiAgICAgICAgbnVtT2ZVbmNsZWFyZWQ6IFRpbGVzLmFsbC5sZW5ndGggLSBUaWxlcy5udW1PZk1pbmVzIC0gVGlsZXMubnVtT2ZDbGVhcnNcbiAgICAgIH07XG4gICAgfSxcbiAgICByYW5kb21TYWZlVGlsZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gVGlsZXMucmFuZG9tU2FmZVRpbGUoKTtcbiAgICB9LFxuICAgIG5ld0dhbWU6IGZ1bmN0aW9uKHgsIHksIG1pbmVzKSB7XG4gICAgICByZXR1cm4gVGlsZXMubmV3R2FtZSh4LCB5LCBtaW5lcyk7XG4gICAgfSxcbiAgICBlbWl0Q2hhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmVtaXQodGhpcy5ldmVudCk7XG4gICAgfSxcbiAgICBhZGRDaGFuZ2VMaXN0ZW5lcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLm9uKHRoaXMuZXZlbnQsIGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIHJlbW92ZUNoYW5nZUxpc3RlbmVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTGlzdGVuZXIodGhpcy5ldmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBUaWxlU3RvcmU7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERpc3BhdGNoZXJcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG52YXIgX2xhc3RJRCA9IDE7XG52YXIgX3ByZWZpeCA9ICdJRF8nO1xuXG4vKipcbiAqIERpc3BhdGNoZXIgaXMgdXNlZCB0byBicm9hZGNhc3QgcGF5bG9hZHMgdG8gcmVnaXN0ZXJlZCBjYWxsYmFja3MuIFRoaXMgaXNcbiAqIGRpZmZlcmVudCBmcm9tIGdlbmVyaWMgcHViLXN1YiBzeXN0ZW1zIGluIHR3byB3YXlzOlxuICpcbiAqICAgMSkgQ2FsbGJhY2tzIGFyZSBub3Qgc3Vic2NyaWJlZCB0byBwYXJ0aWN1bGFyIGV2ZW50cy4gRXZlcnkgcGF5bG9hZCBpc1xuICogICAgICBkaXNwYXRjaGVkIHRvIGV2ZXJ5IHJlZ2lzdGVyZWQgY2FsbGJhY2suXG4gKiAgIDIpIENhbGxiYWNrcyBjYW4gYmUgZGVmZXJyZWQgaW4gd2hvbGUgb3IgcGFydCB1bnRpbCBvdGhlciBjYWxsYmFja3MgaGF2ZVxuICogICAgICBiZWVuIGV4ZWN1dGVkLlxuICpcbiAqIEZvciBleGFtcGxlLCBjb25zaWRlciB0aGlzIGh5cG90aGV0aWNhbCBmbGlnaHQgZGVzdGluYXRpb24gZm9ybSwgd2hpY2hcbiAqIHNlbGVjdHMgYSBkZWZhdWx0IGNpdHkgd2hlbiBhIGNvdW50cnkgaXMgc2VsZWN0ZWQ6XG4gKlxuICogICB2YXIgZmxpZ2h0RGlzcGF0Y2hlciA9IG5ldyBEaXNwYXRjaGVyKCk7XG4gKlxuICogICAvLyBLZWVwcyB0cmFjayBvZiB3aGljaCBjb3VudHJ5IGlzIHNlbGVjdGVkXG4gKiAgIHZhciBDb3VudHJ5U3RvcmUgPSB7Y291bnRyeTogbnVsbH07XG4gKlxuICogICAvLyBLZWVwcyB0cmFjayBvZiB3aGljaCBjaXR5IGlzIHNlbGVjdGVkXG4gKiAgIHZhciBDaXR5U3RvcmUgPSB7Y2l0eTogbnVsbH07XG4gKlxuICogICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgYmFzZSBmbGlnaHQgcHJpY2Ugb2YgdGhlIHNlbGVjdGVkIGNpdHlcbiAqICAgdmFyIEZsaWdodFByaWNlU3RvcmUgPSB7cHJpY2U6IG51bGx9XG4gKlxuICogV2hlbiBhIHVzZXIgY2hhbmdlcyB0aGUgc2VsZWN0ZWQgY2l0eSwgd2UgZGlzcGF0Y2ggdGhlIHBheWxvYWQ6XG4gKlxuICogICBmbGlnaHREaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAqICAgICBhY3Rpb25UeXBlOiAnY2l0eS11cGRhdGUnLFxuICogICAgIHNlbGVjdGVkQ2l0eTogJ3BhcmlzJ1xuICogICB9KTtcbiAqXG4gKiBUaGlzIHBheWxvYWQgaXMgZGlnZXN0ZWQgYnkgYENpdHlTdG9yZWA6XG4gKlxuICogICBmbGlnaHREaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAqICAgICBpZiAocGF5bG9hZC5hY3Rpb25UeXBlID09PSAnY2l0eS11cGRhdGUnKSB7XG4gKiAgICAgICBDaXR5U3RvcmUuY2l0eSA9IHBheWxvYWQuc2VsZWN0ZWRDaXR5O1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogV2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgY291bnRyeSwgd2UgZGlzcGF0Y2ggdGhlIHBheWxvYWQ6XG4gKlxuICogICBmbGlnaHREaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAqICAgICBhY3Rpb25UeXBlOiAnY291bnRyeS11cGRhdGUnLFxuICogICAgIHNlbGVjdGVkQ291bnRyeTogJ2F1c3RyYWxpYSdcbiAqICAgfSk7XG4gKlxuICogVGhpcyBwYXlsb2FkIGlzIGRpZ2VzdGVkIGJ5IGJvdGggc3RvcmVzOlxuICpcbiAqICAgIENvdW50cnlTdG9yZS5kaXNwYXRjaFRva2VuID0gZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NvdW50cnktdXBkYXRlJykge1xuICogICAgICAgQ291bnRyeVN0b3JlLmNvdW50cnkgPSBwYXlsb2FkLnNlbGVjdGVkQ291bnRyeTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFdoZW4gdGhlIGNhbGxiYWNrIHRvIHVwZGF0ZSBgQ291bnRyeVN0b3JlYCBpcyByZWdpc3RlcmVkLCB3ZSBzYXZlIGEgcmVmZXJlbmNlXG4gKiB0byB0aGUgcmV0dXJuZWQgdG9rZW4uIFVzaW5nIHRoaXMgdG9rZW4gd2l0aCBgd2FpdEZvcigpYCwgd2UgY2FuIGd1YXJhbnRlZVxuICogdGhhdCBgQ291bnRyeVN0b3JlYCBpcyB1cGRhdGVkIGJlZm9yZSB0aGUgY2FsbGJhY2sgdGhhdCB1cGRhdGVzIGBDaXR5U3RvcmVgXG4gKiBuZWVkcyB0byBxdWVyeSBpdHMgZGF0YS5cbiAqXG4gKiAgIENpdHlTdG9yZS5kaXNwYXRjaFRva2VuID0gZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NvdW50cnktdXBkYXRlJykge1xuICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBtYXkgbm90IGJlIHVwZGF0ZWQuXG4gKiAgICAgICBmbGlnaHREaXNwYXRjaGVyLndhaXRGb3IoW0NvdW50cnlTdG9yZS5kaXNwYXRjaFRva2VuXSk7XG4gKiAgICAgICAvLyBgQ291bnRyeVN0b3JlLmNvdW50cnlgIGlzIG5vdyBndWFyYW50ZWVkIHRvIGJlIHVwZGF0ZWQuXG4gKlxuICogICAgICAgLy8gU2VsZWN0IHRoZSBkZWZhdWx0IGNpdHkgZm9yIHRoZSBuZXcgY291bnRyeVxuICogICAgICAgQ2l0eVN0b3JlLmNpdHkgPSBnZXREZWZhdWx0Q2l0eUZvckNvdW50cnkoQ291bnRyeVN0b3JlLmNvdW50cnkpO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogVGhlIHVzYWdlIG9mIGB3YWl0Rm9yKClgIGNhbiBiZSBjaGFpbmVkLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgIEZsaWdodFByaWNlU3RvcmUuZGlzcGF0Y2hUb2tlbiA9XG4gKiAgICAgZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgICBzd2l0Y2ggKHBheWxvYWQuYWN0aW9uVHlwZSkge1xuICogICAgICAgICBjYXNlICdjb3VudHJ5LXVwZGF0ZSc6XG4gKiAgICAgICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUucHJpY2UgPVxuICogICAgICAgICAgICAgZ2V0RmxpZ2h0UHJpY2VTdG9yZShDb3VudHJ5U3RvcmUuY291bnRyeSwgQ2l0eVN0b3JlLmNpdHkpO1xuICogICAgICAgICAgIGJyZWFrO1xuICpcbiAqICAgICAgICAgY2FzZSAnY2l0eS11cGRhdGUnOlxuICogICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUucHJpY2UgPVxuICogICAgICAgICAgICAgRmxpZ2h0UHJpY2VTdG9yZShDb3VudHJ5U3RvcmUuY291bnRyeSwgQ2l0eVN0b3JlLmNpdHkpO1xuICogICAgICAgICAgIGJyZWFrO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogVGhlIGBjb3VudHJ5LXVwZGF0ZWAgcGF5bG9hZCB3aWxsIGJlIGd1YXJhbnRlZWQgdG8gaW52b2tlIHRoZSBzdG9yZXMnXG4gKiByZWdpc3RlcmVkIGNhbGxiYWNrcyBpbiBvcmRlcjogYENvdW50cnlTdG9yZWAsIGBDaXR5U3RvcmVgLCB0aGVuXG4gKiBgRmxpZ2h0UHJpY2VTdG9yZWAuXG4gKi9cblxuICBmdW5jdGlvbiBEaXNwYXRjaGVyKCkge1xuICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzID0ge307XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmcgPSB7fTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzSGFuZGxlZCA9IHt9O1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2l0aCBldmVyeSBkaXNwYXRjaGVkIHBheWxvYWQuIFJldHVybnNcbiAgICogYSB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHdpdGggYHdhaXRGb3IoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIGlkID0gX3ByZWZpeCArIF9sYXN0SUQrKztcbiAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tpZF0gPSBjYWxsYmFjaztcbiAgICByZXR1cm4gaWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBjYWxsYmFjayBiYXNlZCBvbiBpdHMgdG9rZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUudW5yZWdpc3Rlcj1mdW5jdGlvbihpZCkge1xuICAgIGludmFyaWFudChcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXSxcbiAgICAgICdEaXNwYXRjaGVyLnVucmVnaXN0ZXIoLi4uKTogYCVzYCBkb2VzIG5vdCBtYXAgdG8gYSByZWdpc3RlcmVkIGNhbGxiYWNrLicsXG4gICAgICBpZFxuICAgICk7XG4gICAgZGVsZXRlIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzW2lkXTtcbiAgfTtcblxuICAvKipcbiAgICogV2FpdHMgZm9yIHRoZSBjYWxsYmFja3Mgc3BlY2lmaWVkIHRvIGJlIGludm9rZWQgYmVmb3JlIGNvbnRpbnVpbmcgZXhlY3V0aW9uXG4gICAqIG9mIHRoZSBjdXJyZW50IGNhbGxiYWNrLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSB1c2VkIGJ5IGEgY2FsbGJhY2sgaW5cbiAgICogcmVzcG9uc2UgdG8gYSBkaXNwYXRjaGVkIHBheWxvYWQuXG4gICAqXG4gICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gaWRzXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS53YWl0Rm9yPWZ1bmN0aW9uKGlkcykge1xuICAgIGludmFyaWFudChcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyxcbiAgICAgICdEaXNwYXRjaGVyLndhaXRGb3IoLi4uKTogTXVzdCBiZSBpbnZva2VkIHdoaWxlIGRpc3BhdGNoaW5nLidcbiAgICApO1xuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBpZHMubGVuZ3RoOyBpaSsrKSB7XG4gICAgICB2YXIgaWQgPSBpZHNbaWldO1xuICAgICAgaWYgKHRoaXMuJERpc3BhdGNoZXJfaXNQZW5kaW5nW2lkXSkge1xuICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0hhbmRsZWRbaWRdLFxuICAgICAgICAgICdEaXNwYXRjaGVyLndhaXRGb3IoLi4uKTogQ2lyY3VsYXIgZGVwZW5kZW5jeSBkZXRlY3RlZCB3aGlsZSAnICtcbiAgICAgICAgICAnd2FpdGluZyBmb3IgYCVzYC4nLFxuICAgICAgICAgIGlkXG4gICAgICAgICk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaW52YXJpYW50KFxuICAgICAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tpZF0sXG4gICAgICAgICdEaXNwYXRjaGVyLndhaXRGb3IoLi4uKTogYCVzYCBkb2VzIG5vdCBtYXAgdG8gYSByZWdpc3RlcmVkIGNhbGxiYWNrLicsXG4gICAgICAgIGlkXG4gICAgICApO1xuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pbnZva2VDYWxsYmFjayhpZCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGEgcGF5bG9hZCB0byBhbGwgcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXlsb2FkXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaD1mdW5jdGlvbihwYXlsb2FkKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgIXRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyxcbiAgICAgICdEaXNwYXRjaC5kaXNwYXRjaCguLi4pOiBDYW5ub3QgZGlzcGF0Y2ggaW4gdGhlIG1pZGRsZSBvZiBhIGRpc3BhdGNoLidcbiAgICApO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfc3RhcnREaXNwYXRjaGluZyhwYXlsb2FkKTtcbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3MpIHtcbiAgICAgICAgaWYgKHRoaXMuJERpc3BhdGNoZXJfaXNQZW5kaW5nW2lkXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJERpc3BhdGNoZXJfaW52b2tlQ2FsbGJhY2soaWQpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLiREaXNwYXRjaGVyX3N0b3BEaXNwYXRjaGluZygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSXMgdGhpcyBEaXNwYXRjaGVyIGN1cnJlbnRseSBkaXNwYXRjaGluZy5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLmlzRGlzcGF0Y2hpbmc9ZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZztcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCB0aGUgY2FsbGJhY2sgc3RvcmVkIHdpdGggdGhlIGdpdmVuIGlkLiBBbHNvIGRvIHNvbWUgaW50ZXJuYWxcbiAgICogYm9va2tlZXBpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrPWZ1bmN0aW9uKGlkKSB7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmdbaWRdID0gdHJ1ZTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tpZF0odGhpcy4kRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCk7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0hhbmRsZWRbaWRdID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHVwIGJvb2trZWVwaW5nIG5lZWRlZCB3aGVuIGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLiREaXNwYXRjaGVyX3N0YXJ0RGlzcGF0Y2hpbmc9ZnVuY3Rpb24ocGF5bG9hZCkge1xuICAgIGZvciAodmFyIGlkIGluIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzKSB7XG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0gPSBmYWxzZTtcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkW2lkXSA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkID0gcGF5bG9hZDtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcgPSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhciBib29ra2VlcGluZyB1c2VkIGZvciBkaXNwYXRjaGluZy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS4kRGlzcGF0Y2hlcl9zdG9wRGlzcGF0Y2hpbmc9ZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCA9IG51bGw7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gIH07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBEaXNwYXRjaGVyO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaW52YXJpYW50XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuICpcbiAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG4gKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcbiAqIGV4cGVjdGluZy5cbiAqXG4gKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuICovXG5cbnZhciBpbnZhcmlhbnQgPSBmdW5jdGlvbihjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAoZmFsc2UpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICAnTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArXG4gICAgICAgICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLidcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICAnSW52YXJpYW50IFZpb2xhdGlvbjogJyArXG4gICAgICAgIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107IH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcbiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG4gICAgICBlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfVxuICAgICAgdGhyb3cgVHlwZUVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LicpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgICAgY2FzZSAxOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gc2xvd2VyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICBhcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbGVuOyBpKyspXG4gICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBhcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICAgIGZvciAoaSA9IDE7IGkgPCBsZW47IGkrKylcbiAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgdmFyIG07XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCFlbWl0dGVyLl9ldmVudHMgfHwgIWVtaXR0ZXIuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSAwO1xuICBlbHNlIGlmIChpc0Z1bmN0aW9uKGVtaXR0ZXIuX2V2ZW50c1t0eXBlXSkpXG4gICAgcmV0ID0gMTtcbiAgZWxzZVxuICAgIHJldCA9IGVtaXR0ZXIuX2V2ZW50c1t0eXBlXS5sZW5ndGg7XG4gIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIFRvT2JqZWN0KHZhbCkge1xuXHRpZiAodmFsID09IG51bGwpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdCh2YWwpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG5cdHZhciBmcm9tO1xuXHR2YXIga2V5cztcblx0dmFyIHRvID0gVG9PYmplY3QodGFyZ2V0KTtcblxuXHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGZyb20gPSBhcmd1bWVudHNbc107XG5cdFx0a2V5cyA9IE9iamVjdC5rZXlzKE9iamVjdChmcm9tKSk7XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9