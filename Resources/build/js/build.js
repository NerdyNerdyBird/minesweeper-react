!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){var GameComponent,ViewController;GameComponent=require("./components/GameComponent.coffee"),ViewController=React.createElement(GameComponent,null),React.render(ViewController,document.getElementById("minesweeper"))}).call(this)},{"./components/GameComponent.coffee":6}],2:[function(require,module,exports){module.exports.Dispatcher=require("./lib/Dispatcher")},{"./lib/Dispatcher":16}],3:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("Flux").Dispatcher,module.exports=new Dispatcher}).call(this)},{Flux:12}],4:[function(require,module,exports){(function(){var Dispatcher;Dispatcher=require("../Dispatcher.coffee"),module.exports={toggleFlag:function(uid){return Dispatcher.dispatch({type:"TILE_FLAG_TOGGLE",uid:uid})},clear:function(uid){return Dispatcher.dispatch({type:"TILE_CLEAR",uid:uid})}}}).call(this)},{"../Dispatcher.coffee":3}],5:[function(require,module,exports){(function(){var TileModel,TilesCollection,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;TileModel=require("../models/TileModel.coffee"),TilesCollection=function(){function TilesCollection(){var Model,collection;this.all=[],collection=this,this.model=Model=function(superClass){function Model(){return Model.__super__.constructor.apply(this,arguments)}return extend(Model,superClass),Model.prototype.clear=function(){return Model.__super__.clear.call(this),collection.clearNeighbors(this),collection.moveUpdate()},Model.prototype.toggleFlag=function(){return Model.__super__.toggleFlag.call(this),collection.moveUpdate()},Model.prototype.click=function($event){return collection.noMineFirstClick(this),Model.__super__.click.call(this,$event)},Model}(TileModel),this.newGame()}return TilesCollection.prototype.newGame=function(){var attrs,i,j,k,mineNum,ref,ref1,ref2,tile,x,y;for(this.reset(),this.sizeY=4,this.sizeX=7,this.numOfMines=5,y=i=0,ref=this.sizeY-1;ref>=0?ref>=i:i>=ref;y=ref>=0?++i:--i)for(x=j=0,ref1=this.sizeX-1;ref1>=0?ref1>=j:j>=ref1;x=ref1>=0?++j:--j)attrs={x:x,y:y},this.add(attrs);for(mineNum=k=1,ref2=this.numOfMines;ref2>=1?ref2>=k:k>=ref2;mineNum=ref2>=1?++k:--k)tile=this.randomSafeTile(),tile.model.isMine=!0;return this.tallyMines(),this.gameUpdate()},TilesCollection.prototype.noMineFirstClick=function(tile){return 0===this.numOfClears&&tile.model.isMine===!0&&(tile.model.isMine=!1,this.randomSafeTile().model.isMine=!0,this.tallyMines()),tile},TilesCollection.prototype.add=function(model){var tile;return tile=new this.model(model),this.all.push(tile),tile},TilesCollection.prototype.handleTileClick=function(event,index){},TilesCollection.prototype.reset=function(){return this.all=[],this},TilesCollection.prototype.randomSafeTile=function(){var findAttrs,randomIndex,safeTiles;return findAttrs={isClear:!1,isMine:!1},safeTiles=this.getAll(findAttrs),randomIndex=Math.floor(Math.random()*safeTiles.length),safeTiles[randomIndex]},TilesCollection.prototype.tallyMines=function(){var adjacentTile,i,j,len,len1,neighborAttrs,neighborMine,neighborMines,neighborX,neighborY,ref,ref1,results,tile;for(ref=this.all,results=[],i=0,len=ref.length;len>i;i++){for(tile=ref[i],neighborMines=0,ref1=tile.adjacentTiles,j=0,len1=ref1.length;len1>j;j++)adjacentTile=ref1[j],neighborX=tile.model.x+adjacentTile[0],neighborY=tile.model.y+adjacentTile[1],neighborAttrs={isMine:!0,x:neighborX,y:neighborY},neighborMine=this.get(neighborAttrs),void 0!==neighborMine&&neighborMines++;results.push(tile.model.adjacentMines=neighborMines)}return results},TilesCollection.prototype.gameUpdate=function(){var i,len,ref,tile;for(this.x=Math.max.apply(this,this.all.map(function(tile){return tile.model.x})),this.y=Math.max.apply(this,this.all.map(function(tile){return tile.model.y})),this.x=this.x--,this.y=this.y--,this.numOfMines=0,ref=this.all,i=0,len=ref.length;len>i;i++)tile=ref[i],tile.model.isMine===!0&&this.numOfMines++;return this.moveUpdate()},TilesCollection.prototype.moveUpdate=function(){var i,len,ref,tile;for(this.loss=!1,this.win=!1,this.numOfClears=0,this.numOfFlags=0,ref=this.all,i=0,len=ref.length;len>i;i++)tile=ref[i],tile.model.isClear===!0&&this.numOfClears++,tile.model.isFlagged===!0&&this.numOfFlags++,tile.model.isMine===!0&&tile.model.isClear===!0&&(this.loss=!0);return this.loss===!1&&this.all.length-this.numOfMines-this.numOfClears===0?this.win=!0:void 0},TilesCollection.prototype.clearNeighbors=function(tile){var adjacentTile,i,len,neighbor,ref,results,shouldClearNeighbor,shouldClearNeighbors;if(shouldClearNeighbors=0===tile.model.adjacentMines&&tile.model.isMine===!1){for(ref=tile.adjacentTiles,results=[],i=0,len=ref.length;len>i;i++)adjacentTile=ref[i],neighbor=this.get({x:tile.model.x+adjacentTile[0],y:tile.model.y+adjacentTile[1]}),shouldClearNeighbor=neighbor&&neighbor.model.isClear===!1&&neighbor.model.isMine===!1,results.push(shouldClearNeighbor?neighbor.click():void 0);return results}},TilesCollection.prototype.get=function(attrs){return this.getAll(attrs)[0]},TilesCollection.prototype.getAll=function(attrs){var i,key,len,matches,numOfAttrs,numOfMatchedAttrs,ref,tile,val;if(matches=[],!attrs)return this.all;for(ref=this.all,i=0,len=ref.length;len>i;i++){tile=ref[i],numOfAttrs=0,numOfMatchedAttrs=0;for(key in attrs)val=attrs[key],numOfAttrs++,tile.model[key]===val&&numOfMatchedAttrs++;numOfMatchedAttrs===numOfAttrs&&matches.push(tile)}return matches},TilesCollection.prototype.getInfo=function(){return{numOfTiles:this.all.length,numOfMines:this.numOfMines,numOfFlags:this.numOfFlags,numOfUncleared:this.all.length-this.numOfMines-this.numOfClears}},TilesCollection}(),module.exports=TilesCollection}).call(this)},{"../models/TileModel.coffee":10}],6:[function(require,module,exports){(function(){var Dispatcher,Game,InfoComponent,R,TileStore,TilesComponent,getState;TilesComponent=require("./TilesComponent.coffee"),InfoComponent=require("./InfoComponent.coffee"),Dispatcher=require("../Dispatcher.coffee"),TileStore=require("../stores/TileStore.coffee"),R=React.DOM,getState=function(){return{all:TileStore.getAll(),info:TileStore.getInfo()}},Game=React.createClass({displayName:"Game",getInitialState:function(){return getState()},componentDidMount:function(){return TileStore.addChangeListener(this._onChange)},componentWillUnmount:function(){return TileStore.removeChangeListener(this._onChange)},render:function(){return R.div({id:"game"},[React.createElement(InfoComponent,{info:this.state.info}),React.createElement(TilesComponent,{tiles:this.state.all})])},_onChange:function(){return console.log("change!"),this.setState(getState())}}),module.exports=Game}).call(this)},{"../Dispatcher.coffee":3,"../stores/TileStore.coffee":11,"./InfoComponent.coffee":7,"./TilesComponent.coffee":9}],7:[function(require,module,exports){(function(){var Info,R;R=React.DOM,Info=React.createClass({displayName:"Info",render:function(){return R.ul({id:"stats"},[R.li(null,this.props.info.numOfTiles+" tiles"),R.li(null,this.props.info.numOfMines+" mines"),R.li(null,this.props.info.numOfFlags+" flagged tiles"),R.li(null,this.props.info.numOfUncleared+" left to clear")])}}),module.exports=Info}).call(this)},{}],8:[function(require,module,exports){(function(){var R,Tile,TileActions;TileActions=require("../actions/TileActions.coffee"),R=React.DOM,Tile=React.createClass({displayName:"Tile",render:function(){return R.li({className:this.getClass(),onClick:this.clickHandler},R.span(null,this.getText()))},clickHandler:function($event){var flagKeyWasPressed;return $event?(flagKeyWasPressed=$event.shiftKey===!0||$event.altKey===!0,flagKeyWasPressed?TileActions.toggleFlag(this.props.tile.model.uid):TileActions.clear(this.props.tile.model.uid)):TileActions.clear(this.props.tile.model.uid)},isFirstColumn:function(){return 0===this.props.tile.model.x},hasBeenFlagged:function(){return this.props.tile.model.isClear!==!0&&this.props.tile.model.isFlagged===!0},hasBeenCleared:function(){return this.props.tile.model.isClear===!0},hasMine:function(){return this.props.tile.model.isMine===!0},shouldDisplayMine:function(){return this.hasMine()&&this.hasBeenCleared()},hasZeroAdjacentMines:function(){return 0===this.props.tile.model.adjacentMines&&!this.hasMine()},getText:function(){var text;return text=this.props.tile.model.adjacentMines,this.hasBeenFlagged()?text="?":this.shouldDisplayMine()&&(text="X"),text},getClass:function(){return["tile",this.isFirstColumn()?"nth":void 0,this.hasBeenCleared()?"clear":void 0,this.hasBeenFlagged()?"flagged":void 0,this.shouldDisplayMine()?"mine":void 0,this.hasZeroAdjacentMines()?"clear zero":void 0].join(" ")}}),module.exports=Tile}).call(this)},{"../actions/TileActions.coffee":4}],9:[function(require,module,exports){(function(){var R,TileComponent,Tiles;TileComponent=require("./TileComponent.coffee"),R=React.DOM,Tiles=React.createClass({displayName:"Tiles",render:function(){var tiles;return tiles=this.props.tiles.map(function(_this){return function(item,index){return React.createElement(TileComponent,{key:index,ref:item.model.uid,tile:item})}}(this)),R.ul({id:"board"},tiles)}}),module.exports=Tiles}).call(this)},{"./TileComponent.coffee":8}],10:[function(require,module,exports){(function(){var TileModel;Number.isInteger=Number.isInteger||function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value},module.exports=TileModel=function(){function TileModel(attrs){if(!Number.isInteger(attrs.x)||!Number.isInteger(attrs.y))throw"`x` and `y` are required Integer attributes to instantiate Tile";this.model={x:void 0,y:void 0,uid:void 0,isMine:!1,isClear:!1,isFlagged:!1,adjacentMines:0},this.adjacentTiles=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],this.set(attrs)}return TileModel.prototype.set=function(attrs){var attr,key;for(key in attrs)attr=attrs[key],this.model[key]=attr,this.model.uid=String(attrs.x)+"-"+String(attrs.y);return this},TileModel.prototype.toggleFlag=function(){return this.model.isFlagged=!this.model.isFlagged,this},TileModel.prototype.clear=function(){return this.model.isClear=!0,this.model.isFlagged=!1,this},TileModel.prototype.click=function($event){var flagKeyWasPressed;return $event?(flagKeyWasPressed=$event.shiftKey===!0||$event.altKey===!0,flagKeyWasPressed?this.toggleFlag():this.clear()):this.clear()},TileModel}()}).call(this)},{}],11:[function(require,module,exports){(function(){var Dispatcher,EventEmitter,Tiles,TilesCollection,TodoStore,assign;TilesCollection=require("../collections/TilesCollection.coffee"),Dispatcher=require("../Dispatcher.coffee"),EventEmitter=require("events").EventEmitter,assign=require("object-assign"),Tiles=new TilesCollection,TodoStore=assign({},EventEmitter.prototype,{event:"change",getAll:function(){return Tiles.getAll()},getInfo:function(){return Tiles.getInfo()},emitChange:function(){return this.emit(this.event)},addChangeListener:function(callback){return this.on(this.event,callback)},removeChangeListener:function(callback){return this.removeListener(this.event,callback)}}),Dispatcher.register(function(event){var tile;switch(event.type){case"TILE_FLAG_TOGGLE":return console.log("tile flag"),tile=Tiles.get({uid:event.uid}),tile.toggleFlag(),TodoStore.emitChange();case"TILE_CLEAR":return console.log("tile clear"),tile=Tiles.get({uid:event.uid}),tile.clear(),TodoStore.emitChange()}}),module.exports=TodoStore}).call(this)},{"../Dispatcher.coffee":3,"../collections/TilesCollection.coffee":5,events:15,"object-assign":18}],12:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"./lib/Dispatcher":13,dup:2}],13:[function(require,module,exports){"use strict";function Dispatcher(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var invariant=require("./invariant"),_lastID=1,_prefix="ID_";Dispatcher.prototype.register=function(callback){var id=_prefix+_lastID++;return this.$Dispatcher_callbacks[id]=callback,id},Dispatcher.prototype.unregister=function(id){invariant(this.$Dispatcher_callbacks[id],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",id),delete this.$Dispatcher_callbacks[id]},Dispatcher.prototype.waitFor=function(ids){invariant(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var ii=0;ii<ids.length;ii++){var id=ids[ii];this.$Dispatcher_isPending[id]?invariant(this.$Dispatcher_isHandled[id],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",id):(invariant(this.$Dispatcher_callbacks[id],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",id),this.$Dispatcher_invokeCallback(id))}},Dispatcher.prototype.dispatch=function(payload){invariant(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(payload);try{for(var id in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[id]||this.$Dispatcher_invokeCallback(id)}finally{this.$Dispatcher_stopDispatching()}},Dispatcher.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},Dispatcher.prototype.$Dispatcher_invokeCallback=function(id){this.$Dispatcher_isPending[id]=!0,this.$Dispatcher_callbacks[id](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[id]=!0},Dispatcher.prototype.$Dispatcher_startDispatching=function(payload){for(var id in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[id]=!1,this.$Dispatcher_isHandled[id]=!1;this.$Dispatcher_pendingPayload=payload,this.$Dispatcher_isDispatching=!0},Dispatcher.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},module.exports=Dispatcher},{"./invariant":14}],14:[function(require,module,exports){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}throw error.framesToPop=1,error}};module.exports=invariant},{}],15:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}],16:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{"./invariant":17,dup:13}],17:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],18:[function(require,module,exports){"use strict";function ToObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=Object.assign||function(target,source){for(var from,keys,to=ToObject(target),s=1;s<arguments.length;s++){from=arguments[s],keys=Object.keys(Object(from));for(var i=0;i<keys.length;i++)to[keys[i]]=from[keys[i]]}return to}},{}]},{},[1,2]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJSZXNvdXJjZXMvY29mZmVlL0FwcC5jb2ZmZWUiLCJidWlsZC5qcyIsIm5vZGVfbW9kdWxlcy9mbHV4L2luZGV4LmpzIiwiUmVzb3VyY2VzL2NvZmZlZS9EaXNwYXRjaGVyLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvYWN0aW9ucy9UaWxlQWN0aW9ucy5jb2ZmZWUiLCJSZXNvdXJjZXMvY29mZmVlL2NvbGxlY3Rpb25zL1RpbGVzQ29sbGVjdGlvbi5jb2ZmZWUiLCJSZXNvdXJjZXMvY29mZmVlL2NvbXBvbmVudHMvR2FtZUNvbXBvbmVudC5jb2ZmZWUiLCJSZXNvdXJjZXMvY29mZmVlL2NvbXBvbmVudHMvSW5mb0NvbXBvbmVudC5jb2ZmZWUiLCJSZXNvdXJjZXMvY29mZmVlL2NvbXBvbmVudHMvVGlsZUNvbXBvbmVudC5jb2ZmZWUiLCJSZXNvdXJjZXMvY29mZmVlL2NvbXBvbmVudHMvVGlsZXNDb21wb25lbnQuY29mZmVlIiwiUmVzb3VyY2VzL2NvZmZlZS9tb2RlbHMvVGlsZU1vZGVsLmNvZmZlZSIsIlJlc291cmNlcy9jb2ZmZWUvc3RvcmVzL1RpbGVTdG9yZS5jb2ZmZWUiLCJub2RlX21vZHVsZXMvRmx1eC9saWIvRGlzcGF0Y2hlci5qcyIsIm5vZGVfbW9kdWxlcy9GbHV4L2xpYi9pbnZhcmlhbnQuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9vYmplY3QtYXNzaWduL2luZGV4LmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJmIiwiRXJyb3IiLCJjb2RlIiwibCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwxLCJtb2R1bGUiLCJHYW1lQ29tcG9uZW50IiwiVmlld0NvbnRyb2xsZXIiLCJSZWFjdCIsImNyZWF0ZUVsZW1lbnQiLCJyZW5kZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidGhpcyIsIi4vY29tcG9uZW50cy9HYW1lQ29tcG9uZW50LmNvZmZlZSIsMiwiRGlzcGF0Y2hlciIsIi4vbGliL0Rpc3BhdGNoZXIiLDMsIkZsdXgiLDQsInRvZ2dsZUZsYWciLCJ1aWQiLCJkaXNwYXRjaCIsInR5cGUiLCJjbGVhciIsIi4uL0Rpc3BhdGNoZXIuY29mZmVlIiw1LCJUaWxlTW9kZWwiLCJUaWxlc0NvbGxlY3Rpb24iLCJleHRlbmQiLCJjaGlsZCIsInBhcmVudCIsImN0b3IiLCJjb25zdHJ1Y3RvciIsImtleSIsImhhc1Byb3AiLCJwcm90b3R5cGUiLCJfX3N1cGVyX18iLCJoYXNPd25Qcm9wZXJ0eSIsIk1vZGVsIiwiY29sbGVjdGlvbiIsImFsbCIsIm1vZGVsIiwic3VwZXJDbGFzcyIsImFwcGx5IiwiYXJndW1lbnRzIiwiY2xlYXJOZWlnaGJvcnMiLCJtb3ZlVXBkYXRlIiwiY2xpY2siLCIkZXZlbnQiLCJub01pbmVGaXJzdENsaWNrIiwibmV3R2FtZSIsImF0dHJzIiwiaiIsImsiLCJtaW5lTnVtIiwicmVmIiwicmVmMSIsInJlZjIiLCJ0aWxlIiwieCIsInkiLCJyZXNldCIsInNpemVZIiwic2l6ZVgiLCJudW1PZk1pbmVzIiwiYWRkIiwicmFuZG9tU2FmZVRpbGUiLCJpc01pbmUiLCJ0YWxseU1pbmVzIiwiZ2FtZVVwZGF0ZSIsIm51bU9mQ2xlYXJzIiwicHVzaCIsImhhbmRsZVRpbGVDbGljayIsImV2ZW50IiwiaW5kZXgiLCJmaW5kQXR0cnMiLCJyYW5kb21JbmRleCIsInNhZmVUaWxlcyIsImlzQ2xlYXIiLCJnZXRBbGwiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhZGphY2VudFRpbGUiLCJsZW4iLCJsZW4xIiwibmVpZ2hib3JBdHRycyIsIm5laWdoYm9yTWluZSIsIm5laWdoYm9yTWluZXMiLCJuZWlnaGJvclgiLCJuZWlnaGJvclkiLCJyZXN1bHRzIiwiYWRqYWNlbnRUaWxlcyIsImdldCIsImFkamFjZW50TWluZXMiLCJtYXgiLCJtYXAiLCJsb3NzIiwid2luIiwibnVtT2ZGbGFncyIsImlzRmxhZ2dlZCIsIm5laWdoYm9yIiwic2hvdWxkQ2xlYXJOZWlnaGJvciIsInNob3VsZENsZWFyTmVpZ2hib3JzIiwibWF0Y2hlcyIsIm51bU9mQXR0cnMiLCJudW1PZk1hdGNoZWRBdHRycyIsInZhbCIsImdldEluZm8iLCJudW1PZlRpbGVzIiwibnVtT2ZVbmNsZWFyZWQiLCIuLi9tb2RlbHMvVGlsZU1vZGVsLmNvZmZlZSIsNiwiR2FtZSIsIkluZm9Db21wb25lbnQiLCJSIiwiVGlsZVN0b3JlIiwiVGlsZXNDb21wb25lbnQiLCJnZXRTdGF0ZSIsIkRPTSIsImluZm8iLCJjcmVhdGVDbGFzcyIsImRpc3BsYXlOYW1lIiwiZ2V0SW5pdGlhbFN0YXRlIiwiY29tcG9uZW50RGlkTW91bnQiLCJhZGRDaGFuZ2VMaXN0ZW5lciIsIl9vbkNoYW5nZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwicmVtb3ZlQ2hhbmdlTGlzdGVuZXIiLCJkaXYiLCJpZCIsInN0YXRlIiwidGlsZXMiLCJjb25zb2xlIiwibG9nIiwic2V0U3RhdGUiLCIuLi9zdG9yZXMvVGlsZVN0b3JlLmNvZmZlZSIsIi4vSW5mb0NvbXBvbmVudC5jb2ZmZWUiLCIuL1RpbGVzQ29tcG9uZW50LmNvZmZlZSIsNywiSW5mbyIsInVsIiwibGkiLCJwcm9wcyIsOCwiVGlsZSIsIlRpbGVBY3Rpb25zIiwiY2xhc3NOYW1lIiwiZ2V0Q2xhc3MiLCJvbkNsaWNrIiwiY2xpY2tIYW5kbGVyIiwic3BhbiIsImdldFRleHQiLCJmbGFnS2V5V2FzUHJlc3NlZCIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiaXNGaXJzdENvbHVtbiIsImhhc0JlZW5GbGFnZ2VkIiwiaGFzQmVlbkNsZWFyZWQiLCJoYXNNaW5lIiwic2hvdWxkRGlzcGxheU1pbmUiLCJoYXNaZXJvQWRqYWNlbnRNaW5lcyIsInRleHQiLCJqb2luIiwiLi4vYWN0aW9ucy9UaWxlQWN0aW9ucy5jb2ZmZWUiLDksIlRpbGVDb21wb25lbnQiLCJUaWxlcyIsIl90aGlzIiwiaXRlbSIsIi4vVGlsZUNvbXBvbmVudC5jb2ZmZWUiLDEwLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJ2YWx1ZSIsImlzRmluaXRlIiwic2V0IiwiYXR0ciIsIlN0cmluZyIsMTEsIkV2ZW50RW1pdHRlciIsIlRvZG9TdG9yZSIsImFzc2lnbiIsImVtaXRDaGFuZ2UiLCJlbWl0IiwiY2FsbGJhY2siLCJvbiIsInJlbW92ZUxpc3RlbmVyIiwicmVnaXN0ZXIiLCIuLi9jb2xsZWN0aW9ucy9UaWxlc0NvbGxlY3Rpb24uY29mZmVlIiwiZXZlbnRzIiwib2JqZWN0LWFzc2lnbiIsMTIsImR1cCIsMTMsIiREaXNwYXRjaGVyX2NhbGxiYWNrcyIsIiREaXNwYXRjaGVyX2lzUGVuZGluZyIsIiREaXNwYXRjaGVyX2lzSGFuZGxlZCIsIiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmciLCIkRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCIsImludmFyaWFudCIsIl9sYXN0SUQiLCJfcHJlZml4IiwidW5yZWdpc3RlciIsIndhaXRGb3IiLCJpZHMiLCJpaSIsIiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrIiwicGF5bG9hZCIsIiREaXNwYXRjaGVyX3N0YXJ0RGlzcGF0Y2hpbmciLCIkRGlzcGF0Y2hlcl9zdG9wRGlzcGF0Y2hpbmciLCJpc0Rpc3BhdGNoaW5nIiwiLi9pbnZhcmlhbnQiLDE0LCJjb25kaXRpb24iLCJmb3JtYXQiLCJiIiwiYyIsImQiLCJlcnJvciIsInVuZGVmaW5lZCIsImFyZ3MiLCJhcmdJbmRleCIsInJlcGxhY2UiLCJmcmFtZXNUb1BvcCIsMTUsIl9ldmVudHMiLCJfbWF4TGlzdGVuZXJzIiwiaXNGdW5jdGlvbiIsImFyZyIsImlzTnVtYmVyIiwiaXNPYmplY3QiLCJpc1VuZGVmaW5lZCIsImRlZmF1bHRNYXhMaXN0ZW5lcnMiLCJzZXRNYXhMaXN0ZW5lcnMiLCJpc05hTiIsIlR5cGVFcnJvciIsImVyIiwiaGFuZGxlciIsImxpc3RlbmVycyIsIkFycmF5Iiwic2xpY2UiLCJhZGRMaXN0ZW5lciIsImxpc3RlbmVyIiwibSIsIm5ld0xpc3RlbmVyIiwid2FybmVkIiwidHJhY2UiLCJvbmNlIiwiZyIsImZpcmVkIiwibGlzdCIsInBvc2l0aW9uIiwic3BsaWNlIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwicmV0IiwibGlzdGVuZXJDb3VudCIsImVtaXR0ZXIiLDE2LDE3LDE4LCJUb09iamVjdCIsIk9iamVjdCIsInRhcmdldCIsInNvdXJjZSIsImZyb20iLCJrZXlzIiwidG8iXSwibWFwcGluZ3MiOiJDQUFBLFFBQUFBLEdBQUFDLEVBQUFDLEVBQUFDLEdBQUEsUUFBQUMsR0FBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLEdBQUFFLEdBQUEsa0JBQUFDLFVBQUFBLE9BQUEsS0FBQUYsR0FBQUMsRUFBQSxNQUFBQSxHQUFBRixHQUFBLEVBQUEsSUFBQUksRUFBQSxNQUFBQSxHQUFBSixHQUFBLEVBQUEsSUFBQUssR0FBQSxHQUFBQyxPQUFBLHVCQUFBTixFQUFBLElBQUEsTUFBQUssR0FBQUUsS0FBQSxtQkFBQUYsRUFBQSxHQUFBRyxHQUFBWCxFQUFBRyxJQUFBUyxXQUFBYixHQUFBSSxHQUFBLEdBQUFVLEtBQUFGLEVBQUFDLFFBQUEsU0FBQWQsR0FBQSxHQUFBRSxHQUFBRCxFQUFBSSxHQUFBLEdBQUFMLEVBQUEsT0FBQUksR0FBQUYsRUFBQUEsRUFBQUYsSUFBQWEsRUFBQUEsRUFBQUMsUUFBQWQsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxNQUFBRCxHQUFBRyxHQUFBUyxRQUFBLElBQUEsR0FBQUwsR0FBQSxrQkFBQUQsVUFBQUEsUUFBQUgsRUFBQSxFQUFBQSxFQUFBRixFQUFBYSxPQUFBWCxJQUFBRCxFQUFBRCxFQUFBRSxHQUFBLE9BQUFELEtBQUFhLEdBQUEsU0FBQVQsUUFBQVUsT0FBQUosVUNBQSxXQUNBLEdBQUFLLGVB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cUosSUFBTSxLQUFLbUUsSUFBSSxTQUFTM1EsUUFBUVUsT0FBT0osU2NwckMxQyxZQUVBLFNBQUFzUSxVQUFBMUosS0FDQSxHQUFBLE1BQUFBLElBQ0EsS0FBQSxJQUFBaUksV0FBQSx3REFHQSxPQUFBMEIsUUFBQTNKLEtBR0F4RyxPQUFBSixRQUFBdVEsT0FBQWhGLFFBQUEsU0FBQWlGLE9BQUFDLFFBS0EsSUFBQSxHQUpBQyxNQUNBQyxLQUNBQyxHQUFBTixTQUFBRSxRQUVBbFIsRUFBQSxFQUFBQSxFQUFBdUQsVUFBQTNDLE9BQUFaLElBQUEsQ0FDQW9SLEtBQUE3TixVQUFBdkQsR0FDQXFSLEtBQUFKLE9BQUFJLEtBQUFKLE9BQUFHLE1BRUEsS0FBQSxHQUFBL1EsR0FBQSxFQUFBQSxFQUFBZ1IsS0FBQXpRLE9BQUFQLElBQ0FpUixHQUFBRCxLQUFBaFIsSUFBQStRLEtBQUFDLEtBQUFoUixJQUlBLE1BQUFpUixlZHdyQ1csRUFBRSIsImZpbGUiOiJidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgR2FtZUNvbXBvbmVudCwgVmlld0NvbnRyb2xsZXI7XG5cbiAgR2FtZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9HYW1lQ29tcG9uZW50LmNvZmZlZScpO1xuXG4gIFZpZXdDb250cm9sbGVyID0gUmVhY3QuY3JlYXRlRWxlbWVudChHYW1lQ29tcG9uZW50LCBudWxsKTtcblxuICBSZWFjdC5yZW5kZXIoVmlld0NvbnRyb2xsZXIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5lc3dlZXBlcicpKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsbnVsbCwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbm1vZHVsZS5leHBvcnRzLkRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2xpYi9EaXNwYXRjaGVyJylcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIERpc3BhdGNoZXI7XG5cbiAgRGlzcGF0Y2hlciA9IHJlcXVpcmUoJ0ZsdXgnKS5EaXNwYXRjaGVyO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gbmV3IERpc3BhdGNoZXIoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIERpc3BhdGNoZXI7XG5cbiAgRGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4uL0Rpc3BhdGNoZXIuY29mZmVlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgdG9nZ2xlRmxhZzogZnVuY3Rpb24odWlkKSB7XG4gICAgICByZXR1cm4gRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdUSUxFX0ZMQUdfVE9HR0xFJyxcbiAgICAgICAgdWlkOiB1aWRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKHVpZCkge1xuICAgICAgcmV0dXJuIERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnVElMRV9DTEVBUicsXG4gICAgICAgIHVpZDogdWlkXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBUaWxlTW9kZWwsIFRpbGVzQ29sbGVjdGlvbixcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFRpbGVNb2RlbCA9IHJlcXVpcmUoJy4uL21vZGVscy9UaWxlTW9kZWwuY29mZmVlJyk7XG5cbiAgVGlsZXNDb2xsZWN0aW9uID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFRpbGVzQ29sbGVjdGlvbigpIHtcbiAgICAgIHZhciBNb2RlbCwgY29sbGVjdGlvbjtcbiAgICAgIHRoaXMuYWxsID0gW107XG4gICAgICBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIHRoaXMubW9kZWwgPSBNb2RlbCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgICAgIGV4dGVuZChNb2RlbCwgc3VwZXJDbGFzcyk7XG5cbiAgICAgICAgZnVuY3Rpb24gTW9kZWwoKSB7XG4gICAgICAgICAgcmV0dXJuIE1vZGVsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgTW9kZWwucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgTW9kZWwuX19zdXBlcl9fLmNsZWFyLmNhbGwodGhpcyk7XG4gICAgICAgICAgY29sbGVjdGlvbi5jbGVhck5laWdoYm9ycyh0aGlzKTtcbiAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5tb3ZlVXBkYXRlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgTW9kZWwucHJvdG90eXBlLnRvZ2dsZUZsYWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBNb2RlbC5fX3N1cGVyX18udG9nZ2xlRmxhZy5jYWxsKHRoaXMpO1xuICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uLm1vdmVVcGRhdGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBNb2RlbC5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICBjb2xsZWN0aW9uLm5vTWluZUZpcnN0Q2xpY2sodGhpcyk7XG4gICAgICAgICAgcmV0dXJuIE1vZGVsLl9fc3VwZXJfXy5jbGljay5jYWxsKHRoaXMsICRldmVudCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIE1vZGVsO1xuXG4gICAgICB9KShUaWxlTW9kZWwpO1xuICAgICAgdGhpcy5uZXdHYW1lKCk7XG4gICAgfVxuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5uZXdHYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXR0cnMsIGksIGosIGssIG1pbmVOdW0sIHJlZiwgcmVmMSwgcmVmMiwgdGlsZSwgeCwgeTtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgIHRoaXMuc2l6ZVkgPSA0O1xuICAgICAgdGhpcy5zaXplWCA9IDc7XG4gICAgICB0aGlzLm51bU9mTWluZXMgPSA1O1xuICAgICAgZm9yICh5ID0gaSA9IDAsIHJlZiA9IHRoaXMuc2l6ZVkgLSAxOyAwIDw9IHJlZiA/IGkgPD0gcmVmIDogaSA+PSByZWY7IHkgPSAwIDw9IHJlZiA/ICsraSA6IC0taSkge1xuICAgICAgICBmb3IgKHggPSBqID0gMCwgcmVmMSA9IHRoaXMuc2l6ZVggLSAxOyAwIDw9IHJlZjEgPyBqIDw9IHJlZjEgOiBqID49IHJlZjE7IHggPSAwIDw9IHJlZjEgPyArK2ogOiAtLWopIHtcbiAgICAgICAgICBhdHRycyA9IHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLmFkZChhdHRycyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobWluZU51bSA9IGsgPSAxLCByZWYyID0gdGhpcy5udW1PZk1pbmVzOyAxIDw9IHJlZjIgPyBrIDw9IHJlZjIgOiBrID49IHJlZjI7IG1pbmVOdW0gPSAxIDw9IHJlZjIgPyArK2sgOiAtLWspIHtcbiAgICAgICAgdGlsZSA9IHRoaXMucmFuZG9tU2FmZVRpbGUoKTtcbiAgICAgICAgdGlsZS5tb2RlbC5pc01pbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy50YWxseU1pbmVzKCk7XG4gICAgICByZXR1cm4gdGhpcy5nYW1lVXBkYXRlKCk7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUubm9NaW5lRmlyc3RDbGljayA9IGZ1bmN0aW9uKHRpbGUpIHtcbiAgICAgIGlmICh0aGlzLm51bU9mQ2xlYXJzID09PSAwICYmIHRpbGUubW9kZWwuaXNNaW5lID09PSB0cnVlKSB7XG4gICAgICAgIHRpbGUubW9kZWwuaXNNaW5lID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmFuZG9tU2FmZVRpbGUoKS5tb2RlbC5pc01pbmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnRhbGx5TWluZXMoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICB2YXIgdGlsZTtcbiAgICAgIHRpbGUgPSBuZXcgdGhpcy5tb2RlbChtb2RlbCk7XG4gICAgICB0aGlzLmFsbC5wdXNoKHRpbGUpO1xuICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuaGFuZGxlVGlsZUNsaWNrID0gZnVuY3Rpb24oZXZlbnQsIGluZGV4KSB7fTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuYWxsID0gW107XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgVGlsZXNDb2xsZWN0aW9uLnByb3RvdHlwZS5yYW5kb21TYWZlVGlsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGZpbmRBdHRycywgcmFuZG9tSW5kZXgsIHNhZmVUaWxlcztcbiAgICAgIGZpbmRBdHRycyA9IHtcbiAgICAgICAgaXNDbGVhcjogZmFsc2UsXG4gICAgICAgIGlzTWluZTogZmFsc2VcbiAgICAgIH07XG4gICAgICBzYWZlVGlsZXMgPSB0aGlzLmdldEFsbChmaW5kQXR0cnMpO1xuICAgICAgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzYWZlVGlsZXMubGVuZ3RoKTtcbiAgICAgIHJldHVybiBzYWZlVGlsZXNbcmFuZG9tSW5kZXhdO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLnRhbGx5TWluZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhZGphY2VudFRpbGUsIGksIGosIGxlbiwgbGVuMSwgbmVpZ2hib3JBdHRycywgbmVpZ2hib3JNaW5lLCBuZWlnaGJvck1pbmVzLCBuZWlnaGJvclgsIG5laWdoYm9yWSwgcmVmLCByZWYxLCByZXN1bHRzLCB0aWxlO1xuICAgICAgcmVmID0gdGhpcy5hbGw7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGlsZSA9IHJlZltpXTtcbiAgICAgICAgbmVpZ2hib3JNaW5lcyA9IDA7XG4gICAgICAgIHJlZjEgPSB0aWxlLmFkamFjZW50VGlsZXM7XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICAgIGFkamFjZW50VGlsZSA9IHJlZjFbal07XG4gICAgICAgICAgbmVpZ2hib3JYID0gdGlsZS5tb2RlbC54ICsgYWRqYWNlbnRUaWxlWzBdO1xuICAgICAgICAgIG5laWdoYm9yWSA9IHRpbGUubW9kZWwueSArIGFkamFjZW50VGlsZVsxXTtcbiAgICAgICAgICBuZWlnaGJvckF0dHJzID0ge1xuICAgICAgICAgICAgaXNNaW5lOiB0cnVlLFxuICAgICAgICAgICAgeDogbmVpZ2hib3JYLFxuICAgICAgICAgICAgeTogbmVpZ2hib3JZXG4gICAgICAgICAgfTtcbiAgICAgICAgICBuZWlnaGJvck1pbmUgPSB0aGlzLmdldChuZWlnaGJvckF0dHJzKTtcbiAgICAgICAgICBpZiAobmVpZ2hib3JNaW5lICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIG5laWdoYm9yTWluZXMrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0cy5wdXNoKHRpbGUubW9kZWwuYWRqYWNlbnRNaW5lcyA9IG5laWdoYm9yTWluZXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2FtZVVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIGxlbiwgcmVmLCB0aWxlO1xuICAgICAgdGhpcy54ID0gTWF0aC5tYXguYXBwbHkodGhpcywgdGhpcy5hbGwubWFwKGZ1bmN0aW9uKHRpbGUpIHtcbiAgICAgICAgcmV0dXJuIHRpbGUubW9kZWwueDtcbiAgICAgIH0pKTtcbiAgICAgIHRoaXMueSA9IE1hdGgubWF4LmFwcGx5KHRoaXMsIHRoaXMuYWxsLm1hcChmdW5jdGlvbih0aWxlKSB7XG4gICAgICAgIHJldHVybiB0aWxlLm1vZGVsLnk7XG4gICAgICB9KSk7XG4gICAgICB0aGlzLnggPSB0aGlzLngtLTtcbiAgICAgIHRoaXMueSA9IHRoaXMueS0tO1xuICAgICAgdGhpcy5udW1PZk1pbmVzID0gMDtcbiAgICAgIHJlZiA9IHRoaXMuYWxsO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRpbGUgPSByZWZbaV07XG4gICAgICAgIGlmICh0aWxlLm1vZGVsLmlzTWluZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMubnVtT2ZNaW5lcysrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5tb3ZlVXBkYXRlKCk7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUubW92ZVVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIGxlbiwgcmVmLCB0aWxlO1xuICAgICAgdGhpcy5sb3NzID0gZmFsc2U7XG4gICAgICB0aGlzLndpbiA9IGZhbHNlO1xuICAgICAgdGhpcy5udW1PZkNsZWFycyA9IDA7XG4gICAgICB0aGlzLm51bU9mRmxhZ3MgPSAwO1xuICAgICAgcmVmID0gdGhpcy5hbGw7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGlsZSA9IHJlZltpXTtcbiAgICAgICAgaWYgKHRpbGUubW9kZWwuaXNDbGVhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMubnVtT2ZDbGVhcnMrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZS5tb2RlbC5pc0ZsYWdnZWQgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLm51bU9mRmxhZ3MrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZS5tb2RlbC5pc01pbmUgPT09IHRydWUgJiYgdGlsZS5tb2RlbC5pc0NsZWFyID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5sb3NzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubG9zcyA9PT0gZmFsc2UgJiYgdGhpcy5hbGwubGVuZ3RoIC0gdGhpcy5udW1PZk1pbmVzIC0gdGhpcy5udW1PZkNsZWFycyA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aW4gPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmNsZWFyTmVpZ2hib3JzID0gZnVuY3Rpb24odGlsZSkge1xuICAgICAgdmFyIGFkamFjZW50VGlsZSwgaSwgbGVuLCBuZWlnaGJvciwgcmVmLCByZXN1bHRzLCBzaG91bGRDbGVhck5laWdoYm9yLCBzaG91bGRDbGVhck5laWdoYm9ycztcbiAgICAgIHNob3VsZENsZWFyTmVpZ2hib3JzID0gdGlsZS5tb2RlbC5hZGphY2VudE1pbmVzID09PSAwICYmIHRpbGUubW9kZWwuaXNNaW5lID09PSBmYWxzZTtcbiAgICAgIGlmIChzaG91bGRDbGVhck5laWdoYm9ycykge1xuICAgICAgICByZWYgPSB0aWxlLmFkamFjZW50VGlsZXM7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgYWRqYWNlbnRUaWxlID0gcmVmW2ldO1xuICAgICAgICAgIG5laWdoYm9yID0gdGhpcy5nZXQoe1xuICAgICAgICAgICAgeDogdGlsZS5tb2RlbC54ICsgYWRqYWNlbnRUaWxlWzBdLFxuICAgICAgICAgICAgeTogdGlsZS5tb2RlbC55ICsgYWRqYWNlbnRUaWxlWzFdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2hvdWxkQ2xlYXJOZWlnaGJvciA9IG5laWdoYm9yICYmIG5laWdoYm9yLm1vZGVsLmlzQ2xlYXIgPT09IGZhbHNlICYmIG5laWdoYm9yLm1vZGVsLmlzTWluZSA9PT0gZmFsc2U7XG4gICAgICAgICAgaWYgKHNob3VsZENsZWFyTmVpZ2hib3IpIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChuZWlnaGJvci5jbGljaygpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHZvaWQgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRBbGwoYXR0cnMpWzBdO1xuICAgIH07XG5cbiAgICBUaWxlc0NvbGxlY3Rpb24ucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICB2YXIgaSwga2V5LCBsZW4sIG1hdGNoZXMsIG51bU9mQXR0cnMsIG51bU9mTWF0Y2hlZEF0dHJzLCByZWYsIHRpbGUsIHZhbDtcbiAgICAgIG1hdGNoZXMgPSBbXTtcbiAgICAgIGlmICghYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsO1xuICAgICAgfVxuICAgICAgcmVmID0gdGhpcy5hbGw7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGlsZSA9IHJlZltpXTtcbiAgICAgICAgbnVtT2ZBdHRycyA9IDA7XG4gICAgICAgIG51bU9mTWF0Y2hlZEF0dHJzID0gMDtcbiAgICAgICAgZm9yIChrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICB2YWwgPSBhdHRyc1trZXldO1xuICAgICAgICAgIG51bU9mQXR0cnMrKztcbiAgICAgICAgICBpZiAodGlsZS5tb2RlbFtrZXldID09PSB2YWwpIHtcbiAgICAgICAgICAgIG51bU9mTWF0Y2hlZEF0dHJzKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChudW1PZk1hdGNoZWRBdHRycyA9PT0gbnVtT2ZBdHRycykge1xuICAgICAgICAgIG1hdGNoZXMucHVzaCh0aWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgfTtcblxuICAgIFRpbGVzQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0SW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbnVtT2ZUaWxlczogdGhpcy5hbGwubGVuZ3RoLFxuICAgICAgICBudW1PZk1pbmVzOiB0aGlzLm51bU9mTWluZXMsXG4gICAgICAgIG51bU9mRmxhZ3M6IHRoaXMubnVtT2ZGbGFncyxcbiAgICAgICAgbnVtT2ZVbmNsZWFyZWQ6IHRoaXMuYWxsLmxlbmd0aCAtIHRoaXMubnVtT2ZNaW5lcyAtIHRoaXMubnVtT2ZDbGVhcnNcbiAgICAgIH07XG4gICAgfTtcblxuICAgIHJldHVybiBUaWxlc0NvbGxlY3Rpb247XG5cbiAgfSkoKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFRpbGVzQ29sbGVjdGlvbjtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIERpc3BhdGNoZXIsIEdhbWUsIEluZm9Db21wb25lbnQsIFIsIFRpbGVTdG9yZSwgVGlsZXNDb21wb25lbnQsIGdldFN0YXRlO1xuXG4gIFRpbGVzQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9UaWxlc0NvbXBvbmVudC5jb2ZmZWUnKTtcblxuICBJbmZvQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9JbmZvQ29tcG9uZW50LmNvZmZlZScpO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9EaXNwYXRjaGVyLmNvZmZlZScpO1xuXG4gIFRpbGVTdG9yZSA9IHJlcXVpcmUoJy4uL3N0b3Jlcy9UaWxlU3RvcmUuY29mZmVlJyk7XG5cbiAgUiA9IFJlYWN0LkRPTTtcblxuICBnZXRTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhbGw6IFRpbGVTdG9yZS5nZXRBbGwoKSxcbiAgICAgIGluZm86IFRpbGVTdG9yZS5nZXRJbmZvKClcbiAgICB9O1xuICB9O1xuXG4gIEdhbWUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdHYW1lJyxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGdldFN0YXRlKCk7XG4gICAgfSxcbiAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gVGlsZVN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMuX29uQ2hhbmdlKTtcbiAgICB9LFxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBUaWxlU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5fb25DaGFuZ2UpO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBSLmRpdih7XG4gICAgICAgIGlkOiAnZ2FtZSdcbiAgICAgIH0sIFtcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbmZvQ29tcG9uZW50LCB7XG4gICAgICAgICAgaW5mbzogdGhpcy5zdGF0ZS5pbmZvXG4gICAgICAgIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFRpbGVzQ29tcG9uZW50LCB7XG4gICAgICAgICAgdGlsZXM6IHRoaXMuc3RhdGUuYWxsXG4gICAgICAgIH0pXG4gICAgICBdKTtcbiAgICB9LFxuICAgIF9vbkNoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICBjb25zb2xlLmxvZygnY2hhbmdlIScpO1xuICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoZ2V0U3RhdGUoKSk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IEdhbWU7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBJbmZvLCBSO1xuXG4gIFIgPSBSZWFjdC5ET007XG5cbiAgSW5mbyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0luZm8nLFxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gUi51bCh7XG4gICAgICAgIGlkOiAnc3RhdHMnXG4gICAgICB9LCBbUi5saShudWxsLCB0aGlzLnByb3BzLmluZm8ubnVtT2ZUaWxlcyArIFwiIHRpbGVzXCIpLCBSLmxpKG51bGwsIHRoaXMucHJvcHMuaW5mby5udW1PZk1pbmVzICsgXCIgbWluZXNcIiksIFIubGkobnVsbCwgdGhpcy5wcm9wcy5pbmZvLm51bU9mRmxhZ3MgKyBcIiBmbGFnZ2VkIHRpbGVzXCIpLCBSLmxpKG51bGwsIHRoaXMucHJvcHMuaW5mby5udW1PZlVuY2xlYXJlZCArIFwiIGxlZnQgdG8gY2xlYXJcIildKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gSW5mbztcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIFIsIFRpbGUsIFRpbGVBY3Rpb25zO1xuXG4gIFRpbGVBY3Rpb25zID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9UaWxlQWN0aW9ucy5jb2ZmZWUnKTtcblxuICBSID0gUmVhY3QuRE9NO1xuXG4gIFRpbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdUaWxlJyxcbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFIubGkoe1xuICAgICAgICBjbGFzc05hbWU6IHRoaXMuZ2V0Q2xhc3MoKSxcbiAgICAgICAgb25DbGljazogdGhpcy5jbGlja0hhbmRsZXJcbiAgICAgIH0sIFIuc3BhbihudWxsLCB0aGlzLmdldFRleHQoKSkpO1xuICAgIH0sXG4gICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgIHZhciBmbGFnS2V5V2FzUHJlc3NlZDtcbiAgICAgIGlmICghJGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBUaWxlQWN0aW9ucy5jbGVhcih0aGlzLnByb3BzLnRpbGUubW9kZWwudWlkKTtcbiAgICAgIH1cbiAgICAgIGZsYWdLZXlXYXNQcmVzc2VkID0gJGV2ZW50LnNoaWZ0S2V5ID09PSB0cnVlIHx8ICRldmVudC5hbHRLZXkgPT09IHRydWU7XG4gICAgICBpZiAoZmxhZ0tleVdhc1ByZXNzZWQpIHtcbiAgICAgICAgcmV0dXJuIFRpbGVBY3Rpb25zLnRvZ2dsZUZsYWcodGhpcy5wcm9wcy50aWxlLm1vZGVsLnVpZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVGlsZUFjdGlvbnMuY2xlYXIodGhpcy5wcm9wcy50aWxlLm1vZGVsLnVpZCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpc0ZpcnN0Q29sdW1uOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnRpbGUubW9kZWwueCA9PT0gMDtcbiAgICB9LFxuICAgIGhhc0JlZW5GbGFnZ2VkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnRpbGUubW9kZWwuaXNDbGVhciAhPT0gdHJ1ZSAmJiB0aGlzLnByb3BzLnRpbGUubW9kZWwuaXNGbGFnZ2VkID09PSB0cnVlO1xuICAgIH0sXG4gICAgaGFzQmVlbkNsZWFyZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudGlsZS5tb2RlbC5pc0NsZWFyID09PSB0cnVlO1xuICAgIH0sXG4gICAgaGFzTWluZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy50aWxlLm1vZGVsLmlzTWluZSA9PT0gdHJ1ZTtcbiAgICB9LFxuICAgIHNob3VsZERpc3BsYXlNaW5lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhc01pbmUoKSAmJiB0aGlzLmhhc0JlZW5DbGVhcmVkKCk7XG4gICAgfSxcbiAgICBoYXNaZXJvQWRqYWNlbnRNaW5lczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy50aWxlLm1vZGVsLmFkamFjZW50TWluZXMgPT09IDAgJiYgIXRoaXMuaGFzTWluZSgpO1xuICAgIH0sXG4gICAgZ2V0VGV4dDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGV4dDtcbiAgICAgIHRleHQgPSB0aGlzLnByb3BzLnRpbGUubW9kZWwuYWRqYWNlbnRNaW5lcztcbiAgICAgIGlmICh0aGlzLmhhc0JlZW5GbGFnZ2VkKCkpIHtcbiAgICAgICAgdGV4dCA9ICc/JztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zaG91bGREaXNwbGF5TWluZSgpKSB7XG4gICAgICAgIHRleHQgPSAnWCc7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9LFxuICAgIGdldENsYXNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBbJ3RpbGUnLCB0aGlzLmlzRmlyc3RDb2x1bW4oKSA/ICdudGgnIDogdm9pZCAwLCB0aGlzLmhhc0JlZW5DbGVhcmVkKCkgPyAnY2xlYXInIDogdm9pZCAwLCB0aGlzLmhhc0JlZW5GbGFnZ2VkKCkgPyAnZmxhZ2dlZCcgOiB2b2lkIDAsIHRoaXMuc2hvdWxkRGlzcGxheU1pbmUoKSA/ICdtaW5lJyA6IHZvaWQgMCwgdGhpcy5oYXNaZXJvQWRqYWNlbnRNaW5lcygpID8gJ2NsZWFyIHplcm8nIDogdm9pZCAwXS5qb2luKCcgJyk7XG4gICAgfVxuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFRpbGU7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBSLCBUaWxlQ29tcG9uZW50LCBUaWxlcztcblxuICBUaWxlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9UaWxlQ29tcG9uZW50LmNvZmZlZScpO1xuXG4gIFIgPSBSZWFjdC5ET007XG5cbiAgVGlsZXMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdUaWxlcycsXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0aWxlcztcbiAgICAgIHRpbGVzID0gdGhpcy5wcm9wcy50aWxlcy5tYXAoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFRpbGVDb21wb25lbnQsIHtcbiAgICAgICAgICAgIGtleTogaW5kZXgsXG4gICAgICAgICAgICByZWY6IGl0ZW0ubW9kZWwudWlkLFxuICAgICAgICAgICAgdGlsZTogaXRlbVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgcmV0dXJuIFIudWwoe1xuICAgICAgICBpZDogJ2JvYXJkJ1xuICAgICAgfSwgdGlsZXMpO1xuICAgIH1cbiAgfSk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBUaWxlcztcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIFRpbGVNb2RlbDtcblxuICBOdW1iZXIuaXNJbnRlZ2VyID0gTnVtYmVyLmlzSW50ZWdlciB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUodmFsdWUpICYmIE1hdGguZmxvb3IodmFsdWUpID09PSB2YWx1ZTtcbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFRpbGVNb2RlbCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBUaWxlTW9kZWwoYXR0cnMpIHtcbiAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihhdHRycy54KSB8fCAhTnVtYmVyLmlzSW50ZWdlcihhdHRycy55KSkge1xuICAgICAgICB0aHJvdyBcImB4YCBhbmQgYHlgIGFyZSByZXF1aXJlZCBJbnRlZ2VyIGF0dHJpYnV0ZXMgdG8gaW5zdGFudGlhdGUgVGlsZVwiO1xuICAgICAgfVxuICAgICAgdGhpcy5tb2RlbCA9IHtcbiAgICAgICAgeDogdm9pZCAwLFxuICAgICAgICB5OiB2b2lkIDAsXG4gICAgICAgIHVpZDogdm9pZCAwLFxuICAgICAgICBpc01pbmU6IGZhbHNlLFxuICAgICAgICBpc0NsZWFyOiBmYWxzZSxcbiAgICAgICAgaXNGbGFnZ2VkOiBmYWxzZSxcbiAgICAgICAgYWRqYWNlbnRNaW5lczogMFxuICAgICAgfTtcbiAgICAgIHRoaXMuYWRqYWNlbnRUaWxlcyA9IFtbLTEsIC0xXSwgWzAsIC0xXSwgWzEsIC0xXSwgWy0xLCAwXSwgWzEsIDBdLCBbLTEsIDFdLCBbMCwgMV0sIFsxLCAxXV07XG4gICAgICB0aGlzLnNldChhdHRycyk7XG4gICAgfVxuXG4gICAgVGlsZU1vZGVsLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihhdHRycykge1xuICAgICAgdmFyIGF0dHIsIGtleTtcbiAgICAgIGZvciAoa2V5IGluIGF0dHJzKSB7XG4gICAgICAgIGF0dHIgPSBhdHRyc1trZXldO1xuICAgICAgICB0aGlzLm1vZGVsW2tleV0gPSBhdHRyO1xuICAgICAgICB0aGlzLm1vZGVsLnVpZCA9IFN0cmluZyhhdHRycy54KSArICctJyArIFN0cmluZyhhdHRycy55KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBUaWxlTW9kZWwucHJvdG90eXBlLnRvZ2dsZUZsYWcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMubW9kZWwuaXNGbGFnZ2VkID0gIXRoaXMubW9kZWwuaXNGbGFnZ2VkO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFRpbGVNb2RlbC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMubW9kZWwuaXNDbGVhciA9IHRydWU7XG4gICAgICB0aGlzLm1vZGVsLmlzRmxhZ2dlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFRpbGVNb2RlbC5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgIHZhciBmbGFnS2V5V2FzUHJlc3NlZDtcbiAgICAgIGlmICghJGV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICBmbGFnS2V5V2FzUHJlc3NlZCA9ICRldmVudC5zaGlmdEtleSA9PT0gdHJ1ZSB8fCAkZXZlbnQuYWx0S2V5ID09PSB0cnVlO1xuICAgICAgaWYgKGZsYWdLZXlXYXNQcmVzc2VkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZUZsYWcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBUaWxlTW9kZWw7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIERpc3BhdGNoZXIsIEV2ZW50RW1pdHRlciwgVGlsZXMsIFRpbGVzQ29sbGVjdGlvbiwgVG9kb1N0b3JlLCBhc3NpZ247XG5cbiAgVGlsZXNDb2xsZWN0aW9uID0gcmVxdWlyZSgnLi4vY29sbGVjdGlvbnMvVGlsZXNDb2xsZWN0aW9uLmNvZmZlZScpO1xuXG4gIERpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9EaXNwYXRjaGVyLmNvZmZlZScpO1xuXG4gIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcblxuICBhc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbiAgVGlsZXMgPSBuZXcgVGlsZXNDb2xsZWN0aW9uKCk7XG5cbiAgVG9kb1N0b3JlID0gYXNzaWduKHt9LCBFdmVudEVtaXR0ZXIucHJvdG90eXBlLCB7XG4gICAgZXZlbnQ6ICdjaGFuZ2UnLFxuICAgIGdldEFsbDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gVGlsZXMuZ2V0QWxsKCk7XG4gICAgfSxcbiAgICBnZXRJbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBUaWxlcy5nZXRJbmZvKCk7XG4gICAgfSxcbiAgICBlbWl0Q2hhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmVtaXQodGhpcy5ldmVudCk7XG4gICAgfSxcbiAgICBhZGRDaGFuZ2VMaXN0ZW5lcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLm9uKHRoaXMuZXZlbnQsIGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIHJlbW92ZUNoYW5nZUxpc3RlbmVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTGlzdGVuZXIodGhpcy5ldmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSk7XG5cbiAgRGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihldmVudCkge1xuICAgIHZhciB0aWxlO1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAnVElMRV9GTEFHX1RPR0dMRSc6XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aWxlIGZsYWcnKTtcbiAgICAgICAgdGlsZSA9IFRpbGVzLmdldCh7XG4gICAgICAgICAgdWlkOiBldmVudC51aWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRpbGUudG9nZ2xlRmxhZygpO1xuICAgICAgICByZXR1cm4gVG9kb1N0b3JlLmVtaXRDaGFuZ2UoKTtcbiAgICAgIGNhc2UgJ1RJTEVfQ0xFQVInOlxuICAgICAgICBjb25zb2xlLmxvZygndGlsZSBjbGVhcicpO1xuICAgICAgICB0aWxlID0gVGlsZXMuZ2V0KHtcbiAgICAgICAgICB1aWQ6IGV2ZW50LnVpZFxuICAgICAgICB9KTtcbiAgICAgICAgdGlsZS5jbGVhcigpO1xuICAgICAgICByZXR1cm4gVG9kb1N0b3JlLmVtaXRDaGFuZ2UoKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gVG9kb1N0b3JlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLypcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEaXNwYXRjaGVyXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnLi9pbnZhcmlhbnQnKTtcblxudmFyIF9sYXN0SUQgPSAxO1xudmFyIF9wcmVmaXggPSAnSURfJztcblxuLyoqXG4gKiBEaXNwYXRjaGVyIGlzIHVzZWQgdG8gYnJvYWRjYXN0IHBheWxvYWRzIHRvIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLiBUaGlzIGlzXG4gKiBkaWZmZXJlbnQgZnJvbSBnZW5lcmljIHB1Yi1zdWIgc3lzdGVtcyBpbiB0d28gd2F5czpcbiAqXG4gKiAgIDEpIENhbGxiYWNrcyBhcmUgbm90IHN1YnNjcmliZWQgdG8gcGFydGljdWxhciBldmVudHMuIEV2ZXJ5IHBheWxvYWQgaXNcbiAqICAgICAgZGlzcGF0Y2hlZCB0byBldmVyeSByZWdpc3RlcmVkIGNhbGxiYWNrLlxuICogICAyKSBDYWxsYmFja3MgY2FuIGJlIGRlZmVycmVkIGluIHdob2xlIG9yIHBhcnQgdW50aWwgb3RoZXIgY2FsbGJhY2tzIGhhdmVcbiAqICAgICAgYmVlbiBleGVjdXRlZC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgY29uc2lkZXIgdGhpcyBoeXBvdGhldGljYWwgZmxpZ2h0IGRlc3RpbmF0aW9uIGZvcm0sIHdoaWNoXG4gKiBzZWxlY3RzIGEgZGVmYXVsdCBjaXR5IHdoZW4gYSBjb3VudHJ5IGlzIHNlbGVjdGVkOlxuICpcbiAqICAgdmFyIGZsaWdodERpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcigpO1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggY291bnRyeSBpcyBzZWxlY3RlZFxuICogICB2YXIgQ291bnRyeVN0b3JlID0ge2NvdW50cnk6IG51bGx9O1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggY2l0eSBpcyBzZWxlY3RlZFxuICogICB2YXIgQ2l0eVN0b3JlID0ge2NpdHk6IG51bGx9O1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGJhc2UgZmxpZ2h0IHByaWNlIG9mIHRoZSBzZWxlY3RlZCBjaXR5XG4gKiAgIHZhciBGbGlnaHRQcmljZVN0b3JlID0ge3ByaWNlOiBudWxsfVxuICpcbiAqIFdoZW4gYSB1c2VyIGNoYW5nZXMgdGhlIHNlbGVjdGVkIGNpdHksIHdlIGRpc3BhdGNoIHRoZSBwYXlsb2FkOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gKiAgICAgYWN0aW9uVHlwZTogJ2NpdHktdXBkYXRlJyxcbiAqICAgICBzZWxlY3RlZENpdHk6ICdwYXJpcydcbiAqICAgfSk7XG4gKlxuICogVGhpcyBwYXlsb2FkIGlzIGRpZ2VzdGVkIGJ5IGBDaXR5U3RvcmVgOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NpdHktdXBkYXRlJykge1xuICogICAgICAgQ2l0eVN0b3JlLmNpdHkgPSBwYXlsb2FkLnNlbGVjdGVkQ2l0eTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIGNvdW50cnksIHdlIGRpc3BhdGNoIHRoZSBwYXlsb2FkOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gKiAgICAgYWN0aW9uVHlwZTogJ2NvdW50cnktdXBkYXRlJyxcbiAqICAgICBzZWxlY3RlZENvdW50cnk6ICdhdXN0cmFsaWEnXG4gKiAgIH0pO1xuICpcbiAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBib3RoIHN0b3JlczpcbiAqXG4gKiAgICBDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIENvdW50cnlTdG9yZS5jb3VudHJ5ID0gcGF5bG9hZC5zZWxlY3RlZENvdW50cnk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSBjYWxsYmFjayB0byB1cGRhdGUgYENvdW50cnlTdG9yZWAgaXMgcmVnaXN0ZXJlZCwgd2Ugc2F2ZSBhIHJlZmVyZW5jZVxuICogdG8gdGhlIHJldHVybmVkIHRva2VuLiBVc2luZyB0aGlzIHRva2VuIHdpdGggYHdhaXRGb3IoKWAsIHdlIGNhbiBndWFyYW50ZWVcbiAqIHRoYXQgYENvdW50cnlTdG9yZWAgaXMgdXBkYXRlZCBiZWZvcmUgdGhlIGNhbGxiYWNrIHRoYXQgdXBkYXRlcyBgQ2l0eVN0b3JlYFxuICogbmVlZHMgdG8gcXVlcnkgaXRzIGRhdGEuXG4gKlxuICogICBDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIC8vIGBDb3VudHJ5U3RvcmUuY291bnRyeWAgbWF5IG5vdCBiZSB1cGRhdGVkLlxuICogICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBpcyBub3cgZ3VhcmFudGVlZCB0byBiZSB1cGRhdGVkLlxuICpcbiAqICAgICAgIC8vIFNlbGVjdCB0aGUgZGVmYXVsdCBjaXR5IGZvciB0aGUgbmV3IGNvdW50cnlcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gZ2V0RGVmYXVsdENpdHlGb3JDb3VudHJ5KENvdW50cnlTdG9yZS5jb3VudHJ5KTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSB1c2FnZSBvZiBgd2FpdEZvcigpYCBjYW4gYmUgY2hhaW5lZCwgZm9yIGV4YW1wbGU6XG4gKlxuICogICBGbGlnaHRQcmljZVN0b3JlLmRpc3BhdGNoVG9rZW4gPVxuICogICAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgICAgc3dpdGNoIChwYXlsb2FkLmFjdGlvblR5cGUpIHtcbiAqICAgICAgICAgY2FzZSAnY291bnRyeS11cGRhdGUnOlxuICogICAgICAgICAgIGZsaWdodERpc3BhdGNoZXIud2FpdEZvcihbQ2l0eVN0b3JlLmRpc3BhdGNoVG9rZW5dKTtcbiAqICAgICAgICAgICBGbGlnaHRQcmljZVN0b3JlLnByaWNlID1cbiAqICAgICAgICAgICAgIGdldEZsaWdodFByaWNlU3RvcmUoQ291bnRyeVN0b3JlLmNvdW50cnksIENpdHlTdG9yZS5jaXR5KTtcbiAqICAgICAgICAgICBicmVhaztcbiAqXG4gKiAgICAgICAgIGNhc2UgJ2NpdHktdXBkYXRlJzpcbiAqICAgICAgICAgICBGbGlnaHRQcmljZVN0b3JlLnByaWNlID1cbiAqICAgICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUoQ291bnRyeVN0b3JlLmNvdW50cnksIENpdHlTdG9yZS5jaXR5KTtcbiAqICAgICAgICAgICBicmVhaztcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSBgY291bnRyeS11cGRhdGVgIHBheWxvYWQgd2lsbCBiZSBndWFyYW50ZWVkIHRvIGludm9rZSB0aGUgc3RvcmVzJ1xuICogcmVnaXN0ZXJlZCBjYWxsYmFja3MgaW4gb3JkZXI6IGBDb3VudHJ5U3RvcmVgLCBgQ2l0eVN0b3JlYCwgdGhlblxuICogYEZsaWdodFByaWNlU3RvcmVgLlxuICovXG5cbiAgZnVuY3Rpb24gRGlzcGF0Y2hlcigpIHtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcyA9IHt9O1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNQZW5kaW5nID0ge307XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0hhbmRsZWQgPSB7fTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX3BlbmRpbmdQYXlsb2FkID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdpdGggZXZlcnkgZGlzcGF0Y2hlZCBwYXlsb2FkLiBSZXR1cm5zXG4gICAqIGEgdG9rZW4gdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGB3YWl0Rm9yKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBpZCA9IF9wcmVmaXggKyBfbGFzdElEKys7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdID0gY2FsbGJhY2s7XG4gICAgcmV0dXJuIGlkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgY2FsbGJhY2sgYmFzZWQgb24gaXRzIHRva2VuLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICovXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLnVucmVnaXN0ZXI9ZnVuY3Rpb24oaWQpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tpZF0sXG4gICAgICAnRGlzcGF0Y2hlci51bnJlZ2lzdGVyKC4uLik6IGAlc2AgZG9lcyBub3QgbWFwIHRvIGEgcmVnaXN0ZXJlZCBjYWxsYmFjay4nLFxuICAgICAgaWRcbiAgICApO1xuICAgIGRlbGV0ZSB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tpZF07XG4gIH07XG5cbiAgLyoqXG4gICAqIFdhaXRzIGZvciB0aGUgY2FsbGJhY2tzIHNwZWNpZmllZCB0byBiZSBpbnZva2VkIGJlZm9yZSBjb250aW51aW5nIGV4ZWN1dGlvblxuICAgKiBvZiB0aGUgY3VycmVudCBjYWxsYmFjay4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBhIGNhbGxiYWNrIGluXG4gICAqIHJlc3BvbnNlIHRvIGEgZGlzcGF0Y2hlZCBwYXlsb2FkLlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IGlkc1xuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUud2FpdEZvcj1mdW5jdGlvbihpZHMpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcsXG4gICAgICAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IE11c3QgYmUgaW52b2tlZCB3aGlsZSBkaXNwYXRjaGluZy4nXG4gICAgKTtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaWRzLmxlbmd0aDsgaWkrKykge1xuICAgICAgdmFyIGlkID0gaWRzW2lpXTtcbiAgICAgIGlmICh0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0pIHtcbiAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkW2lkXSxcbiAgICAgICAgICAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IENpcmN1bGFyIGRlcGVuZGVuY3kgZGV0ZWN0ZWQgd2hpbGUgJyArXG4gICAgICAgICAgJ3dhaXRpbmcgZm9yIGAlc2AuJyxcbiAgICAgICAgICBpZFxuICAgICAgICApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGludmFyaWFudChcbiAgICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdLFxuICAgICAgICAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IGAlc2AgZG9lcyBub3QgbWFwIHRvIGEgcmVnaXN0ZXJlZCBjYWxsYmFjay4nLFxuICAgICAgICBpZFxuICAgICAgKTtcbiAgICAgIHRoaXMuJERpc3BhdGNoZXJfaW52b2tlQ2FsbGJhY2soaWQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhIHBheWxvYWQgdG8gYWxsIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGF5bG9hZFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24ocGF5bG9hZCkge1xuICAgIGludmFyaWFudChcbiAgICAgICF0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmcsXG4gICAgICAnRGlzcGF0Y2guZGlzcGF0Y2goLi4uKTogQ2Fubm90IGRpc3BhdGNoIGluIHRoZSBtaWRkbGUgb2YgYSBkaXNwYXRjaC4nXG4gICAgKTtcbiAgICB0aGlzLiREaXNwYXRjaGVyX3N0YXJ0RGlzcGF0Y2hpbmcocGF5bG9hZCk7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuJERpc3BhdGNoZXJfY2FsbGJhY2tzKSB7XG4gICAgICAgIGlmICh0aGlzLiREaXNwYXRjaGVyX2lzUGVuZGluZ1tpZF0pIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiREaXNwYXRjaGVyX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9zdG9wRGlzcGF0Y2hpbmcoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIElzIHRoaXMgRGlzcGF0Y2hlciBjdXJyZW50bHkgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5pc0Rpc3BhdGNoaW5nPWZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiREaXNwYXRjaGVyX2lzRGlzcGF0Y2hpbmc7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGwgdGhlIGNhbGxiYWNrIHN0b3JlZCB3aXRoIHRoZSBnaXZlbiBpZC4gQWxzbyBkbyBzb21lIGludGVybmFsXG4gICAqIGJvb2trZWVwaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS4kRGlzcGF0Y2hlcl9pbnZva2VDYWxsYmFjaz1mdW5jdGlvbihpZCkge1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNQZW5kaW5nW2lkXSA9IHRydWU7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9jYWxsYmFja3NbaWRdKHRoaXMuJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQpO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNIYW5kbGVkW2lkXSA9IHRydWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB1cCBib29ra2VlcGluZyBuZWVkZWQgd2hlbiBkaXNwYXRjaGluZy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBEaXNwYXRjaGVyLnByb3RvdHlwZS4kRGlzcGF0Y2hlcl9zdGFydERpc3BhdGNoaW5nPWZ1bmN0aW9uKHBheWxvYWQpIHtcbiAgICBmb3IgKHZhciBpZCBpbiB0aGlzLiREaXNwYXRjaGVyX2NhbGxiYWNrcykge1xuICAgICAgdGhpcy4kRGlzcGF0Y2hlcl9pc1BlbmRpbmdbaWRdID0gZmFsc2U7XG4gICAgICB0aGlzLiREaXNwYXRjaGVyX2lzSGFuZGxlZFtpZF0gPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9wZW5kaW5nUGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgdGhpcy4kRGlzcGF0Y2hlcl9pc0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgYm9va2tlZXBpbmcgdXNlZCBmb3IgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuJERpc3BhdGNoZXJfc3RvcERpc3BhdGNoaW5nPWZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJERpc3BhdGNoZXJfcGVuZGluZ1BheWxvYWQgPSBudWxsO1xuICAgIHRoaXMuJERpc3BhdGNoZXJfaXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICB9O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gRGlzcGF0Y2hlcjtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGludmFyaWFudFxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgaW52YXJpYW50ID0gZnVuY3Rpb24oY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKGZhbHNlKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgK1xuICAgICAgICAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgJ0ludmFyaWFudCBWaW9sYXRpb246ICcgK1xuICAgICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7IHJldHVybiBhcmdzW2FyZ0luZGV4KytdOyB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH1cbiAgICAgIHRocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4nKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgICAgICAgZm9yIChpID0gMTsgaSA8IGxlbjsgaSsrKVxuICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgICBmb3IgKGkgPSAxOyBpIDwgbGVuOyBpKyspXG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblxuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIHZhciBtO1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gMDtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbihlbWl0dGVyLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IDE7XG4gIGVsc2VcbiAgICByZXQgPSBlbWl0dGVyLl9ldmVudHNbdHlwZV0ubGVuZ3RoO1xuICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBUb09iamVjdCh2YWwpIHtcblx0aWYgKHZhbCA9PSBudWxsKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcblx0fVxuXG5cdHJldHVybiBPYmplY3QodmFsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuXHR2YXIgZnJvbTtcblx0dmFyIGtleXM7XG5cdHZhciB0byA9IFRvT2JqZWN0KHRhcmdldCk7XG5cblx0Zm9yICh2YXIgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRmcm9tID0gYXJndW1lbnRzW3NdO1xuXHRcdGtleXMgPSBPYmplY3Qua2V5cyhPYmplY3QoZnJvbSkpO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRvO1xufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==